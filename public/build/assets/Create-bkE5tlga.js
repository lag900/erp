import{u as B,o as l,c as m,a as r,b as t,h as C,w as n,d as e,e as V,f as j,F as c,m as M,t as f,g as N,k as x,l as h,i as p,j as S,p as F,q as P}from"./app-CehYguHu.js";import{_ as U}from"./AuthenticatedLayout-CfY1nA_Q.js";import{P as G}from"./PrimaryButton-BWR49dfZ.js";import{_ as v}from"./TextInput-CVQfVas4.js";import{_ as d}from"./InputLabel-BdAlJ2D5.js";import{_ as u}from"./InputError-51rjNbxD.js";import{G as $}from"./GlobalCheckbox-CqgO5sP7.js";import{i as q}from"./browser-image-compression-DILJcqf6.js";/* empty css                                                              */import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./DangerButton-DmNu9a4c.js";import"./SecondaryButton-C9gXAhlZ.js";const A={class:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between"},D={class:"py-8"},I={class:"mx-auto max-w-3xl sm:px-6 lg:px-8"},E={class:"p-6 grid gap-6 sm:grid-cols-2"},H={class:"sm:col-span-2"},L={class:"relative mt-1"},O=["value"],W={class:"sm:col-span-2 flex items-center gap-2"},R={class:"sm:col-span-2"},T={class:"mt-2 flex justify-center rounded-lg border border-dashed border-gray-900/25 px-6 py-10"},z={class:"text-center"},J={class:"mt-4 flex text-sm leading-6 text-gray-600 justify-center"},Q={for:"image",class:"relative cursor-pointer rounded-md bg-white font-semibold text-primary focus-within:outline-none focus-within:ring-2 focus-within:ring-primary focus-within:ring-offset-2 hover:text-indigo-500"},K={key:0,class:"mt-2 text-sm font-semibold text-green-600"},X={class:"bg-gray-50 px-6 py-4 flex items-center justify-end gap-3 border-t border-gray-100"},me={__name:"Create",props:{locations:{type:Array,required:!0}},setup(y){const b=P(),_=F(()=>b.props.auth?.permissions??[]),w=a=>_.value.includes(a),o=B({location_id:"",name_en:"",name_ar:"",is_shared:!1,image:null}),k=async a=>{const s=a.target.files[0];if(!s)return;const i={maxSizeMB:1,maxWidthOrHeight:1920,useWebWorker:!0,initialQuality:.8};try{const g=await q(s,i);o.image=g}catch(g){console.error("Image compression failed:",g),o.image=s}};return(a,s)=>(l(),m(c,null,[r(t(C),{title:"Add Building"}),r(U,null,{header:n(()=>[e("div",A,[s[6]||(s[6]=e("div",null,[e("h2",{class:"text-2xl font-bold leading-tight text-gray-800"}," Create Building "),e("p",{class:"mt-1 text-sm text-gray-500"}," Register a new building under a specific university location. ")],-1)),r(t(h),{href:a.route("buildings.index"),class:"inline-flex items-center rounded-lg border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 shadow-sm transition-colors hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2"},{default:n(()=>[...s[5]||(s[5]=[e("svg",{class:"mr-2 -ml-1 h-4 w-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),p(" Back to Buildings ",-1)])]),_:1},8,["href"])])]),default:n(()=>[e("div",D,[e("div",I,[e("form",{class:"overflow-hidden rounded-xl border border-gray-200 bg-white shadow-soft",onSubmit:s[4]||(s[4]=V(i=>t(o).post(a.route("buildings.store"),{forceFormData:!0}),["prevent"]))},[s[15]||(s[15]=e("div",{class:"border-b border-gray-100 bg-gray-50 px-6 py-4"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"Building Details"),e("p",{class:"text-sm text-gray-500"},"Provide the necessary information to identify the building.")],-1)),e("div",E,[e("div",H,[r(d,{for:"location_id",value:"Location"}),e("div",L,[j(e("select",{id:"location_id","onUpdate:modelValue":s[0]||(s[0]=i=>t(o).location_id=i),class:"block w-full appearance-none rounded-lg border-gray-300 bg-white py-2 pl-3 pr-10 text-sm shadow-sm focus:border-primary focus:outline-none focus:ring-primary"},[s[7]||(s[7]=e("option",{value:"",disabled:""},"Select a location...",-1)),(l(!0),m(c,null,M(y.locations,i=>(l(),m("option",{key:i.id,value:i.id},f(i.name),9,O))),128))],512),[[N,t(o).location_id]]),s[8]||(s[8]=e("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[e("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])],-1))]),r(u,{class:"mt-2",message:t(o).errors.location_id},null,8,["message"])]),e("div",null,[r(d,{for:"name_en",value:"English Name (Required)"}),r(v,{id:"name_en",modelValue:t(o).name_en,"onUpdate:modelValue":s[1]||(s[1]=i=>t(o).name_en=i),class:"mt-1 block w-full",placeholder:"e.g. Engineering Block A",required:""},null,8,["modelValue"]),r(u,{class:"mt-2",message:t(o).errors.name_en},null,8,["message"])]),e("div",null,[r(d,{for:"name_ar",value:"Arabic Name (Optional)"}),r(v,{id:"name_ar",modelValue:t(o).name_ar,"onUpdate:modelValue":s[2]||(s[2]=i=>t(o).name_ar=i),class:"mt-1 block w-full text-right",dir:"rtl",placeholder:"مثال: مبنى الهندسة (أ)"},null,8,["modelValue"]),r(u,{class:"mt-2",message:t(o).errors.name_ar},null,8,["message"])]),e("div",W,[r($,{id:"is_shared",checked:t(o).is_shared,"onUpdate:checked":s[3]||(s[3]=i=>t(o).is_shared=i)},null,8,["checked"]),r(d,{for:"is_shared",value:"This is a shared building (available across all departments)"})]),e("div",R,[r(d,{for:"image",value:"Building Image (Optional)"}),e("div",T,[e("div",z,[s[11]||(s[11]=e("svg",{class:"mx-auto h-12 w-12 text-gray-300",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})],-1)),e("div",J,[e("label",Q,[s[9]||(s[9]=e("span",null,"Upload a file",-1)),e("input",{id:"image",type:"file",accept:"image/*",capture:"environment",class:"sr-only",onChange:k},null,32)]),s[10]||(s[10]=e("p",{class:"pl-1"},"or drag and drop",-1))]),s[12]||(s[12]=e("p",{class:"text-xs leading-5 text-gray-600"},"PNG, JPG, GIF up to 2MB",-1)),t(o).image?(l(),m("p",K," Selected: "+f(t(o).image.name),1)):x("",!0)])]),r(u,{class:"mt-2",message:t(o).errors.image},null,8,["message"])])]),e("div",X,[r(t(h),{href:a.route("buildings.index"),class:"text-sm font-medium text-gray-600 hover:text-gray-900"},{default:n(()=>[...s[13]||(s[13]=[p(" Cancel ",-1)])]),_:1},8,["href"]),w("building-create")?(l(),S(G,{key:0,disabled:t(o).processing},{default:n(()=>[...s[14]||(s[14]=[e("svg",{class:"mr-2 -ml-1 h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1),p(" Save Building ",-1)])]),_:1},8,["disabled"])):x("",!0)])],32)])])]),_:1})],64))}};export{me as default};
