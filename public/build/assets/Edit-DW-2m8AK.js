import{u as e,o as s,a,k as t,m as r,p as l,w as d,b as o,q as i,s as n,F as u,z as m,t as p,x as c,n as g,c as f,e as _,d as y,l as b,g as v,A as x}from"./vendor-DGI0tb4d.js";import{_ as w}from"./AuthenticatedLayout-Cfq4davl.js";import{P as h}from"./PrimaryButton-CXxvsKbC.js";import{_ as k}from"./TextInput-7Tb4wL4u.js";import{_ as j}from"./InputLabel-ttg1gjZN.js";import{_ as U}from"./InputError-CSjO0CYp.js";import{D as V}from"./DangerButton-Bzsvvehx.js";import{G as A}from"./GlobalCheckbox-BSagvGQB.js";import"./utils-B98O4e5m.js";/* empty css                                                              */import"./_plugin-vue_export-helper-BCo6x5W8.js";import"./SecondaryButton-DsdD6xme.js";const D={class:"flex flex-wrap items-center justify-between gap-3"},S={class:"flex flex-wrap gap-2"},E={class:"py-6"},q={class:"mx-auto max-w-4xl sm:px-6 lg:px-8"},B={class:"grid gap-6 sm:grid-cols-2"},C=["value"],I={class:"mt-8"},L={class:"flex items-center justify-between"},P={class:"text-xs font-medium text-gray-400"},T={class:"mt-4 grid gap-4 sm:grid-cols-2"},G={class:"flex items-center space-x-3"},N={class:"font-semibold text-gray-700"},z={class:"mt-6"},F=["value"],O={class:"mt-8 flex justify-end"},R={__name:"Edit",props:{user:{type:Object,required:!0},roles:{type:Array,required:!0},departments:{type:Array,required:!0}},setup(R){const $=R,H=x(),J=v(()=>H.props.auth?.permissions??[]),K=e=>J.value.includes(e),M=e({name:$.user.name,email:$.user.email,password:"",role_id:$.user.role_id||"",department_ids:$.user.department_ids||[],default_department_id:$.user.default_department_id||""}),Q=v(()=>$.departments.filter(e=>M.department_ids.includes(e.id)));return(e,v)=>(s(),a(u,null,[t(r(l),{title:"Edit User"}),t(w,null,{header:d(()=>[o("div",D,[v[10]||(v[10]=o("h2",{class:"text-xl font-semibold leading-tight text-gray-800"}," Edit User ",-1)),o("div",S,[t(r(b),{href:e.route("users.index"),class:"rounded border border-gray-300 px-3 py-2 text-sm text-gray-700 hover:bg-gray-50"},{default:d(()=>[...v[8]||(v[8]=[_(" Back to Users ",-1)])]),_:1},8,["href"]),K("user-delete")?(s(),f(V,{key:0,type:"button",onClick:v[0]||(v[0]=s=>e.$inertia.delete(e.route("users.destroy",R.user.id)))},{default:d(()=>[...v[9]||(v[9]=[_(" Delete User ",-1)])]),_:1})):y("",!0)])])]),default:d(()=>[o("div",E,[o("div",q,[o("form",{class:"rounded bg-white p-6 shadow",novalidate:"",onSubmit:v[7]||(v[7]=i(s=>r(M).put(e.route("users.update",R.user.id),{onSuccess:()=>e.window.showToast("success","User updated successfully")}),["prevent"]))},[o("div",B,[o("div",null,[t(j,{for:"name",value:"Name"}),t(k,{id:"name",modelValue:r(M).name,"onUpdate:modelValue":v[1]||(v[1]=e=>r(M).name=e),class:"mt-1 block w-full"},null,8,["modelValue"]),t(U,{class:"mt-2",message:r(M).errors.name},null,8,["message"])]),o("div",null,[t(j,{for:"email",value:"Email"}),t(k,{id:"email",modelValue:r(M).email,"onUpdate:modelValue":v[2]||(v[2]=e=>r(M).email=e),type:"text",inputmode:"email",class:"mt-1 block w-full"},null,8,["modelValue"]),t(U,{class:"mt-2",message:r(M).errors.email},null,8,["message"])]),o("div",null,[t(j,{for:"password",value:"New Password"}),t(k,{id:"password",modelValue:r(M).password,"onUpdate:modelValue":v[3]||(v[3]=e=>r(M).password=e),type:"password",class:"mt-1 block w-full",placeholder:"Leave blank to keep"},null,8,["modelValue"]),t(U,{class:"mt-2",message:r(M).errors.password},null,8,["message"])]),o("div",null,[t(j,{for:"role_id",value:"Role"}),n(o("select",{id:"role_id","onUpdate:modelValue":v[4]||(v[4]=e=>r(M).role_id=e),class:"mt-1 block w-full rounded border-gray-300 text-sm shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},[v[11]||(v[11]=o("option",{value:"",disabled:""},"Select role",-1)),(s(!0),a(u,null,m(R.roles,e=>(s(),a("option",{key:e.id,value:e.id},p(e.name),9,C))),128))],512),[[c,r(M).role_id]]),t(U,{class:"mt-2",message:r(M).errors.role_id},null,8,["message"])])]),o("div",I,[o("div",L,[v[12]||(v[12]=o("h3",{class:"text-sm font-bold uppercase tracking-wider text-gray-500"}," Department Access ",-1)),o("span",P,p(r(M).department_ids.length)+" Selected ",1)]),o("div",T,[(s(!0),a(u,null,m(R.departments,e=>(s(),a("label",{key:e.id,class:g(["flex cursor-pointer items-center justify-between rounded-xl border-2 p-4 transition-all duration-200",r(M).department_ids.includes(e.id)?"border-primary bg-primary/5 ring-1 ring-primary":"border-gray-100 bg-white hover:border-gray-200 hover:bg-gray-50"])},[o("div",G,[o("div",{class:g(["flex h-10 w-10 items-center justify-center rounded-lg text-lg font-bold transition-colors",r(M).department_ids.includes(e.id)?"bg-primary text-white":"bg-gray-100 text-gray-400"])},p(e.name.charAt(0)),3),o("span",N,p(e.name),1)]),t(A,{value:e.id,checked:r(M).department_ids,"onUpdate:checked":v[5]||(v[5]=e=>r(M).department_ids=e)},null,8,["value","checked"])],2))),128))]),t(U,{class:"mt-2",message:r(M).errors.department_ids},null,8,["message"])]),o("div",z,[t(j,{for:"default_department_id",value:"Default Department"}),n(o("select",{id:"default_department_id","onUpdate:modelValue":v[6]||(v[6]=e=>r(M).default_department_id=e),class:"mt-1 block w-full rounded border-gray-300 text-sm shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},[v[13]||(v[13]=o("option",{value:""},"Auto select",-1)),(s(!0),a(u,null,m(Q.value,e=>(s(),a("option",{key:e.id,value:e.id},p(e.name),9,F))),128))],512),[[c,r(M).default_department_id]]),t(U,{class:"mt-2",message:r(M).errors.default_department_id},null,8,["message"])]),o("div",O,[K("user-edit")?(s(),f(h,{key:0,disabled:r(M).processing},{default:d(()=>[...v[14]||(v[14]=[_(" Save Changes ",-1)])]),_:1},8,["disabled"])):y("",!0)])],32)])])]),_:1})],64))}};export{R as default};
