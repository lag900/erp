import{u as e,E as s,o as r,a as t,k as a,m as o,p as l,w as i,b as n,t as d,d as c,T as u,e as p,F as g,z as m,c as v,n as h,q as x,s as y,x as f,v as b,y as k,g as w,B as _,A as C}from"./vendor-DGI0tb4d.js";import{_ as j}from"./AuthenticatedLayout-Cfq4davl.js";import{_ as M}from"./TextInput-7Tb4wL4u.js";import{_ as A}from"./DangerButton-Bzsvvehx.js";import{_ as z}from"./InputLabel-ttg1gjZN.js";import{_ as V}from"./InputError-CSjO0CYp.js";import{G as S}from"./GlobalCheckbox-BSagvGQB.js";import"./utils-B98O4e5m.js";/* empty css                                                              */import"./_plugin-vue_export-helper-BCo6x5W8.js";import"./SecondaryButton-DsdD6xme.js";const B={class:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between"},U={class:"flex items-center gap-3"},L={class:"py-10"},F={class:"mx-auto max-w-7xl sm:px-6 lg:px-8"},P={class:"mb-10 flex flex-col gap-6 lg:flex-row lg:items-center lg:justify-between"},H={class:"relative max-w-xl w-full"},D={class:"flex gap-4 overflow-x-auto pb-2 lg:pb-0"},I={class:"flex flex-shrink-0 items-center gap-3 rounded-xl bg-white px-5 py-3 border border-gray-50 shadow-soft"},G={class:"text-xs font-semibold uppercase tracking-tight text-gray-500"},R={key:0,class:"flex flex-col items-center justify-center rounded-2xl border border-dashed border-gray-200 bg-white p-24 text-center"},T={key:0,class:"fixed bottom-8 left-1/2 z-[100] -translate-x-1/2 w-full max-w-2xl px-4"},q={class:"flex items-center justify-between rounded-2xl bg-[#1F2937] px-8 py-5 shadow-2xl ring-1 ring-white/10 backdrop-blur-xl"},E={class:"flex items-center gap-4"},N={class:"flex h-7 w-7 items-center justify-center rounded-lg bg-[#1FA6A0] text-[10px] font-bold text-white shadow-lg"},K={class:"flex items-center gap-2"},$={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"},O=["onDrop"],Q={class:"border-b border-gray-50 bg-gray-50/30 px-6 py-5 flex items-center justify-between"},W={class:"flex items-center gap-3"},J={class:"text-base font-semibold text-slate-800 tracking-tight"},X={class:"flex items-center gap-2"},Y={class:"rounded-xl bg-white px-3 py-1 text-[10px] font-black uppercase text-gray-400 border border-gray-100 shadow-sm leading-none"},Z={class:"p-5 flex-1 overflow-y-auto max-h-[450px] scrollbar-hide"},ee={class:"space-y-3"},se=["onDragstart"],re={class:"flex items-center gap-4"},te={class:"flex items-center gap-2 mb-1"},ae={class:"text-sm font-semibold text-slate-700 tracking-tight leading-none"},oe={key:0,class:"px-1.5 py-0.5 bg-slate-100 text-[8px] font-bold text-slate-400 rounded-lg"},le={class:"text-[10px] font-medium text-slate-400 tracking-wide leading-none"},ie={class:"flex items-center gap-1 opacity-0 group-hover/item:opacity-100 transition-all duration-300"},ne={class:"px-8 py-5 border-t border-gray-50 flex items-center justify-between"},de={class:"flex gap-1.5"},ce=["onClick"],ue=["onClick"],pe={class:"flex items-center gap-1.5"},ge={key:0,class:"text-[8px] font-black text-gray-300 uppercase"},me={key:1,class:"mt-16 bg-[#F8FAFC] rounded-2xl p-10 border border-dashed border-gray-200"},ve={class:"mb-10 flex items-center justify-between px-2"},he={class:"px-5 py-2 bg-white border border-gray-100 shadow-sm rounded-xl text-xs font-semibold text-gray-500 uppercase tracking-widest"},xe={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},ye=["onDragstart"],fe={class:"flex items-center gap-3"},be={class:"text-sm font-bold text-gray-700 tracking-tight"},ke={class:"p-10"},we={class:"mb-8 flex items-center justify-between border-b border-gray-50 pb-6"},_e={class:"flex items-center gap-4"},Ce={key:0,class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},je={key:1,class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Me={key:2,class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Ae={class:"text-xl font-bold text-slate-800 tracking-tight"},ze={class:"text-sm font-medium text-slate-500"},Ve={key:0,class:"space-y-4"},Se={class:"grid grid-cols-2 gap-3"},Be={class:"flex items-center gap-3"},Ue={class:"text-sm font-bold text-gray-700 uppercase tracking-tight"},Le={class:"px-2 py-0.5 bg-white border border-gray-100 rounded-lg text-[10px] font-black text-gray-400 uppercase tracking-tighter"},Fe={key:1,class:"space-y-4"},Pe=["value"],He={class:"flex items-center justify-end gap-3 pt-4 border-t border-gray-50"},De={class:"p-8"},Ie={class:"mb-8 flex items-center justify-between border-b border-gray-50 pb-4"},Ge={class:"text-2xl font-black text-gray-900 uppercase tracking-tight"},Re={class:"space-y-2"},Te={class:"space-y-2"},qe={class:"flex justify-end gap-3 pt-6"},Ee={class:"p-8"},Ne={class:"mb-8 flex items-center justify-between border-b border-gray-50 pb-4"},Ke={class:"space-y-2"},$e={class:"text-[10px] font-black uppercase text-gray-400 tracking-widest mt-1"},Oe={class:"text-primary"},Qe={class:"space-y-2"},We=["value"],Je={class:"space-y-2"},Xe={class:"flex items-center gap-3"},Ye={class:"space-y-4 border-t border-gray-50 pt-6"},Ze={class:"flex items-center justify-between"},es={class:"flex items-center gap-2"},ss={key:0,class:"space-y-4 rounded-2xl bg-gray-50/50 p-4 ring-1 ring-inset ring-gray-100"},rs={class:"grid grid-cols-2 gap-4"},ts={class:"flex justify-end gap-3 pt-6"},as={__name:"Index",props:{groups:Array,ungrouped:Array,roles:Array},setup(as){const os=as,ls=k(""),is=e({}),ns=C(),ds=w(()=>ns.props.auth?.permissions??[]),cs=e=>ds.value.includes(e),us=k([]),ps=k(!1),gs=k("assign"),ms=e({permission_ids:[],role_ids:[],permission_group_id:""}),vs=e=>{const s=us.value.indexOf(e);s>-1?us.value.splice(s,1):us.value.push(e)},hs=(e,s=null)=>{s&&(us.value=[s]),gs.value=e,ms.permission_ids=[...us.value],ms.role_ids=[],ms.permission_group_id="",ps.value=!0},xs=()=>{const e={assign:"permissions.bulk-assign",remove:"permissions.bulk-remove",move:"permissions.bulk-move"}[gs.value];ms.post(route(e),{onSuccess:()=>{ps.value=!1,us.value=[]}})},ys=k(null),fs=k(!1),bs=k(null),ks=e({name:"",description:"",icon:"shield-check"}),ws=k(!1),_s=e({name:"",permission_group_id:"",description:"",status:!0,is_sidebar_item:!1,sidebar_label:"",route_name:"",icon:"cube",sort_order:0}),Cs=(e=null)=>{bs.value=e,e?(ks.name=e.name,ks.description=e.description,ks.icon=e.icon):ks.reset(),fs.value=!0},js=(e=null)=>{_s.reset(),e&&(_s.permission_group_id=e),ws.value=!0},Ms=()=>{bs.value?ks.put(route("permission-groups.update",bs.value.id),{onSuccess:()=>{fs.value=!1,bs.value=null}}):ks.post(route("permission-groups.store"),{onSuccess:()=>{fs.value=!1}})},As=()=>{_s.post(route("permissions.store"),{onSuccess:()=>{ws.value=!1}})},zs=()=>{_s.name&&(_s.name=_s.name.toString().toLowerCase().replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-").replace(/^-+/,"").replace(/-+$/,""))},Vs=w(()=>{const e=ls.value.trim().toLowerCase();return os.groups.map(s=>{const r=s.permissions.filter(s=>s.name.toLowerCase().includes(e)||s.description&&s.description.toLowerCase().includes(e));return{...s,matchedPerms:r}}).filter(s=>s.matchedPerms.length>0||s.name.toLowerCase().includes(e))}),Ss=e=>{ys.value=e},Bs=e=>{e.preventDefault()},Us=e=>e.split("-").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ");return(e,k)=>{const w=s("AppButton");return r(),t(g,null,[a(o(l),{title:"System Permissions"}),a(j,null,{header:i(()=>[n("div",B,[k[32]||(k[32]=n("div",null,[n("h2",{class:"text-2xl font-semibold tracking-tight text-gray-900"}," Security Access Matrix "),n("p",{class:"mt-1 text-sm text-gray-500"}," Configure organizational functional boundaries and security modules. ")],-1)),n("div",U,[cs("permission-create")?(r(),v(w,{key:0,variant:"secondary",onClick:k[0]||(k[0]=e=>Cs())},{icon:i(()=>[...k[28]||(k[28]=[n("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1)])]),default:i(()=>[k[29]||(k[29]=p(" New Module ",-1))]),_:1})):c("",!0),cs("permission-create")?(r(),v(w,{key:1,variant:"primary",onClick:k[1]||(k[1]=e=>js())},{icon:i(()=>[...k[30]||(k[30]=[n("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})],-1)])]),default:i(()=>[k[31]||(k[31]=p(" New Permission ",-1))]),_:1})):c("",!0)])])]),default:i(()=>[n("div",L,[n("div",F,[n("div",P,[n("div",H,[k[33]||(k[33]=n("div",{class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-4 text-gray-400"},[n("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1)),a(M,{modelValue:ls.value,"onUpdate:modelValue":k[2]||(k[2]=e=>ls.value=e),type:"text",class:"block w-full border-gray-100 bg-white pl-12 h-[52px] rounded-2xl shadow-soft transition-all focus:ring-[#1FA6A0]/10",placeholder:"Search security keys, modules, or functional descriptions..."},null,8,["modelValue"])]),n("div",D,[n("div",I,[k[34]||(k[34]=n("div",{class:"h-3 w-3 rounded-full bg-[#1FA6A0] animate-pulse"},null,-1)),n("span",G,d(as.groups.length)+" Modules",1)])])]),0===Vs.value.length&&0===as.ungrouped.length?(r(),t("div",R,[...k[35]||(k[35]=[n("div",{class:"flex h-20 w-20 items-center justify-center rounded-3xl bg-gray-50 text-gray-300"},[n("svg",{class:"h-10 w-10",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})])],-1),n("h3",{class:"mt-6 text-xl font-semibold text-gray-900 uppercase"},"Matrix Reset",-1),n("p",{class:"mt-2 text-sm text-gray-500 max-w-xs mx-auto"},"The security definitions are currently empty or filtered out of scope.",-1)])])):c("",!0),a(u,{"enter-active-class":"transition ease-out duration-300 transform","enter-from-class":"translate-y-full opacity-0","enter-to-class":"translate-y-0 opacity-100","leave-active-class":"transition ease-in duration-200 transform","leave-from-class":"translate-y-0 opacity-100","leave-to-class":"translate-y-full opacity-0"},{default:i(()=>[us.value.length>0?(r(),t("div",T,[n("div",q,[n("div",E,[n("span",N,d(us.value.length),1),k[36]||(k[36]=n("span",{class:"text-xs font-semibold text-white tracking-wide"},"Gates selected for action",-1))]),n("div",K,[a(w,{variant:"ghost",size:"sm",class:"text-gray-400 hover:text-white",onClick:k[3]||(k[3]=e=>us.value=[])},{default:i(()=>[...k[37]||(k[37]=[p(" Clear ",-1)])]),_:1}),k[44]||(k[44]=n("div",{class:"h-4 w-px bg-white/10 mx-2"},null,-1)),a(w,{variant:"primary",size:"sm",onClick:k[4]||(k[4]=e=>hs("assign"))},{icon:i(()=>[...k[38]||(k[38]=[n("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"})],-1)])]),default:i(()=>[k[39]||(k[39]=p(" Map To Identity ",-1))]),_:1}),a(w,{variant:"danger",size:"sm",onClick:k[5]||(k[5]=e=>hs("remove"))},{icon:i(()=>[...k[40]||(k[40]=[n("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 7a4 4 0 11-8 0 4 4 0 018 0zM9 14a6 6 0 00-6 6v1h12v-1a6 6 0 00-6-6zM21 12h-6"})],-1)])]),default:i(()=>[k[41]||(k[41]=p(" Strip Authorization ",-1))]),_:1}),a(w,{variant:"secondary",size:"sm",onClick:k[6]||(k[6]=e=>hs("move"))},{icon:i(()=>[...k[42]||(k[42]=[n("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})],-1)])]),default:i(()=>[k[43]||(k[43]=p(" Relocate Gates ",-1))]),_:1})])])])):c("",!0)]),_:1}),n("div",$,[(r(!0),t(g,null,m(Vs.value,e=>{return r(),t("div",{key:e.id,class:"group relative flex flex-col overflow-hidden rounded-2xl border border-gray-100 bg-white shadow-soft transition-all duration-300 hover:shadow-premium hover:border-[#1FA6A0]/20",onDragover:Bs,onDrop:s=>(e=>{if(!ys.value||ys.value.permission_group_id===e.id)return;const s=ys.value.id,r=e.id;_.patch(route("permissions.move",s),{permission_group_id:r},{preserveScroll:!0,onSuccess:()=>{ys.value=null}})})(e)},[n("div",Q,[n("div",W,[a(S,{id:"group-"+e.id,checked:(s=e.matchedPerms,s.length>0&&s.every(e=>us.value.includes(e.id))),"onUpdate:checked":s=>(e=>{const s=e.map(e=>e.id);if(s.every(e=>us.value.includes(e)))us.value=us.value.filter(e=>!s.includes(e));else{const e=s.filter(e=>!us.value.includes(e));us.value=[...us.value,...e]}})(e.matchedPerms)},null,8,["id","checked","onUpdate:checked"]),k[45]||(k[45]=n("div",{class:"flex h-10 w-10 items-center justify-center rounded-2xl bg-white shadow-sm ring-1 ring-gray-100 text-primary"},[n("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})])],-1))]),n("div",null,[k[46]||(k[46]=n("h3",{class:"text-[10px] font-semibold uppercase tracking-widest text-slate-400 leading-none mb-1"},"Functional Module",-1)),n("h4",J,d(e.name),1)]),n("div",X,[cs("permission-create")?(r(),v(w,{key:0,variant:"secondary",size:"xs",onClick:s=>js(e.id),class:"!bg-white !px-2 shadow-sm border border-slate-50",title:"Add Gate to Module"},{icon:i(()=>[...k[47]||(k[47]=[n("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1)])]),_:1},8,["onClick"])):c("",!0),n("span",Y,d(e.permissions.length)+" Gates ",1)])]),n("div",Z,[n("ul",ee,[(r(!0),t(g,null,m(e.matchedPerms,e=>(r(),t("li",{key:e.id,draggable:"true",onDragstart:s=>Ss(e),class:h(["group/item relative flex items-center justify-between rounded-xl border border-transparent bg-[#fcfdfe] px-4 py-4 transition-all cursor-grab active:cursor-grabbing hover:bg-white hover:border-gray-100 hover:shadow-md",{"ring-2 ring-[#1FA6A0] bg-[#1FA6A0]/[0.02] border-[#1FA6A0]/10 shadow-lg":us.value.includes(e.id)}])},[n("div",re,[a(S,{id:"perm-"+e.id,checked:us.value.includes(e.id),"onUpdate:checked":s=>vs(e.id)},null,8,["id","checked","onUpdate:checked"]),k[48]||(k[48]=n("div",{class:"flex h-10 w-10 items-center justify-center rounded-xl bg-white text-gray-400 shadow-sm border border-gray-50 group-hover/item:text-[#1FA6A0] transition-all duration-300"},[n("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})])],-1)),n("div",null,[n("div",te,[n("p",ae,d(Us(e.name)),1),e.status?c("",!0):(r(),t("span",oe,"Inactive"))]),n("p",le,d(e.name),1)])]),n("div",ie,[a(w,{variant:"ghost",size:"xs",class:"!p-1.5 hover:!bg-[#1FA6A0]/10 hover:!text-[#1FA6A0]",onClick:s=>hs("assign",e.id),title:"Quick Map to Identity"},{icon:i(()=>[...k[49]||(k[49]=[n("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"})],-1)])]),_:1},8,["onClick"]),cs("permission-delete")&&"feature-toggle"!==e.name?(r(),v(w,{key:0,variant:"ghost",size:"xs",class:"!p-1.5 hover:!bg-rose-50 hover:!text-rose-500",onClick:s=>{return r=e.id,void(confirm("Permanently revoke this security gate?")&&is.delete(route("permissions.destroy",r)));var r}},{icon:i(()=>[...k[50]||(k[50]=[n("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])]),_:1},8,["onClick"])):c("",!0)])],42,se))),128))])]),n("div",ne,[n("div",de,[n("div",{onClick:s=>Cs(e),class:"p-2 cursor-pointer text-gray-300 hover:text-primary transition-colors bg-gray-50 rounded-xl hover:bg-white hover:shadow-sm ring-1 ring-inset ring-transparent hover:ring-gray-100"},[...k[51]||(k[51]=[n("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})],-1)])],8,ce),n("div",{onClick:s=>(e=>{confirm(`Purge "${e.name}" module? Permissions will be preserved but ungrouped.`)&&_.delete(route("permission-groups.destroy",e.id))})(e),class:"p-2 cursor-pointer text-gray-300 hover:text-rose-500 transition-colors bg-gray-50 rounded-xl hover:bg-white hover:shadow-sm ring-1 ring-inset ring-transparent hover:ring-gray-100"},[...k[52]||(k[52]=[n("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,ue)]),n("div",pe,[(r(!0),t(g,null,m(Math.min(e.permissions.length,5),e=>(r(),t("div",{key:e,class:"h-1.5 w-1.5 rounded-full bg-[#1FA6A0]/20"}))),128)),e.permissions.length>5?(r(),t("div",ge,"+"+d(e.permissions.length-5),1)):c("",!0)])])],40,O);var s}),128))]),as.ungrouped.length>0?(r(),t("div",me,[n("div",ve,[k[53]||(k[53]=n("div",null,[n("h3",{class:"text-xs font-semibold uppercase tracking-widest text-gray-400 mb-1"},"Legacy Repository"),n("p",{class:"text-sm font-medium text-gray-500"},"Uncategorized gates awaiting module mapping.")],-1)),n("span",he,d(as.ungrouped.length)+" Keys",1)]),n("div",xe,[(r(!0),t(g,null,m(as.ungrouped,e=>(r(),t("div",{key:e.id,draggable:"true",onDragstart:s=>Ss(e),class:"group/legacy flex items-center justify-between p-5 rounded-2xl bg-white border border-gray-100 shadow-soft cursor-grab active:cursor-grabbing hover:border-[#1FA6A0]/40 hover:shadow-premium transition-all duration-300"},[n("div",fe,[a(S,{id:"perm-un-"+e.id,checked:us.value.includes(e.id),"onUpdate:checked":s=>vs(e.id)},null,8,["id","checked","onUpdate:checked"]),n("span",be,d(Us(e.name)),1)]),k[54]||(k[54]=n("div",{class:"h-8 w-8 rounded-xl bg-gray-50 flex items-center justify-center text-gray-300 group-hover/legacy:bg-primary/10 group-hover/legacy:text-primary transition-all"},[n("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h8m-8 6h16"})])],-1))],40,ye))),128))])])):c("",!0)])]),a(A,{show:ps.value,onClose:k[10]||(k[10]=e=>ps.value=!1),"max-width":"lg"},{default:i(()=>[n("div",ke,[n("div",we,[n("div",_e,[n("div",{class:h(["flex h-12 w-12 items-center justify-center rounded-2xl","assign"===gs.value||"move"===gs.value?"bg-primary/10 text-primary":"bg-rose-50 text-rose-600"])},["assign"===gs.value?(r(),t("svg",Ce,[...k[55]||(k[55]=[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"},null,-1)])])):"remove"===gs.value?(r(),t("svg",je,[...k[56]||(k[56]=[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 7a4 4 0 11-8 0 4 4 0 018 0zM9 14a6 6 0 00-6 6v1h12v-1a6 6 0 00-6-6zM21 12h-6"},null,-1)])])):(r(),t("svg",Me,[...k[57]||(k[57]=[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"},null,-1)])]))],2),n("div",null,[n("h3",Ae,d("assign"===gs.value?"Map Authorizations":"move"===gs.value?"Relocate Gates":"Strip Authorizations"),1),n("p",ze,"Targeting "+d(us.value.length)+" selected security gates.",1)])])]),n("form",{onSubmit:x(xs,["prevent"]),class:"space-y-8"},[["assign","remove"].includes(gs.value)?(r(),t("div",Ve,[a(z,{value:"Select Target Identities (Roles)",class:"text-xs font-black uppercase tracking-widest text-primary"}),n("div",Se,[(r(!0),t(g,null,m(as.roles,e=>(r(),t("label",{key:e.id,class:h(["flex cursor-pointer items-center justify-between gap-3 rounded-[1.25rem] border border-gray-100 bg-gray-50/50 p-4 transition-all hover:border-primary/30",{"ring-2 ring-primary bg-primary/[0.02] border-primary/20":o(ms).role_ids.includes(e.id)}])},[n("div",Be,[a(S,{id:"bulk-role-"+e.id,checked:o(ms).role_ids,"onUpdate:checked":k[7]||(k[7]=e=>o(ms).role_ids=e),value:e.id},null,8,["id","checked","value"]),n("span",Ue,d(e.name),1)]),n("span",Le,d(e.permissions_count)+" Gates ",1)],2))),128))]),a(V,{message:o(ms).errors.role_ids},null,8,["message"])])):c("",!0),"move"===gs.value?(r(),t("div",Fe,[a(z,{for:"bulk_target_group",value:"Target Security Module",class:"text-xs font-black uppercase tracking-widest text-primary"}),y(n("select",{id:"bulk_target_group","onUpdate:modelValue":k[8]||(k[8]=e=>o(ms).permission_group_id=e),class:"block w-full border-gray-100 bg-gray-50 px-4 py-4 rounded-3xl text-sm font-bold transition-all focus:border-primary focus:bg-white focus:ring-primary",required:""},[k[58]||(k[58]=n("option",{value:"",disabled:""},"Select Target Module...",-1)),(r(!0),t(g,null,m(as.groups,e=>(r(),t("option",{key:e.id,value:e.id},d(e.name),9,Pe))),128))],512),[[f,o(ms).permission_group_id]]),a(V,{message:o(ms).errors.permission_group_id},null,8,["message"])])):c("",!0),n("div",He,[a(w,{variant:"secondary",type:"button",onClick:k[9]||(k[9]=e=>ps.value=!1)},{default:i(()=>[...k[59]||(k[59]=[p(" Cancel ",-1)])]),_:1}),a(w,{variant:"assign"===gs.value||"move"===gs.value?"primary":"danger",type:"submit",processing:o(ms).processing,class:"min-w-[140px]"},{default:i(()=>[p(d("assign"===gs.value?"Confirm Logic":"move"===gs.value?"Relocate Gates":"Revoke Access"),1)]),_:1},8,["variant","processing"])])],32)])]),_:1},8,["show"]),a(A,{show:fs.value,onClose:k[15]||(k[15]=e=>fs.value=!1),"max-width":"lg"},{default:i(()=>[n("div",De,[n("div",Ie,[n("div",null,[n("h3",Ge,d(bs.value?"Refine Module":"Initialize Module"),1),k[60]||(k[60]=n("p",{class:"mt-1 text-sm text-gray-500"},"Define a logical container for related security keys.",-1))]),a(w,{variant:"ghost",size:"xs",pill:"",onClick:k[11]||(k[11]=e=>fs.value=!1),class:"!px-1.5 h-8 w-8 hover:!bg-slate-100"},{icon:i(()=>[...k[61]||(k[61]=[n("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])]),_:1})]),n("form",{onSubmit:x(Ms,["prevent"]),class:"space-y-6"},[n("div",Re,[a(z,{for:"group_name",value:"Module Title"}),a(M,{id:"group_name",modelValue:o(ks).name,"onUpdate:modelValue":k[12]||(k[12]=e=>o(ks).name=e),type:"text",class:"block w-full",placeholder:"e.g. Asset Intelligence",required:""},null,8,["modelValue"]),a(V,{message:o(ks).errors.name},null,8,["message"])]),n("div",Te,[a(z,{for:"group_desc",value:"Purpose / Description"}),y(n("textarea",{id:"group_desc","onUpdate:modelValue":k[13]||(k[13]=e=>o(ks).description=e),class:"block w-full rounded-2xl border-gray-100 bg-gray-50 px-4 py-3 text-sm transition-all focus:border-primary focus:bg-white focus:ring-primary h-32",placeholder:"Briefly describe what this module controls..."},null,512),[[b,o(ks).description]]),a(V,{message:o(ks).errors.description},null,8,["message"])]),n("div",qe,[a(w,{variant:"secondary",type:"button",onClick:k[14]||(k[14]=e=>fs.value=!1)},{default:i(()=>[...k[62]||(k[62]=[p(" Cancel ",-1)])]),_:1}),a(w,{variant:"primary",type:"submit",processing:o(ks).processing},{default:i(()=>[p(d(bs.value?"Synchronize":"Initialize"),1)]),_:1},8,["processing"])])],32)])]),_:1},8,["show"]),a(A,{show:ws.value,onClose:k[27]||(k[27]=e=>ws.value=!1),"max-width":"lg"},{default:i(()=>[n("div",Ee,[n("div",Ne,[k[64]||(k[64]=n("div",null,[n("h3",{class:"text-2xl font-black text-gray-900 uppercase tracking-tight"}," Define Security Gate "),n("p",{class:"mt-1 text-sm text-gray-500"},"Establish a new logical access key for the ERP matrix.")],-1)),n("button",{onClick:k[16]||(k[16]=e=>ws.value=!1),class:"rounded-full bg-gray-50 p-2 text-gray-400 hover:text-gray-600 transition-colors"},[...k[63]||(k[63]=[n("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),n("form",{onSubmit:x(As,["prevent"]),class:"space-y-6"},[n("div",Ke,[a(z,{for:"perm_name_input",value:"Security Gate Label"}),a(M,{id:"perm_name_input",modelValue:o(_s).name,"onUpdate:modelValue":k[17]||(k[17]=e=>o(_s).name=e),onInput:zs,type:"text",class:"block w-full",placeholder:"e.g. Bulk Asset Upload",required:"",autofocus:""},null,8,["modelValue"]),n("p",$e,[k[65]||(k[65]=p("Key: ",-1)),n("span",Oe,d(o(_s).name||"..."),1)]),a(V,{message:o(_s).errors.name},null,8,["message"])]),n("div",Qe,[a(z,{for:"perm_group",value:"Module Assignment"}),y(n("select",{id:"perm_group","onUpdate:modelValue":k[18]||(k[18]=e=>o(_s).permission_group_id=e),class:"block w-full border-gray-100 bg-gray-50 px-4 py-3 rounded-2xl text-sm transition-all focus:border-primary focus:bg-white focus:ring-primary",required:""},[k[66]||(k[66]=n("option",{value:"",disabled:""},"Select Module...",-1)),(r(!0),t(g,null,m(as.groups,e=>(r(),t("option",{key:e.id,value:e.id},d(e.name),9,We))),128))],512),[[f,o(_s).permission_group_id]]),a(V,{message:o(_s).errors.permission_group_id},null,8,["message"])]),n("div",Je,[a(z,{for:"perm_desc",value:"Documentation / Scope"}),y(n("textarea",{id:"perm_desc","onUpdate:modelValue":k[19]||(k[19]=e=>o(_s).description=e),class:"block w-full rounded-2xl border-gray-100 bg-gray-50 px-4 py-3 text-sm transition-all focus:border-primary focus:bg-white focus:ring-primary h-24",placeholder:"What actions does this gate permit?"},null,512),[[b,o(_s).description]]),a(V,{message:o(_s).errors.description},null,8,["message"])]),n("div",Xe,[a(S,{id:"perm_status",checked:o(_s).status,"onUpdate:checked":k[20]||(k[20]=e=>o(_s).status=e)},null,8,["checked"]),k[67]||(k[67]=n("label",{for:"perm_status",class:"text-sm font-bold text-gray-700"},"Active Status",-1))]),n("div",Ye,[n("div",Ze,[k[68]||(k[68]=n("div",null,[n("h4",{class:"text-sm font-bold text-gray-800"},"Sidebar Presentation"),n("p",{class:"text-[10px] text-gray-400 font-medium"},"Configure how this gate appears in the main navigation.")],-1)),n("div",es,[a(S,{id:"is_sidebar_item",checked:o(_s).is_sidebar_item,"onUpdate:checked":k[21]||(k[21]=e=>o(_s).is_sidebar_item=e)},null,8,["checked"])])]),a(u,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0 -translate-y-2","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition ease-in duration-150","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 -translate-y-2"},{default:i(()=>[o(_s).is_sidebar_item?(r(),t("div",ss,[n("div",null,[a(z,{for:"sidebar_label",value:"Navigation Label"}),a(M,{id:"sidebar_label",modelValue:o(_s).sidebar_label,"onUpdate:modelValue":k[22]||(k[22]=e=>o(_s).sidebar_label=e),type:"text",class:"block w-full text-xs mt-1",placeholder:"e.g. Asset Registry"},null,8,["modelValue"]),a(V,{message:o(_s).errors.sidebar_label},null,8,["message"])]),n("div",rs,[n("div",null,[a(z,{for:"route_name",value:"Target Route"}),a(M,{id:"route_name",modelValue:o(_s).route_name,"onUpdate:modelValue":k[23]||(k[23]=e=>o(_s).route_name=e),type:"text",class:"block w-full text-xs mt-1",placeholder:"e.g. assets.index"},null,8,["modelValue"]),a(V,{message:o(_s).errors.route_name},null,8,["message"])]),n("div",null,[a(z,{for:"perm_icon",value:"Visual Icon Key"}),y(n("select",{id:"perm_icon","onUpdate:modelValue":k[24]||(k[24]=e=>o(_s).icon=e),class:"block w-full border-gray-100 bg-white px-3 py-2 rounded-xl text-xs transition-all focus:border-primary focus:ring-primary mt-1"},[...k[69]||(k[69]=[n("option",{value:"cube"},"Cube (Assets)",-1),n("option",{value:"map-pin"},"Map Pin (Locations)",-1),n("option",{value:"office-building"},"Building",-1),n("option",{value:"users"},"Users",-1),n("option",{value:"shield-check"},"Shield",-1),n("option",{value:"lock-closed"},"Lock",-1),n("option",{value:"newspaper"},"News",-1),n("option",{value:"cog"},"Cog",-1),n("option",{value:"collection"},"Collection",-1),n("option",{value:"adjustments"},"Adjustments",-1)])],512),[[f,o(_s).icon]]),a(V,{message:o(_s).errors.icon},null,8,["message"])])]),n("div",null,[a(z,{for:"sort_order",value:"Sort Priority"}),y(n("input",{id:"sort_order",type:"number","onUpdate:modelValue":k[25]||(k[25]=e=>o(_s).sort_order=e),class:"block w-full border-gray-100 bg-white px-3 py-2 rounded-xl text-xs transition-all focus:border-primary focus:ring-primary mt-1"},null,512),[[b,o(_s).sort_order]]),a(V,{message:o(_s).errors.sort_order},null,8,["message"])])])):c("",!0)]),_:1})]),n("div",ts,[a(w,{variant:"secondary",type:"button",onClick:k[26]||(k[26]=e=>ws.value=!1)},{default:i(()=>[...k[70]||(k[70]=[p(" Cancel ",-1)])]),_:1}),a(w,{variant:"primary",type:"submit",processing:o(_s).processing},{default:i(()=>[...k[71]||(k[71]=[p(" Establish Gate ",-1)])]),_:1},8,["processing"])])],32)])]),_:1},8,["show"])]),_:1})],64)}}};export{as as default};
