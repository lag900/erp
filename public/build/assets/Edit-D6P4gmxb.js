import{u as $,o,c as i,a as l,b as t,h as C,w as p,d as r,e as N,f as w,F as c,m as v,t as f,g as x,n as k,j as h,i as y,k as V,l as A,p as U,q as E}from"./app-BX5kK8gL.js";import{_ as q}from"./AuthenticatedLayout-WTG0r7J_.js";import{P}from"./PrimaryButton-C8C6_QA7.js";import{_ as b}from"./TextInput-D8M23_PG.js";import{_ as g}from"./InputLabel-BWg1fGz9.js";import{_ as u}from"./InputError-C8hi-McE.js";import{D as F}from"./DangerButton-Doqh3QbT.js";import{G}from"./GlobalCheckbox-Bkg5O3-I.js";/* empty css                                                              */import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./SecondaryButton-CW323Hov.js";const L={class:"flex flex-wrap items-center justify-between gap-3"},M={class:"flex flex-wrap gap-2"},T={class:"py-6"},z={class:"mx-auto max-w-4xl sm:px-6 lg:px-8"},O={class:"grid gap-6 sm:grid-cols-2"},R=["value"],H={class:"mt-8"},I={class:"flex items-center justify-between"},J={class:"text-xs font-medium text-gray-400"},K={class:"mt-4 grid gap-4 sm:grid-cols-2"},Q={class:"flex items-center space-x-3"},W={class:"font-semibold text-gray-700"},X={class:"mt-6"},Y=["value"],Z={class:"mt-8 flex justify-end"},me={__name:"Edit",props:{user:{type:Object,required:!0},roles:{type:Array,required:!0},departments:{type:Array,required:!0}},setup(m){const n=m,D=E(),j=U(()=>D.props.auth?.permissions??[]),_=d=>j.value.includes(d),a=$({name:n.user.name,email:n.user.email,password:"",role_id:n.user.role_id||"",department_ids:n.user.department_ids||[],default_department_id:n.user.default_department_id||""}),B=U(()=>n.departments.filter(d=>a.department_ids.includes(d.id)));return(d,e)=>(o(),i(c,null,[l(t(C),{title:"Edit User"}),l(q,null,{header:p(()=>[r("div",L,[e[10]||(e[10]=r("h2",{class:"text-xl font-semibold leading-tight text-gray-800"}," Edit User ",-1)),r("div",M,[l(t(A),{href:d.route("users.index"),class:"rounded border border-gray-300 px-3 py-2 text-sm text-gray-700 hover:bg-gray-50"},{default:p(()=>[...e[8]||(e[8]=[y(" Back to Users ",-1)])]),_:1},8,["href"]),_("user-delete")?(o(),h(F,{key:0,type:"button",onClick:e[0]||(e[0]=s=>d.$inertia.delete(d.route("users.destroy",m.user.id)))},{default:p(()=>[...e[9]||(e[9]=[y(" Delete User ",-1)])]),_:1})):V("",!0)])])]),default:p(()=>[r("div",T,[r("div",z,[r("form",{class:"rounded bg-white p-6 shadow",onSubmit:e[7]||(e[7]=N(s=>t(a).put(d.route("users.update",m.user.id),{onSuccess:()=>d.window.showToast("success","User updated successfully")}),["prevent"]))},[r("div",O,[r("div",null,[l(g,{for:"name",value:"Name"}),l(b,{id:"name",modelValue:t(a).name,"onUpdate:modelValue":e[1]||(e[1]=s=>t(a).name=s),class:"mt-1 block w-full"},null,8,["modelValue"]),l(u,{class:"mt-2",message:t(a).errors.name},null,8,["message"])]),r("div",null,[l(g,{for:"email",value:"Email"}),l(b,{id:"email",modelValue:t(a).email,"onUpdate:modelValue":e[2]||(e[2]=s=>t(a).email=s),type:"email",class:"mt-1 block w-full"},null,8,["modelValue"]),l(u,{class:"mt-2",message:t(a).errors.email},null,8,["message"])]),r("div",null,[l(g,{for:"password",value:"New Password"}),l(b,{id:"password",modelValue:t(a).password,"onUpdate:modelValue":e[3]||(e[3]=s=>t(a).password=s),type:"password",class:"mt-1 block w-full",placeholder:"Leave blank to keep"},null,8,["modelValue"]),l(u,{class:"mt-2",message:t(a).errors.password},null,8,["message"])]),r("div",null,[l(g,{for:"role_id",value:"Role"}),w(r("select",{id:"role_id","onUpdate:modelValue":e[4]||(e[4]=s=>t(a).role_id=s),class:"mt-1 block w-full rounded border-gray-300 text-sm shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},[e[11]||(e[11]=r("option",{value:"",disabled:""},"Select role",-1)),(o(!0),i(c,null,v(m.roles,s=>(o(),i("option",{key:s.id,value:s.id},f(s.name),9,R))),128))],512),[[x,t(a).role_id]]),l(u,{class:"mt-2",message:t(a).errors.role_id},null,8,["message"])])]),r("div",H,[r("div",I,[e[12]||(e[12]=r("h3",{class:"text-sm font-bold uppercase tracking-wider text-gray-500"}," Department Access ",-1)),r("span",J,f(t(a).department_ids.length)+" Selected ",1)]),r("div",K,[(o(!0),i(c,null,v(m.departments,s=>(o(),i("label",{key:s.id,class:k(["flex cursor-pointer items-center justify-between rounded-xl border-2 p-4 transition-all duration-200",t(a).department_ids.includes(s.id)?"border-primary bg-primary/5 ring-1 ring-primary":"border-gray-100 bg-white hover:border-gray-200 hover:bg-gray-50"])},[r("div",Q,[r("div",{class:k(["flex h-10 w-10 items-center justify-center rounded-lg text-lg font-bold transition-colors",t(a).department_ids.includes(s.id)?"bg-primary text-white":"bg-gray-100 text-gray-400"])},f(s.name.charAt(0)),3),r("span",W,f(s.name),1)]),l(G,{value:s.id,checked:t(a).department_ids,"onUpdate:checked":e[5]||(e[5]=S=>t(a).department_ids=S)},null,8,["value","checked"])],2))),128))]),l(u,{class:"mt-2",message:t(a).errors.department_ids},null,8,["message"])]),r("div",X,[l(g,{for:"default_department_id",value:"Default Department"}),w(r("select",{id:"default_department_id","onUpdate:modelValue":e[6]||(e[6]=s=>t(a).default_department_id=s),class:"mt-1 block w-full rounded border-gray-300 text-sm shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},[e[13]||(e[13]=r("option",{value:""},"Auto select",-1)),(o(!0),i(c,null,v(B.value,s=>(o(),i("option",{key:s.id,value:s.id},f(s.name),9,Y))),128))],512),[[x,t(a).default_department_id]]),l(u,{class:"mt-2",message:t(a).errors.default_department_id},null,8,["message"])]),r("div",Z,[_("user-edit")?(o(),h(P,{key:0,disabled:t(a).processing},{default:p(()=>[...e[14]||(e[14]=[y(" Save Changes ",-1)])]),_:1},8,["disabled"])):V("",!0)])],32)])])]),_:1})],64))}};export{me as default};
