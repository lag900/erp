import{u as S,o,c as i,a as l,b as t,h as j,w as p,d as a,e as B,f as v,F as c,m as g,t as m,g as b,n as y,j as N,i as x,k as C,l as $,p as w,q as P}from"./app-CehYguHu.js";import{_ as q}from"./AuthenticatedLayout-CfY1nA_Q.js";import{P as F}from"./PrimaryButton-BWR49dfZ.js";import{_}from"./TextInput-CVQfVas4.js";import{_ as u}from"./InputLabel-BdAlJ2D5.js";import{_ as n}from"./InputError-51rjNbxD.js";import{G as E}from"./GlobalCheckbox-CqgO5sP7.js";/* empty css                                                              */import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./DangerButton-DmNu9a4c.js";import"./SecondaryButton-C9gXAhlZ.js";const G={class:"flex flex-wrap items-center justify-between gap-3"},M={class:"py-6"},T={class:"mx-auto max-w-4xl sm:px-6 lg:px-8"},z={class:"grid gap-6 sm:grid-cols-2"},L=["value"],R={class:"mt-8"},H={class:"flex items-center justify-between"},I={class:"text-xs font-medium text-gray-400"},J={class:"mt-4 grid gap-4 sm:grid-cols-2"},K={class:"flex items-center space-x-3"},O={class:"font-semibold text-gray-700"},Q={class:"mt-6"},W=["value"],X={class:"mt-8 flex justify-end"},ne={__name:"Create",props:{roles:{type:Array,required:!0},departments:{type:Array,required:!0}},setup(f){const h=f,k=P(),V=w(()=>k.props.auth?.permissions??[]),U=d=>V.value.includes(d),r=S({name:"",email:"",password:"",role_id:"",department_ids:[],default_department_id:""}),A=w(()=>h.departments.filter(d=>r.department_ids.includes(d.id)));return(d,e)=>(o(),i(c,null,[l(t(j),{title:"Add User"}),l(q,null,{header:p(()=>[a("div",G,[e[8]||(e[8]=a("h2",{class:"text-xl font-semibold leading-tight text-gray-800"}," Add User ",-1)),l(t($),{href:d.route("users.index"),class:"rounded border border-gray-300 px-3 py-2 text-sm text-gray-700 hover:bg-gray-50"},{default:p(()=>[...e[7]||(e[7]=[x(" Back to Users ",-1)])]),_:1},8,["href"])])]),default:p(()=>[a("div",M,[a("div",T,[a("form",{class:"rounded bg-white p-6 shadow",onSubmit:e[6]||(e[6]=B(s=>t(r).post(d.route("users.store"),{onSuccess:()=>d.window.showToast("success","User created successfully")}),["prevent"]))},[a("div",z,[a("div",null,[l(u,{for:"name",value:"Name"}),l(_,{id:"name",modelValue:t(r).name,"onUpdate:modelValue":e[0]||(e[0]=s=>t(r).name=s),class:"mt-1 block w-full",placeholder:"User Name"},null,8,["modelValue"]),l(n,{class:"mt-2",message:t(r).errors.name},null,8,["message"])]),a("div",null,[l(u,{for:"email",value:"Email"}),l(_,{id:"email",modelValue:t(r).email,"onUpdate:modelValue":e[1]||(e[1]=s=>t(r).email=s),type:"email",class:"mt-1 block w-full",placeholder:"user@example.com"},null,8,["modelValue"]),l(n,{class:"mt-2",message:t(r).errors.email},null,8,["message"])]),a("div",null,[l(u,{for:"password",value:"Password"}),l(_,{id:"password",modelValue:t(r).password,"onUpdate:modelValue":e[2]||(e[2]=s=>t(r).password=s),type:"password",class:"mt-1 block w-full",placeholder:"******"},null,8,["modelValue"]),l(n,{class:"mt-2",message:t(r).errors.password},null,8,["message"])]),a("div",null,[l(u,{for:"role_id",value:"Role"}),v(a("select",{id:"role_id","onUpdate:modelValue":e[3]||(e[3]=s=>t(r).role_id=s),class:"mt-1 block w-full rounded border-gray-300 text-sm shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},[e[9]||(e[9]=a("option",{value:"",disabled:""},"Select role",-1)),(o(!0),i(c,null,g(f.roles,s=>(o(),i("option",{key:s.id,value:s.id},m(s.name),9,L))),128))],512),[[b,t(r).role_id]]),l(n,{class:"mt-2",message:t(r).errors.role_id},null,8,["message"])])]),a("div",R,[a("div",H,[e[10]||(e[10]=a("h3",{class:"text-sm font-bold uppercase tracking-wider text-gray-500"}," Department Access ",-1)),a("span",I,m(t(r).department_ids.length)+" Selected ",1)]),a("div",J,[(o(!0),i(c,null,g(f.departments,s=>(o(),i("label",{key:s.id,class:y(["flex cursor-pointer items-center justify-between rounded-xl border-2 p-4 transition-all duration-200",t(r).department_ids.includes(s.id)?"border-primary bg-primary/5 ring-1 ring-primary":"border-gray-100 bg-white hover:border-gray-200 hover:bg-gray-50"])},[a("div",K,[a("div",{class:y(["flex h-10 w-10 items-center justify-center rounded-lg text-lg font-bold transition-colors",t(r).department_ids.includes(s.id)?"bg-primary text-white":"bg-gray-100 text-gray-400"])},m(s.name.charAt(0)),3),a("span",O,m(s.name),1)]),l(E,{value:s.id,checked:t(r).department_ids,"onUpdate:checked":e[4]||(e[4]=D=>t(r).department_ids=D)},null,8,["value","checked"])],2))),128))]),l(n,{class:"mt-2",message:t(r).errors.department_ids},null,8,["message"])]),a("div",Q,[l(u,{for:"default_department_id",value:"Default Department"}),v(a("select",{id:"default_department_id","onUpdate:modelValue":e[5]||(e[5]=s=>t(r).default_department_id=s),class:"mt-1 block w-full rounded border-gray-300 text-sm shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},[e[11]||(e[11]=a("option",{value:""},"Auto select",-1)),(o(!0),i(c,null,g(A.value,s=>(o(),i("option",{key:s.id,value:s.id},m(s.name),9,W))),128))],512),[[b,t(r).default_department_id]]),l(n,{class:"mt-2",message:t(r).errors.default_department_id},null,8,["message"])]),a("div",X,[U("user-create")?(o(),N(F,{key:0,disabled:t(r).processing},{default:p(()=>[...e[12]||(e[12]=[x(" Save User ",-1)])]),_:1},8,["disabled"])):C("",!0)])],32)])])]),_:1})],64))}};export{ne as default};
