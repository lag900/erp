import{y as A,z,B as D,D as V,o as i,c as u,t as p,k as m,d as l,n as g,a as L,w as N,f as O,e as F,v as j,F as q,m as R,T,r as b,p as x}from"./app-CehYguHu.js";import{_ as $}from"./_plugin-vue_export-helper-DlAUqK2U.js";const I=["for"],U={class:"relative"},K=["id","disabled"],P={key:0,class:"absolute z-[150] mt-2 w-full bg-white rounded-[12px] border border-[#E5E7EB] shadow-[0_10px_40px_-10px_rgba(0,0,0,0.1)] overflow-hidden"},Q={class:"p-2 bg-gray-50/50 border-b border-gray-100"},G={class:"relative"},H=["placeholder"],J={class:"max-h-[280px] overflow-y-auto custom-scrollbar"},W={key:0,class:"px-5 py-8 text-center"},X={class:"text-[13px] text-gray-400 font-medium"},Y={role:"listbox",class:"p-1"},Z=["onClick","aria-selected"],ee={class:"text-[14px] font-semibold truncate leading-none"},te={key:0,class:"h-4 w-4 text-[#1FA6A0]",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},le={__name:"SearchableSelect",props:{modelValue:{type:[String,Number],default:null},options:{type:Array,required:!0},placeholder:{type:String,default:"Select an option..."},label:{type:String,default:""},searchPlaceholder:{type:String,default:"Search..."},disabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(n,{expose:_,emit:C}){const a=n,y=C,s=b(!1),o=b(""),d=b(null),c=b(null),f=x(()=>Array.isArray(a.options)?a.options.map(e=>e?{id:e.id??e.value??null,label:String(e.label??e.name??e.text??"")}:null).filter(e=>e!==null&&e.id!==null):[]),v=x(()=>{const e=f.value;if(e.length===0)return[];if(!o.value||!o.value.trim())return e;const t=o.value.toLowerCase().trim();return e.filter(r=>r.label.toLowerCase().includes(t))}),h=x(()=>{const e=f.value;return e.length===0||a.modelValue===null||a.modelValue===void 0||a.modelValue===""?null:e.find(t=>String(t.id)===String(a.modelValue))||null}),w=e=>{!e||e.id===null||e.id===void 0||(y("update:modelValue",e.id),s.value=!1,o.value="")},E=()=>{a.disabled||(s.value=!s.value,s.value&&(o.value="",V(()=>{c.value&&c.value.focus()})))},k=e=>{d.value&&!d.value.contains(e.target)&&(s.value=!1,o.value="")},S=e=>{s.value&&(e.key==="Escape"?(s.value=!1,o.value="",e.preventDefault()):e.key==="Enter"&&v.value.length===1?(w(v.value[0]),e.preventDefault()):(e.key==="ArrowDown"||e.key==="ArrowUp")&&e.preventDefault())};return A(()=>a.modelValue,e=>{e||(o.value="")}),A(()=>a.options,(e,t)=>{if(a.label==="Subcategory"&&console.log("Subcategory options changed:",{old:t?.length||0,new:e?.length||0,normalized:f.value.length}),a.modelValue!==null&&a.modelValue!==void 0&&a.modelValue!==""){const r=f.value;!r.some(M=>String(M.id)===String(a.modelValue))&&r.length>0&&y("update:modelValue",null)}o.value&&v.value.length===0&&f.value.length>0&&(o.value="")},{deep:!0,immediate:!0}),z(()=>{document.addEventListener("click",k),document.addEventListener("keydown",S)}),D(()=>{document.removeEventListener("click",k),document.removeEventListener("keydown",S)}),_({focus:()=>{d.value?.querySelector("button")&&d.value.querySelector("button").focus()},open:()=>{a.disabled||(s.value=!0,V(()=>{c.value&&c.value.focus()}))}}),(e,t)=>(i(),u("div",{class:"relative",ref_key:"dropdownRef",ref:d},[n.label?(i(),u("label",{key:0,for:`ss-${n.label}`,class:"form-group-label"},p(n.label),9,I)):m("",!0),l("div",U,[l("button",{id:`ss-${n.label}`,type:"button",disabled:n.disabled,onClick:E,class:g(["flex items-center justify-between w-full h-[44px] px-4 bg-[#F8FAFC] border border-[#E5E7EB] rounded-[10px] text-[15px] font-medium text-gray-700 transition-all hover:border-[#1FA6A0] focus:border-[#1FA6A0] focus:bg-white focus:shadow-[0_0_0_4px_rgba(31,166,160,0.1)] disabled:opacity-50 disabled:cursor-not-allowed text-left group",{"border-[#1FA6A0] bg-white ring-4 ring-[#1FA6A0]/10":s.value}])},[l("span",{class:g(["truncate",{"text-gray-400":!h.value}])},p(h.value?h.value.label:n.placeholder),3),(i(),u("svg",{class:g(["h-5 w-5 text-gray-400 group-hover:text-[#1FA6A0] transition-transform flex-shrink-0 ml-2",{"rotate-180 text-[#1FA6A0]":s.value}]),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[...t[3]||(t[3]=[l("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)])],2))],10,K),L(T,{"enter-active-class":"transition ease-out duration-150","enter-from-class":"transform opacity-0 -translate-y-2","enter-to-class":"transform opacity-100 translate-y-0","leave-active-class":"transition ease-in duration-100","leave-from-class":"transform opacity-100 translate-y-0","leave-to-class":"transform opacity-0 -translate-y-2"},{default:N(()=>[s.value?(i(),u("div",P,[l("div",Q,[l("div",G,[O(l("input",{ref_key:"searchInputRef",ref:c,"onUpdate:modelValue":t[0]||(t[0]=r=>o.value=r),type:"text",class:"w-full h-[38px] !bg-white !rounded-[8px] !text-[13px] !pl-9 !border-gray-200",placeholder:n.searchPlaceholder,onClick:t[1]||(t[1]=F(()=>{},["stop"])),onKeydown:t[2]||(t[2]=F(()=>{},["stop"]))},null,40,H),[[j,o.value]]),t[4]||(t[4]=l("div",{class:"absolute inset-y-0 left-3 flex items-center pointer-events-none"},[l("svg",{class:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2.5",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1))])]),l("div",J,[v.value.length===0?(i(),u("div",W,[t[5]||(t[5]=l("svg",{class:"mx-auto h-8 w-8 text-gray-200 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.172 9.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),l("p",X,p(o.value?"No matches found":"No options available"),1)])):m("",!0),l("ul",Y,[(i(!0),u(q,null,R(v.value,r=>(i(),u("li",{key:`opt-${r.id}`,onClick:B=>w(r),role:"option","aria-selected":String(r.id)===String(n.modelValue),class:g(["flex items-center justify-between px-4 py-2.5 rounded-[8px] cursor-pointer transition-all hover:bg-[#F8FAFC]",{"bg-[#E6F4F3]/50 text-[#1FA6A0]":String(r.id)===String(n.modelValue)}])},[l("span",ee,p(r.label),1),String(r.id)===String(n.modelValue)?(i(),u("svg",te,[...t[6]||(t[6]=[l("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"},null,-1)])])):m("",!0)],10,Z))),128))])])])):m("",!0)]),_:1})])],512))}},re=$(le,[["__scopeId","data-v-c8e325be"]]);export{re as S};
