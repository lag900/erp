import{r as B,y as D,o as a,c as l,a as g,b as y,h as R,w as f,d as t,f as c,v as w,F as x,m,t as o,g as _,k as j,L as T,l as F,i as h,s as H,p as M,q as O}from"./app-BX5kK8gL.js";import{_ as z}from"./AuthenticatedLayout-WTG0r7J_.js";/* empty css                                                              */import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./DangerButton-Doqh3QbT.js";import"./SecondaryButton-CW323Hov.js";const E={class:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between px-1 no-print"},L={class:"flex items-center gap-5"},P={class:"text-2xl font-bold tracking-tight text-slate-800 leading-tight"},U={class:"mt-1 text-[11px] font-black text-slate-400 uppercase tracking-[0.2em]"},N={class:"flex items-center gap-3"},$={class:"py-12 bg-gray-100/50 min-h-screen"},G={class:"mx-auto max-w-[1000px] sm:px-6 lg:px-8"},q={class:"bg-white p-8 rounded-[32px] shadow-soft border border-emerald-100/30 mb-10 no-print"},I={class:"grid grid-cols-1 md:grid-cols-4 gap-8"},J={class:"space-y-2"},K={class:"space-y-2"},Q={class:"space-y-2"},W=["value"],X={class:"space-y-2"},Y={class:"bg-white shadow-xl ring-1 ring-gray-900/5 print:shadow-none print:ring-0 overflow-hidden print-container",dir:"rtl"},Z={class:"p-16 sm:p-20"},tt={class:"flex items-start justify-between border-b-4 border-black pb-10 mb-12"},et={class:"w-32 h-32 flex-shrink-0"},st=["src"],rt={key:1,class:"h-full w-full bg-gray-100 rounded-lg flex items-center justify-center border-2 border-dashed border-gray-300 text-[10px] font-bold text-gray-400"},ot={class:"text-center flex-1 px-8"},at={class:"text-xl font-medium text-gray-700"},lt={class:"mt-8"},dt={class:"inline-block text-2xl font-black bg-black text-white px-8 py-2 rounded-sm transform uppercase tracking-wide decoration-solid underline decoration-4"},nt={class:"w-32 h-32 flex-shrink-0"},it=["src"],bt={class:"grid grid-cols-4 gap-0 mb-12 border border-gray-200 rounded-lg overflow-hidden text-right"},ct={class:"p-4 border-l border-gray-200 bg-gray-50/50"},xt={class:"text-sm font-bold text-gray-900 leading-none"},pt={class:"p-4 border-l border-gray-200 bg-gray-50/50"},ut={class:"text-sm font-bold text-gray-900 leading-none"},gt={class:"p-4 border-l border-gray-200 bg-gray-50/50"},ft={class:"text-sm font-bold text-gray-900 leading-none"},mt={class:"p-4 bg-gray-50/50"},ht={class:"text-sm font-bold text-gray-900 leading-none"},kt={key:0,class:"overflow-x-auto min-h-[400px]"},vt={class:"w-full text-right border-collapse border border-black"},yt={class:"text-sm font-medium"},wt={class:"p-3 border border-black text-center text-gray-500"},_t={class:"p-3 border border-black font-bold"},jt={class:"p-3 border border-black text-center font-mono font-bold text-lg"},At={class:"p-3 border border-black text-center"},Ct={class:"flex items-center justify-center gap-3"},St={class:"flex-1 h-2 bg-gray-100 rounded-full overflow-hidden max-w-[100px]"},Vt={class:"text-xs font-black"},Bt={class:"bg-gray-50 font-black"},Dt={class:"p-4 border border-black text-center text-xl font-mono"},Rt={key:1,class:"overflow-x-auto min-h-[400px]"},Tt={class:"w-full text-right border-collapse border border-black"},Ft={class:"text-sm font-medium"},Ht={class:"p-3 border border-black text-center text-gray-500"},Mt={class:"p-3 border border-black font-mono font-bold text-center"},Ot={class:"p-3 border border-black font-bold"},zt={class:"p-3 border border-black text-center"},Et={class:"p-3 border border-black"},Lt={class:"p-3 border border-black text-center"},Pt={class:"text-[10px] font-black uppercase"},Ut={key:0},Nt={class:"mt-32 pt-6 border-t border-gray-100 flex items-center justify-between text-[10px] text-gray-400 font-bold uppercase tracking-widest no-print"},Qt={__name:"View",props:{type:String,assets:Array,department:Object,categories:Array,filters:Object},setup(r){const n=r,A=O(),C=M(()=>A.props.auth.user),d=B({date_from:n.filters.date_from??"",date_to:n.filters.date_to??"",category_id:n.filters.category_id??"",status:n.filters.status??""}),S=()=>{H.get(route("reports.view",n.type),d.value,{preserveState:!0,preserveScroll:!0})};D(d,()=>{S()},{deep:!0});const k=i=>{window.open(route("reports.view",{type:n.type,...d.value,export:i}))},v=i=>({inventory:"تقرير جرد الأصول",custody:"تقرير العهدة",movement:"تقرير حركة الأصول",added:"تقرير الأصول المضافة",damaged:"تقرير التالف والكهنة",summary:"ملخص الأصول"})[i]||"تقرير أصول",V=()=>{window.print()};return(i,e)=>(a(),l(x,null,[g(y(R),{title:"Report: "+r.type},null,8,["title"]),g(z,null,{header:f(()=>[t("div",E,[t("div",L,[g(y(F),{href:i.route("reports.index"),class:"flex h-11 w-11 items-center justify-center rounded-xl border border-slate-200 bg-white text-slate-400 transition-all hover:bg-slate-50 hover:text-[#3d4adb] shadow-soft group"},{default:f(()=>[...e[6]||(e[6]=[t("svg",{class:"w-5 h-5 transition-transform group-hover:-translate-x-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2.5",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1)])]),_:1},8,["href"]),t("div",null,[t("h2",P,o(v(r.type)),1),t("p",U,o(r.type.replace("_"," "))+" Precision Audit",1)])]),t("div",N,[t("button",{onClick:V,class:"inline-flex h-11 items-center px-6 bg-white border border-slate-200 rounded-xl font-black text-[10px] text-slate-600 uppercase tracking-widest hover:bg-slate-50 shadow-soft transition-all"},[...e[7]||(e[7]=[t("svg",{class:"w-4 h-4 mr-2 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2.5",d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})],-1),h(" Print Review ",-1)])]),t("button",{onClick:e[0]||(e[0]=s=>k("pdf")),class:"inline-flex h-11 items-center px-6 bg-rose-600 border border-transparent rounded-xl font-black text-[10px] text-white uppercase tracking-widest hover:bg-rose-700 shadow-premium transition-all active:scale-95"},[...e[8]||(e[8]=[t("svg",{class:"w-4 h-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2.5",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})],-1),h(" Export PDF ",-1)])]),t("button",{onClick:e[1]||(e[1]=s=>k("excel")),class:"inline-flex h-11 items-center px-6 bg-emerald-600 border border-transparent rounded-xl font-black text-[10px] text-white uppercase tracking-widest hover:bg-emerald-700 shadow-premium transition-all active:scale-95"},[...e[9]||(e[9]=[t("svg",{class:"w-4 h-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2.5",d:"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),h(" Spreadsheet ",-1)])])])])]),default:f(()=>[t("div",$,[t("div",G,[t("div",q,[e[16]||(e[16]=t("div",{class:"flex items-center gap-3 mb-8"},[t("div",{class:"h-8 w-1 bg-[#3d4adb] rounded-full"}),t("h3",{class:"text-[11px] font-black text-slate-400 uppercase tracking-[0.2em]"},"Audit Configuration")],-1)),t("div",I,[t("div",J,[e[10]||(e[10]=t("label",{class:"text-[10px] font-black uppercase tracking-widest text-[#3d4adb] block"},"Temporal Start",-1)),c(t("input",{type:"date","onUpdate:modelValue":e[2]||(e[2]=s=>d.value.date_from=s),class:"w-full text-[13px] font-bold h-12 rounded-xl border-slate-100 bg-slate-50 focus:bg-white focus:border-[#3d4adb]/30 focus:ring-[#3d4adb]/10 transition-all cursor-pointer"},null,512),[[w,d.value.date_from]])]),t("div",K,[e[11]||(e[11]=t("label",{class:"text-[10px] font-black uppercase tracking-widest text-[#3d4adb] block"},"Temporal End",-1)),c(t("input",{type:"date","onUpdate:modelValue":e[3]||(e[3]=s=>d.value.date_to=s),class:"w-full text-[13px] font-bold h-12 rounded-xl border-slate-100 bg-slate-50 focus:bg-white focus:border-[#3d4adb]/30 focus:ring-[#3d4adb]/10 transition-all cursor-pointer"},null,512),[[w,d.value.date_to]])]),t("div",Q,[e[13]||(e[13]=t("label",{class:"text-[10px] font-black uppercase tracking-widest text-[#3d4adb] block"},"Taxonomy Filter",-1)),c(t("select",{"onUpdate:modelValue":e[4]||(e[4]=s=>d.value.category_id=s),class:"w-full text-[13px] font-bold h-12 rounded-xl border-slate-100 bg-slate-50 focus:bg-white focus:border-[#3d4adb]/30 focus:ring-[#3d4adb]/10 transition-all"},[e[12]||(e[12]=t("option",{value:""},"Universal Classifications",-1)),(a(!0),l(x,null,m(r.categories,s=>(a(),l("option",{key:s.id,value:s.id},o(s.name),9,W))),128))],512),[[_,d.value.category_id]])]),t("div",X,[e[15]||(e[15]=t("label",{class:"text-[10px] font-black uppercase tracking-widest text-[#3d4adb] block"},"Health Status",-1)),c(t("select",{"onUpdate:modelValue":e[5]||(e[5]=s=>d.value.status=s),class:"w-full text-[13px] font-bold h-12 rounded-xl border-slate-100 bg-slate-50 focus:bg-white focus:border-[#3d4adb]/30 focus:ring-[#3d4adb]/10 transition-all"},[...e[14]||(e[14]=[t("option",{value:""},"All Operational States",-1),t("option",{value:"active",class:"font-bold text-emerald-600"},"Active (Operational)",-1),t("option",{value:"maintenance",class:"font-bold text-blue-600"},"Maintenance",-1),t("option",{value:"damaged",class:"font-bold text-rose-600"},"Damaged (Faulty)",-1),t("option",{value:"retired",class:"font-bold text-slate-500"},"Retired (Decommissioned)",-1)])],512),[[_,d.value.status]])])])]),t("div",Y,[t("div",Z,[t("div",tt,[t("div",et,[r.department.university_logo_url?(a(),l("img",{key:0,src:r.department.university_logo_url,class:"h-full w-full object-contain"},null,8,st)):(a(),l("div",rt,"LOGO HERE"))]),t("div",ot,[e[17]||(e[17]=t("h1",{class:"text-3xl font-black text-black leading-tight mb-2"},"المملكة العربية السعودية",-1)),e[18]||(e[18]=t("h2",{class:"text-2xl font-bold text-gray-900 mb-1"},"جامعة الملك خالد",-1)),t("h3",at,o(r.department.arabic_name||r.department.name),1),t("div",lt,[t("span",dt,o(v(r.type)),1)])]),t("div",nt,[r.department.department_logo_url?(a(),l("img",{key:0,src:r.department.department_logo_url,class:"h-full w-full object-contain"},null,8,it)):j("",!0)])]),t("div",bt,[t("div",ct,[e[19]||(e[19]=t("label",{class:"block text-[10px] font-black text-gray-400 uppercase pb-1 border-b border-gray-100 mb-2"},"تاريخ التقرير",-1)),t("span",xt,o(new Date().toLocaleDateString("ar-SA")),1)]),t("div",pt,[e[20]||(e[20]=t("label",{class:"block text-[10px] font-black text-gray-400 uppercase pb-1 border-b border-gray-100 mb-2"},"القسم المختص",-1)),t("span",ut,o(r.department.arabic_name||r.department.name),1)]),t("div",gt,[e[21]||(e[21]=t("label",{class:"block text-[10px] font-black text-gray-400 uppercase pb-1 border-b border-gray-100 mb-2"},"عدد العهد المسجلة",-1)),t("span",ft,o(r.assets.length)+" أصول",1)]),t("div",mt,[e[22]||(e[22]=t("label",{class:"block text-[10px] font-black text-gray-400 uppercase pb-1 border-b border-gray-100 mb-2"},"بواسطة الموظف",-1)),t("span",ht,o(C.value.name),1)])]),r.type==="summary"?(a(),l("div",kt,[t("table",vt,[e[25]||(e[25]=t("thead",{class:"bg-gray-50 border-b border-black"},[t("tr",{class:"text-black text-xs font-black"},[t("th",{class:"p-3 border border-black text-center w-12"},"م"),t("th",{class:"p-3 border border-black text-right"},"تصنيف الأصول / Asset Category"),t("th",{class:"p-3 border border-black text-center"},"إجمالي العدد / Total Count"),t("th",{class:"p-3 border border-black text-center"},"النسبة المئوية / Percentage")])],-1)),t("tbody",yt,[(a(!0),l(x,null,m(r.assets,(s,b)=>(a(),l("tr",{key:s.category_id,class:"border-b border-gray-300"},[t("td",wt,o(b+1),1),t("td",_t,o(s.category?.name||"Uncategorized"),1),t("td",jt,o(s.total),1),t("td",At,[t("div",Ct,[t("div",St,[t("div",{class:"h-full bg-black",style:T({width:s.total/r.assets.reduce((p,u)=>p+u.total,0)*100+"%"})},null,4)]),t("span",Vt,o((s.total/r.assets.reduce((p,u)=>p+u.total,0)*100).toFixed(1))+"%",1)])])]))),128))]),t("tfoot",Bt,[t("tr",null,[e[23]||(e[23]=t("td",{colspan:"2",class:"p-4 border border-black text-right text-base uppercase"},"الإجمالي العام / GRAND TOTAL",-1)),t("td",Dt,o(r.assets.reduce((s,b)=>s+b.total,0)),1),e[24]||(e[24]=t("td",{class:"p-4 border border-black text-center"},"100%",-1))])])])])):(a(),l("div",Rt,[t("table",Tt,[e[27]||(e[27]=t("thead",{class:"bg-gray-50 border-b border-black"},[t("tr",{class:"text-black text-xs font-black"},[t("th",{class:"p-3 border border-black text-center w-12"},"م"),t("th",{class:"p-3 border border-black text-center w-32"},"رقم الأصل"),t("th",{class:"p-3 border border-black"},"اسم الصنف / المادة"),t("th",{class:"p-3 border border-black text-center"},"التصنيف"),t("th",{class:"p-3 border border-black"},"الموقع الحالي"),t("th",{class:"p-3 border border-black text-center"},"الحالة")])],-1)),t("tbody",Ft,[(a(!0),l(x,null,m(r.assets,(s,b)=>(a(),l("tr",{key:s.id,class:"border-b border-gray-300 hover:bg-gray-50/50"},[t("td",Ht,o(b+1),1),t("td",Mt,o(s.asset_code||s.code),1),t("td",Ot,o(s.name),1),t("td",zt,o(s.category?.name||"-"),1),t("td",Et,o(s.building?.name)+" / "+o(s.room?.name),1),t("td",Lt,[t("span",Pt,o(s.status),1)])]))),128)),r.assets.length===0?(a(),l("tr",Ut,[...e[26]||(e[26]=[t("td",{colspan:"6",class:"p-20 text-center text-gray-400 italic"}," لا توجد أصول مسجلة حالياً ضمن المعايير المختارة ",-1)])])):j("",!0)])])])),e[29]||(e[29]=t("div",{class:"mt-24 grid grid-cols-3 gap-16"},[t("div",{class:"text-center group"},[t("p",{class:"text-base font-black text-gray-900 mb-16"},"إعداد الموظف المختص / Prepared By"),t("div",{class:"w-full border-b-2 border-dashed border-gray-400 mb-2"}),t("p",{class:"text-xs text-gray-500"},"الاسم والتوقيع: ........................................")]),t("div",{class:"text-center group"},[t("p",{class:"text-base font-black text-gray-900 mb-16"},"مراجعة مدير القسم / Reviewed By"),t("div",{class:"w-full border-b-2 border-dashed border-gray-400 mb-2"}),t("p",{class:"text-xs text-gray-500"},"الاسم والتوقيع: ........................................")]),t("div",{class:"text-center group"},[t("p",{class:"text-base font-black text-gray-900 mb-16"},"اعتماد العميد / Approved By"),t("div",{class:"w-full border-b-2 border-dashed border-gray-400 mb-2"}),t("p",{class:"text-xs text-gray-500"},"الاسم والختم: ........................................")])],-1)),t("div",Nt,[e[28]||(e[28]=t("span",null,"نظام إدارة أصول جامعة الملك خالد (ERB)",-1)),t("span",null,o(new Date().toLocaleString()),1)])])])])])]),_:1})],64))}};export{Qt as default};
