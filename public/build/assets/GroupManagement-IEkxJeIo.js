import{u as S,r as h,x as M,y as B,o as a,c as r,a as d,b as n,h as N,w as m,d as e,t as i,e as P,f as $,F as f,m as b,g as z,i as y,k as T,l as v}from"./app-BX5kK8gL.js";import{_ as U}from"./AuthenticatedLayout-WTG0r7J_.js";import{P as F}from"./PrimaryButton-C8C6_QA7.js";import{_ as w}from"./TextInput-D8M23_PG.js";import{_ as k}from"./InputLabel-BWg1fGz9.js";import{d as G}from"./debounce-BXMWmS25.js";import{_ as H}from"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css                                                              */import"./DangerButton-Doqh3QbT.js";import"./SecondaryButton-CW323Hov.js";import"./debounce-CndEhmqu.js";const I={class:"flex items-center justify-between"},L={class:"py-6"},q={class:"mx-auto max-w-5xl px-4"},O={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},R={class:"lg:col-span-1 space-y-6"},E={class:"bg-white p-6 rounded-2xl border border-gray-100 shadow-sm"},J={class:"flex items-center gap-4"},K={class:"h-12 w-12 rounded-xl bg-gray-900 flex items-center justify-center text-white font-bold text-lg"},Q={class:"text-sm font-bold text-gray-900"},W={class:"text-[10px] text-gray-500 font-bold uppercase tracking-tight"},X={class:"bg-white rounded-2xl border border-gray-100 shadow-sm"},Y={class:"p-6 grid gap-6 sm:grid-cols-2"},Z={class:"space-y-1.5"},ee={class:"space-y-1.5"},te=["value"],se={class:"bg-white rounded-2xl border border-gray-100 shadow-sm overflow-hidden"},oe={class:"p-6 space-y-6"},ae={class:"relative"},re={class:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none text-gray-400"},le={key:0,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ie={key:1,class:"w-4 h-4 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},de={key:0,class:"absolute top-full left-0 right-0 mt-1 bg-white rounded-xl border border-gray-100 shadow-xl z-50 p-1"},ne=["onClick"],ce={class:"text-xs font-bold text-gray-900"},ue={class:"text-[9px] uppercase font-black text-gray-400"},pe={class:"text-primary/40"},ge={class:"space-y-3"},xe={class:"text-[9px] font-black uppercase tracking-widest text-gray-400"},me={key:0,class:"text-center py-8 bg-gray-50/50 border border-dashed border-gray-100 rounded-xl"},he={key:1,class:"grid grid-cols-1 md:grid-cols-2 gap-3"},fe={class:"flex items-center gap-3"},ye={class:"h-8 w-8 rounded-lg bg-gray-900 flex items-center justify-center text-white text-[10px] font-bold"},_e={class:"text-xs font-bold text-gray-900 truncate max-w-[100px]"},be={class:"text-[9px] text-gray-500 font-medium"},ve=["onClick"],we={class:"flex items-center justify-end gap-3 pt-2"},ke={__name:"GroupManagement",props:{asset:{type:Object,required:!0},groupTypes:{type:Array,required:!0}},setup(c){const u=c,l=S({group_name:u.asset.group_name||"",group_type_id:u.asset.group_type?.id||null,child_ids:u.asset.children?.map(o=>o.id)||[]}),p=h(""),x=h([]),_=h(!1),g=h(u.asset.children||[]),C=G(async()=>{if(p.value.length<2){x.value=[];return}_.ref=!0;try{const o=await M.get(route("api.assets.search"),{params:{search:p.value,exclude_id:u.asset.id}});x.value=o.data.filter(t=>!l.child_ids.includes(t.id))}catch(o){console.error("Search failed:",o)}finally{_.value=!1}},300);B(p,()=>{C()});const V=o=>{l.child_ids.includes(o.id)||(l.child_ids.push(o.id),g.value.push(o)),p.value="",x.value=[]},j=o=>{l.child_ids=l.child_ids.filter(t=>t!==o),g.value=g.value.filter(t=>t.id!==o)},A=()=>{l.put(route("assets.group.update",u.asset.id),{onSuccess:()=>{window.showToast&&window.showToast("success","Asset grouping updated successfully")}})};return(o,t)=>(a(),r(f,null,[d(n(N),{title:"Group Management"}),d(U,null,{header:m(()=>[e("div",I,[t[4]||(t[4]=e("div",null,[e("h2",{class:"text-xl font-bold text-gray-900"},"Device Component Management"),e("p",{class:"text-xs text-gray-500 font-medium"},"Link hardware accessories and internal parts to this primary device profile.")],-1)),d(n(v),{href:o.route("assets.show",c.asset.id),class:"btn-secondary !h-9 !text-xs !rounded-xl"},{default:m(()=>[...t[3]||(t[3]=[y(" Back to Details ",-1)])]),_:1},8,["href"])])]),default:m(()=>[e("div",L,[e("div",q,[e("div",O,[e("div",R,[e("div",E,[t[5]||(t[5]=e("h3",{class:"text-[10px] font-black uppercase tracking-widest text-gray-400 mb-4"},"Target Parent",-1)),e("div",J,[e("div",K,i(c.asset.short_code.charAt(0)),1),e("div",null,[e("h4",Q,i(c.asset.asset_code),1),e("p",W,i(c.asset.subCategory),1)])])]),t[6]||(t[6]=e("div",{class:"bg-gray-900 p-6 rounded-2xl text-white"},[e("h3",{class:"text-[10px] font-black uppercase tracking-widest text-gray-400 mb-2 opacity-50"},"Instruction"),e("p",{class:"text-xs leading-relaxed opacity-90"},' Organizing assets into groups allows you to track them as a single system. Changes here will update the "Collection" view in the asset details page. ')],-1))]),e("form",{onSubmit:P(A,["prevent"]),class:"lg:col-span-2 space-y-6"},[e("section",X,[t[8]||(t[8]=e("div",{class:"px-6 py-4 border-b border-gray-50"},[e("h3",{class:"text-sm font-bold text-gray-900"},"1. Device Configuration")],-1)),e("div",Y,[e("div",Z,[d(k,{for:"group_name",value:"System Purpose / Device Name",class:"!text-[10px] !font-black !uppercase !text-gray-400"}),d(w,{id:"group_name",modelValue:n(l).group_name,"onUpdate:modelValue":t[0]||(t[0]=s=>n(l).group_name=s),class:"block w-full !h-10 !text-sm !rounded-xl",placeholder:"e.g. Lab workstation 01"},null,8,["modelValue"])]),e("div",ee,[d(k,{for:"group_type",value:"Device Category",class:"!text-[10px] !font-black !uppercase !text-gray-400"}),$(e("select",{id:"group_type","onUpdate:modelValue":t[1]||(t[1]=s=>n(l).group_type_id=s),class:"block w-full h-10 px-3 text-sm rounded-xl border-gray-200 bg-gray-50 focus:bg-white focus:ring-0 transition-all"},[t[7]||(t[7]=e("option",{value:null},"Uncategorized System",-1)),(a(!0),r(f,null,b(c.groupTypes,s=>(a(),r("option",{key:s.id,value:s.id},i(s.name),9,te))),128))],512),[[z,n(l).group_type_id]])])])]),e("section",se,[t[13]||(t[13]=e("div",{class:"px-6 py-4 border-b border-gray-50"},[e("h3",{class:"text-sm font-bold text-gray-900"},"2. Hardware Components & Parts")],-1)),e("div",oe,[e("div",ae,[d(w,{modelValue:p.value,"onUpdate:modelValue":t[2]||(t[2]=s=>p.value=s),type:"text",class:"block w-full !pl-10 !h-11 !text-sm !bg-gray-50 !border-gray-100 !rounded-xl",placeholder:"Search by ID or Category..."},null,8,["modelValue"]),e("div",re,[_.value?(a(),r("svg",ie,[...t[10]||(t[10]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)])])):(a(),r("svg",le,[...t[9]||(t[9]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"},null,-1)])]))]),x.value.length>0?(a(),r("div",de,[(a(!0),r(f,null,b(x.value,s=>(a(),r("button",{key:s.id,type:"button",onClick:D=>V(s),class:"flex w-full items-center justify-between p-3 rounded-lg hover:bg-gray-50 text-left"},[e("div",null,[e("p",ce,i(s.asset_code),1),e("p",ue,[y(i(s.name)+" ",1),e("span",pe,"â€¢ "+i(s.department),1)])]),t[11]||(t[11]=e("span",{class:"text-[9px] font-black text-primary uppercase"},"Add +",-1))],8,ne))),128))])):T("",!0)]),e("div",ge,[e("p",xe,"Included Assets ("+i(g.value.length)+")",1),g.value.length===0?(a(),r("div",me,[...t[12]||(t[12]=[e("p",{class:"text-xs text-gray-400 font-medium"},"No assets assigned.",-1)])])):(a(),r("div",he,[(a(!0),r(f,null,b(g.value,s=>(a(),r("div",{key:s.id,class:"flex items-center justify-between p-3 rounded-xl bg-white border border-gray-100 group"},[e("div",fe,[e("div",ye,i(s.asset_code.split("-").pop().charAt(0)),1),e("div",null,[e("p",_e,i(s.asset_code),1),e("p",be,i(s.name),1)])]),e("button",{type:"button",onClick:D=>j(s.id),class:"text-[9px] font-black text-red-400 uppercase tracking-tighter hover:text-red-600 p-1"}," Remove ",8,ve)]))),128))]))])])]),e("div",we,[d(n(v),{href:o.route("assets.show",c.asset.id),class:"btn-secondary !h-10 !px-6 !text-xs"},{default:m(()=>[...t[14]||(t[14]=[y("Discard Changes",-1)])]),_:1},8,["href"]),d(F,{disabled:n(l).processing,class:"!h-10 !px-8 !text-xs !rounded-xl"},{default:m(()=>[...t[15]||(t[15]=[y("Complete Configuration",-1)])]),_:1},8,["disabled"])])],32)])])])]),_:1})],64))}},ze=H(ke,[["__scopeId","data-v-bf23fa3f"]]);export{ze as default};
