import{u as e,o as t,a as r,k as a,m as s,p as o,w as l,b as i,q as n,e as d,d as m,F as c,z as u,t as g,l as p,c as x,g as f,A as y}from"./vendor-DGI0tb4d.js";import{_ as h}from"./AuthenticatedLayout-Cfq4davl.js";import{P as v}from"./PrimaryButton-CXxvsKbC.js";import{_ as b}from"./TextInput-7Tb4wL4u.js";import{_ as w}from"./InputLabel-ttg1gjZN.js";import{_}from"./InputError-CSjO0CYp.js";import{_ as k}from"./EntityImage-CGB1-HgO.js";import{G as j}from"./GlobalCheckbox-BSagvGQB.js";import"./utils-B98O4e5m.js";/* empty css                                                              */import"./_plugin-vue_export-helper-BCo6x5W8.js";import"./DangerButton-Bzsvvehx.js";import"./SecondaryButton-DsdD6xme.js";const C={class:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between"},V={class:"flex items-center gap-3"},A={class:"py-8"},B={class:"mx-auto max-w-3xl sm:px-6 lg:px-8"},E={class:"border-b border-slate-100 bg-slate-50/50 px-8 py-6 flex items-center justify-between"},M={class:"p-6 grid gap-6"},S={class:"grid grid-cols-1 sm:grid-cols-2 gap-3 max-h-48 overflow-y-auto p-3 border border-gray-100 rounded-lg bg-gray-50/50"},I={class:"flex h-6 items-center"},D={class:"ml-3 text-sm leading-6"},L={class:"font-medium text-gray-700 group-hover:text-primary transition-colors"},T={class:"mt-2 flex gap-6"},U={class:"shrink-0 relative"},G={class:"grow rounded-lg border border-dashed border-gray-900/25 px-6 py-10 transition-colors hover:border-primary/50"},P={class:"text-center"},q={class:"mt-4 flex text-sm leading-6 text-gray-600 justify-center"},z={for:"image",class:"relative cursor-pointer rounded-md bg-white font-semibold text-primary focus-within:outline-none focus-within:ring-2 focus-within:ring-primary focus-within:ring-offset-2 hover:text-indigo-500 transition-colors"},F={key:0,class:"mt-2 flex items-center justify-center gap-2"},N={class:"inline-flex items-center rounded-md bg-green-50 px-2 py-1 text-xs font-medium text-green-700 ring-1 ring-inset ring-green-600/20"},R={class:"bg-gray-50 px-6 py-4 flex items-center justify-end gap-3 border-t border-gray-100"},H={__name:"Edit",props:{category:{type:Object,required:!0},departments:{type:Array,required:!0}},setup(H){const $=H,J=y(),O=f(()=>J.props.auth?.permissions??[]),Q=e=>O.value.includes(e),K=e({name:$.category.name,name_ar:$.category.name_ar||"",code:$.category.code||"",image:null,department_ids:$.category.department_ids||[]});return(e,f)=>(t(),r(c,null,[a(s(o),{title:"Edit Category"}),a(h,null,{header:l(()=>[i("div",C,[f[9]||(f[9]=i("div",null,[i("h2",{class:"text-2xl font-bold leading-tight text-gray-800"}," Edit Category "),i("p",{class:"mt-1 text-sm text-gray-500"}," Update category details or manage its department assignments. ")],-1)),i("div",V,[a(s(p),{href:e.route("categories.index"),class:"inline-flex items-center rounded-lg border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 shadow-sm transition-colors hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2"},{default:l(()=>[...f[8]||(f[8]=[i("svg",{class:"mr-2 -ml-1 h-4 w-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),d(" Back to Categories ",-1)])]),_:1},8,["href"])])])]),default:l(()=>[i("div",A,[i("div",B,[i("form",{class:"overflow-hidden rounded-[32px] border border-slate-200 bg-white shadow-premium",onSubmit:f[7]||(f[7]=n(t=>s(K).transform(e=>({...e,_method:"put"})).post(e.route("categories.update",H.category.id),{forceFormData:!0,onSuccess:()=>e.window.showToast("success","Category updated successfully.")}),["prevent"]))},[i("div",E,[f[11]||(f[11]=i("div",null,[i("h3",{class:"text-xl font-bold text-slate-800 tracking-tight"},"Taxonomy Profile"),i("p",{class:"text-[13px] font-medium text-slate-400"},"Manage primary asset classification nodes.")],-1)),Q("category-delete")?(t(),r("button",{key:0,type:"button",class:"inline-flex items-center rounded-xl bg-rose-50 px-4 py-2 text-xs font-bold text-rose-600 border border-rose-100 transition-all hover:bg-rose-100 hover:scale-105 active:scale-95",onClick:f[0]||(f[0]=t=>e.window.showConfirm({title:"Decommission Category?",message:`Are you sure you want to decommission ${H.category.name}? This will retire the classification from future use.`,confirmText:"Decommission",onConfirm:()=>e.$inertia.delete(e.route("categories.destroy",H.category.id))}))},[...f[10]||(f[10]=[i("svg",{class:"-ml-1 mr-2 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2.5",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),d(" Decommission ",-1)])])):m("",!0)]),i("div",M,[i("div",null,[a(w,{for:"name",value:"Category Name (English)"}),a(b,{id:"name",modelValue:s(K).name,"onUpdate:modelValue":f[1]||(f[1]=e=>s(K).name=e),class:"mt-1 block w-full"},null,8,["modelValue"]),a(_,{class:"mt-2",message:s(K).errors.name},null,8,["message"])]),i("div",null,[a(w,{for:"name_ar",value:"Category Name (Arabic)"}),a(b,{id:"name_ar",modelValue:s(K).name_ar,"onUpdate:modelValue":f[2]||(f[2]=e=>s(K).name_ar=e),dir:"rtl",class:"mt-1 block w-full text-right"},null,8,["modelValue"]),a(_,{class:"mt-2",message:s(K).errors.name_ar},null,8,["message"])]),i("div",null,[a(w,{for:"code",value:"Category Code"}),a(b,{id:"code",modelValue:s(K).code,"onUpdate:modelValue":f[3]||(f[3]=e=>s(K).code=e),class:"mt-1 block w-full font-mono bg-gray-50 uppercase",placeholder:"e.g. ELEC"},null,8,["modelValue"]),f[12]||(f[12]=i("p",{class:"mt-1 text-xs text-gray-500"},"Short unique code used in generating asset identification numbers (QR codes).",-1)),a(_,{class:"mt-2",message:s(K).errors.code},null,8,["message"])]),i("div",null,[a(w,{value:"Assigned Departments"}),f[13]||(f[13]=i("p",{class:"text-xs text-gray-500 mt-1 mb-3"},"Select which departments can use this category. Shared categories help in cross-departmental reporting.",-1)),i("div",S,[(t(!0),r(c,null,u($.departments,e=>(t(),r("label",{key:e.id,class:"relative flex items-start cursor-pointer group"},[i("div",I,[a(j,{id:"dept-"+e.id,checked:s(K).department_ids,"onUpdate:checked":f[4]||(f[4]=e=>s(K).department_ids=e),value:e.id},null,8,["id","checked","value"])]),i("div",D,[i("span",L,g(e.name),1)])]))),128))]),a(_,{class:"mt-2",message:s(K).errors.department_ids},null,8,["message"])]),i("div",null,[a(w,{for:"image",value:"Category Image"}),i("div",T,[i("div",U,[a(k,{src:H.category.image_url,alt:H.category.name,type:"category",class:"h-32 w-32 rounded-lg border border-gray-200"},null,8,["src","alt"]),f[14]||(f[14]=i("p",{class:"mt-1 text-center text-xs text-gray-500"},"Current",-1))]),i("div",G,[i("div",P,[f[16]||(f[16]=i("svg",{class:"mx-auto h-12 w-12 text-gray-300",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[i("path",{"fill-rule":"evenodd",d:"M1.5 6a2.25 2.25 0 012.25-2.25h16.5A2.25 2.25 0 0122.5 6v12a2.25 2.25 0 01-2.25 2.25H3.75A2.25 2.25 0 011.5 18V6zM3 16.06V18c0 .414.336.75.75.75h16.5A.75.75 0 0021 18v-1.94l-2.69-2.689a1.5 1.5 0 00-2.12 0l-.88.879.97.97a.75.75 0 11-1.06 1.06l-5.16-5.159a1.5 1.5 0 00-2.12 0L3 16.061zm10.125-7.81a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0z","clip-rule":"evenodd"})],-1)),i("div",q,[i("label",z,[i("span",null,g(H.category.image_url?"Replace image":"Upload a file"),1),i("input",{id:"image",type:"file",accept:"image/*",class:"sr-only",onInput:f[5]||(f[5]=e=>s(K).image=e.target.files[0])},null,32)]),f[15]||(f[15]=i("p",{class:"pl-1"},"or drag and drop",-1))]),f[17]||(f[17]=i("p",{class:"text-xs leading-5 text-gray-600"},"PNG, JPG, GIF up to 2MB",-1)),s(K).image?(t(),r("div",F,[i("span",N," Selected: "+g(s(K).image.name),1),i("button",{type:"button",onClick:f[6]||(f[6]=e=>s(K).image=null),class:"text-xs text-red-500 hover:text-red-700 underline"},"Remove")])):m("",!0)])])]),a(_,{class:"mt-2",message:s(K).errors.image},null,8,["message"])])]),i("div",R,[a(s(p),{href:e.route("categories.index"),class:"text-sm font-medium text-gray-600 hover:text-gray-900 transition-colors"},{default:l(()=>[...f[18]||(f[18]=[d(" Cancel ",-1)])]),_:1},8,["href"]),Q("category-edit")?(t(),x(v,{key:0,disabled:s(K).processing,class:"shadow-sm"},{default:l(()=>[...f[19]||(f[19]=[i("svg",{class:"mr-2 -ml-1 h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1),d(" Save Changes ",-1)])]),_:1},8,["disabled"])):m("",!0)])],32)])])]),_:1})],64))}};export{H as default};
