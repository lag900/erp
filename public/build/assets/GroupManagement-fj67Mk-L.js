import{u as e,y as t,C as s,o as a,a as r,k as l,m as o,p as d,w as i,b as n,t as c,q as p,s as u,F as g,z as x,x as m,e as y,d as h,l as f}from"./vendor-DGI0tb4d.js";import{_ as v}from"./AuthenticatedLayout-odOuIOG-.js";import{P as b}from"./PrimaryButton-CXxvsKbC.js";import{_ as w}from"./TextInput-7Tb4wL4u.js";import{_}from"./InputLabel-ttg1gjZN.js";import{a as k}from"./utils-B98O4e5m.js";import{d as j}from"./debounce-DWKRusXY.js";import{_ as C}from"./_plugin-vue_export-helper-BCo6x5W8.js";/* empty css                                                              */import"./DangerButton-Bzsvvehx.js";import"./SecondaryButton-DsdD6xme.js";import"./debounce-D19TCx3D.js";const A={class:"flex items-center justify-between"},D={class:"py-6"},T={class:"mx-auto max-w-5xl px-4"},V={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},B={class:"lg:col-span-1 space-y-6"},I={class:"bg-white p-6 rounded-2xl border border-gray-100 shadow-sm"},S={class:"flex items-center gap-4"},z={class:"h-12 w-12 rounded-xl bg-gray-900 flex items-center justify-center text-white font-bold text-lg"},M={class:"text-sm font-bold text-gray-900"},P={class:"text-[10px] text-gray-500 font-bold uppercase tracking-tight"},L={class:"bg-white rounded-2xl border border-gray-100 shadow-sm"},U={class:"p-6 grid gap-6 sm:grid-cols-2"},q={class:"space-y-1.5"},H={class:"space-y-1.5"},G=["value"],N={class:"bg-white rounded-2xl border border-gray-100 shadow-sm overflow-hidden"},O={class:"p-6 space-y-6"},F={class:"relative"},R={class:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none text-gray-400"},E={key:0,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},J={key:1,class:"w-4 h-4 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},K={key:0,class:"absolute top-full left-0 right-0 mt-1 bg-white rounded-xl border border-gray-100 shadow-xl z-50 p-1"},Q=["onClick"],W={class:"text-xs font-bold text-gray-900"},X={class:"text-[9px] uppercase font-black text-gray-400"},Y={class:"text-primary/40"},Z={class:"space-y-3"},$={class:"text-[9px] font-black uppercase tracking-widest text-gray-400"},ee={key:0,class:"text-center py-8 bg-gray-50/50 border border-dashed border-gray-100 rounded-xl"},te={key:1,class:"grid grid-cols-1 md:grid-cols-2 gap-3"},se={class:"flex items-center gap-3"},ae={class:"h-8 w-8 rounded-lg bg-gray-900 flex items-center justify-center text-white text-[10px] font-bold"},re={class:"text-xs font-bold text-gray-900 truncate max-w-[100px]"},le={class:"text-[9px] text-gray-500 font-medium"},oe=["onClick"],de={class:"flex items-center justify-end gap-3 pt-2"},ie=C({__name:"GroupManagement",props:{asset:{type:Object,required:!0},groupTypes:{type:Array,required:!0}},setup(C){const ie=C,ne=e({group_name:ie.asset.group_name||"",group_type_id:ie.asset.group_type?.id||null,child_ids:ie.asset.children?.map(e=>e.id)||[]}),ce=t(""),pe=t([]),ue=t(!1),ge=t(ie.asset.children||[]),xe=j(async()=>{if(ce.value.length<2)pe.value=[];else{ue.ref=!0;try{const e=await k.get(route("api.assets.search"),{params:{search:ce.value,exclude_id:ie.asset.id}});pe.value=e.data.filter(e=>!ne.child_ids.includes(e.id))}catch(e){}finally{ue.value=!1}}},300);s(ce,()=>{xe()});const me=()=>{ne.put(route("assets.group.update",ie.asset.id),{onSuccess:()=>{window.showToast&&window.showToast("success","Asset grouping updated successfully")}})};return(e,t)=>(a(),r(g,null,[l(o(d),{title:"Group Management"}),l(v,null,{header:i(()=>[n("div",A,[t[4]||(t[4]=n("div",null,[n("h2",{class:"text-xl font-bold text-gray-900"},"Device Component Management"),n("p",{class:"text-xs text-gray-500 font-medium"},"Link hardware accessories and internal parts to this primary device profile.")],-1)),l(o(f),{href:e.route("assets.show",C.asset.id),class:"btn-secondary !h-9 !text-xs !rounded-xl"},{default:i(()=>[...t[3]||(t[3]=[y(" Back to Details ",-1)])]),_:1},8,["href"])])]),default:i(()=>[n("div",D,[n("div",T,[n("div",V,[n("div",B,[n("div",I,[t[5]||(t[5]=n("h3",{class:"text-[10px] font-black uppercase tracking-widest text-gray-400 mb-4"},"Target Parent",-1)),n("div",S,[n("div",z,c(C.asset.short_code.charAt(0)),1),n("div",null,[n("h4",M,c(C.asset.asset_code),1),n("p",P,c(C.asset.subCategory),1)])])]),t[6]||(t[6]=n("div",{class:"bg-gray-900 p-6 rounded-2xl text-white"},[n("h3",{class:"text-[10px] font-black uppercase tracking-widest text-gray-400 mb-2 opacity-50"},"Instruction"),n("p",{class:"text-xs leading-relaxed opacity-90"},' Organizing assets into groups allows you to track them as a single system. Changes here will update the "Collection" view in the asset details page. ')],-1))]),n("form",{onSubmit:p(me,["prevent"]),class:"lg:col-span-2 space-y-6"},[n("section",L,[t[8]||(t[8]=n("div",{class:"px-6 py-4 border-b border-gray-50"},[n("h3",{class:"text-sm font-bold text-gray-900"},"1. Device Configuration")],-1)),n("div",U,[n("div",q,[l(_,{for:"group_name",value:"System Purpose / Device Name",class:"!text-[10px] !font-black !uppercase !text-gray-400"}),l(w,{id:"group_name",modelValue:o(ne).group_name,"onUpdate:modelValue":t[0]||(t[0]=e=>o(ne).group_name=e),class:"block w-full !h-10 !text-sm !rounded-xl",placeholder:"e.g. Lab workstation 01"},null,8,["modelValue"])]),n("div",H,[l(_,{for:"group_type",value:"Device Category",class:"!text-[10px] !font-black !uppercase !text-gray-400"}),u(n("select",{id:"group_type","onUpdate:modelValue":t[1]||(t[1]=e=>o(ne).group_type_id=e),class:"block w-full h-10 px-3 text-sm rounded-xl border-gray-200 bg-gray-50 focus:bg-white focus:ring-0 transition-all"},[t[7]||(t[7]=n("option",{value:null},"Uncategorized System",-1)),(a(!0),r(g,null,x(C.groupTypes,e=>(a(),r("option",{key:e.id,value:e.id},c(e.name),9,G))),128))],512),[[m,o(ne).group_type_id]])])])]),n("section",N,[t[13]||(t[13]=n("div",{class:"px-6 py-4 border-b border-gray-50"},[n("h3",{class:"text-sm font-bold text-gray-900"},"2. Hardware Components & Parts")],-1)),n("div",O,[n("div",F,[l(w,{modelValue:ce.value,"onUpdate:modelValue":t[2]||(t[2]=e=>ce.value=e),type:"text",class:"block w-full !pl-10 !h-11 !text-sm !bg-gray-50 !border-gray-100 !rounded-xl",placeholder:"Search by ID or Category..."},null,8,["modelValue"]),n("div",R,[ue.value?(a(),r("svg",J,[...t[10]||(t[10]=[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)])])):(a(),r("svg",E,[...t[9]||(t[9]=[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"},null,-1)])]))]),pe.value.length>0?(a(),r("div",K,[(a(!0),r(g,null,x(pe.value,e=>(a(),r("button",{key:e.id,type:"button",onClick:t=>{return s=e,ne.child_ids.includes(s.id)||(ne.child_ids.push(s.id),ge.value.push(s)),ce.value="",void(pe.value=[]);var s},class:"flex w-full items-center justify-between p-3 rounded-lg hover:bg-gray-50 text-left"},[n("div",null,[n("p",W,c(e.asset_code),1),n("p",X,[y(c(e.name)+" ",1),n("span",Y,"â€¢ "+c(e.department),1)])]),t[11]||(t[11]=n("span",{class:"text-[9px] font-black text-primary uppercase"},"Add +",-1))],8,Q))),128))])):h("",!0)]),n("div",Z,[n("p",$,"Included Assets ("+c(ge.value.length)+")",1),0===ge.value.length?(a(),r("div",ee,[...t[12]||(t[12]=[n("p",{class:"text-xs text-gray-400 font-medium"},"No assets assigned.",-1)])])):(a(),r("div",te,[(a(!0),r(g,null,x(ge.value,e=>(a(),r("div",{key:e.id,class:"flex items-center justify-between p-3 rounded-xl bg-white border border-gray-100 group"},[n("div",se,[n("div",ae,c(e.asset_code.split("-").pop().charAt(0)),1),n("div",null,[n("p",re,c(e.asset_code),1),n("p",le,c(e.name),1)])]),n("button",{type:"button",onClick:t=>{return s=e.id,ne.child_ids=ne.child_ids.filter(e=>e!==s),void(ge.value=ge.value.filter(e=>e.id!==s));var s},class:"text-[9px] font-black text-red-400 uppercase tracking-tighter hover:text-red-600 p-1"}," Remove ",8,oe)]))),128))]))])])]),n("div",de,[l(o(f),{href:e.route("assets.show",C.asset.id),class:"btn-secondary !h-10 !px-6 !text-xs"},{default:i(()=>[...t[14]||(t[14]=[y("Discard Changes",-1)])]),_:1},8,["href"]),l(b,{disabled:o(ne).processing,class:"!h-10 !px-8 !text-xs !rounded-xl"},{default:i(()=>[...t[15]||(t[15]=[y("Complete Configuration",-1)])]),_:1},8,["disabled"])])],32)])])])]),_:1})],64))}},[["__scopeId","data-v-bf23fa3f"]]);export{ie as default};
