import{u as P,A as ge,o as n,c as d,a as o,b as r,h as ve,w as a,d as t,t as m,k as y,T as J,i as f,F as w,m as M,j as G,n as H,e as T,f as z,g as I,v as N,r as _,p as X,s as Y,q as fe}from"./app-BX5kK8gL.js";import{_ as xe}from"./AuthenticatedLayout-WTG0r7J_.js";import{_ as $}from"./TextInput-D8M23_PG.js";import{_ as R}from"./DangerButton-Doqh3QbT.js";import{_ as b}from"./InputLabel-BWg1fGz9.js";import{_ as h}from"./InputError-C8hi-McE.js";import{G as S}from"./GlobalCheckbox-Bkg5O3-I.js";/* empty css                                                              */import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./SecondaryButton-CW323Hov.js";const ye={class:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between"},be={class:"flex items-center gap-3"},he={class:"py-10"},ke={class:"mx-auto max-w-7xl sm:px-6 lg:px-8"},we={class:"mb-10 flex flex-col gap-6 lg:flex-row lg:items-center lg:justify-between"},_e={class:"relative max-w-xl w-full"},Ce={class:"flex gap-4 overflow-x-auto pb-2 lg:pb-0"},Me={class:"flex flex-shrink-0 items-center gap-3 rounded-xl bg-white px-5 py-3 border border-gray-50 shadow-soft"},Ae={class:"text-xs font-semibold uppercase tracking-tight text-gray-500"},je={key:0,class:"flex flex-col items-center justify-center rounded-2xl border border-dashed border-gray-200 bg-white p-24 text-center"},ze={key:0,class:"fixed bottom-8 left-1/2 z-[100] -translate-x-1/2 w-full max-w-2xl px-4"},Se={class:"flex items-center justify-between rounded-2xl bg-[#1F2937] px-8 py-5 shadow-2xl ring-1 ring-white/10 backdrop-blur-xl"},Ve={class:"flex items-center gap-4"},Be={class:"flex h-7 w-7 items-center justify-center rounded-lg bg-[#1FA6A0] text-[10px] font-bold text-white shadow-lg"},$e={class:"flex items-center gap-2"},Fe={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"},Ue=["onDrop"],Pe={class:"border-b border-gray-50 bg-gray-50/30 px-6 py-5 flex items-center justify-between"},Ge={class:"flex items-center gap-3"},Le={class:"text-base font-semibold text-slate-800 tracking-tight"},De={class:"flex items-center gap-2"},He={class:"rounded-xl bg-white px-3 py-1 text-[10px] font-black uppercase text-gray-400 border border-gray-100 shadow-sm leading-none"},Te={class:"p-5 flex-1 overflow-y-auto max-h-[450px] scrollbar-hide"},Ie={class:"space-y-3"},Ne=["onDragstart"],Re={class:"flex items-center gap-4"},qe={class:"flex items-center gap-2 mb-1"},Ke={class:"text-sm font-semibold text-slate-700 tracking-tight leading-none"},Oe={key:0,class:"px-1.5 py-0.5 bg-slate-100 text-[8px] font-bold text-slate-400 rounded-lg"},Ee={class:"text-[10px] font-medium text-slate-400 tracking-wide leading-none"},Qe={class:"flex items-center gap-1 opacity-0 group-hover/item:opacity-100 transition-all duration-300"},We={class:"px-8 py-5 border-t border-gray-50 flex items-center justify-between"},Je={class:"flex gap-1.5"},Xe=["onClick"],Ye=["onClick"],Ze={class:"flex items-center gap-1.5"},et={key:0,class:"text-[8px] font-black text-gray-300 uppercase"},tt={key:1,class:"mt-16 bg-[#F8FAFC] rounded-2xl p-10 border border-dashed border-gray-200"},st={class:"mb-10 flex items-center justify-between px-2"},ot={class:"px-5 py-2 bg-white border border-gray-100 shadow-sm rounded-xl text-xs font-semibold text-gray-500 uppercase tracking-widest"},rt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},lt=["onDragstart"],it={class:"flex items-center gap-3"},nt={class:"text-sm font-bold text-gray-700 tracking-tight"},at={class:"p-10"},dt={class:"mb-8 flex items-center justify-between border-b border-gray-50 pb-6"},ut={class:"flex items-center gap-4"},ct={key:0,class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},pt={key:1,class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},mt={key:2,class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},gt={class:"text-xl font-bold text-slate-800 tracking-tight"},vt={class:"text-sm font-medium text-slate-500"},ft={key:0,class:"space-y-4"},xt={class:"grid grid-cols-2 gap-3"},yt={class:"flex items-center gap-3"},bt={class:"text-sm font-bold text-gray-700 uppercase tracking-tight"},ht={class:"px-2 py-0.5 bg-white border border-gray-100 rounded-lg text-[10px] font-black text-gray-400 uppercase tracking-tighter"},kt={key:1,class:"space-y-4"},wt=["value"],_t={class:"flex items-center justify-end gap-3 pt-4 border-t border-gray-50"},Ct={class:"p-8"},Mt={class:"mb-8 flex items-center justify-between border-b border-gray-50 pb-4"},At={class:"text-2xl font-black text-gray-900 uppercase tracking-tight"},jt={class:"space-y-2"},zt={class:"space-y-2"},St={class:"flex justify-end gap-3 pt-6"},Vt={class:"p-8"},Bt={class:"mb-8 flex items-center justify-between border-b border-gray-50 pb-4"},$t={class:"space-y-2"},Ft={class:"text-[10px] font-black uppercase text-gray-400 tracking-widest mt-1"},Ut={class:"text-primary"},Pt={class:"space-y-2"},Gt=["value"],Lt={class:"space-y-2"},Dt={class:"flex items-center gap-3"},Ht={class:"space-y-4 border-t border-gray-50 pt-6"},Tt={class:"flex items-center justify-between"},It={class:"flex items-center gap-2"},Nt={key:0,class:"space-y-4 rounded-2xl bg-gray-50/50 p-4 ring-1 ring-inset ring-gray-100"},Rt={class:"grid grid-cols-2 gap-4"},qt={class:"flex justify-end gap-3 pt-6"},ts={__name:"Index",props:{groups:Array,ungrouped:Array,roles:Array},setup(k){const Z=k,L=_(""),ee=P({}),te=fe(),se=X(()=>te.props.auth?.permissions??[]),F=l=>se.value.includes(l),p=_([]),V=_(!1),g=_("assign"),x=P({permission_ids:[],role_ids:[],permission_group_id:""}),q=l=>{const e=p.value.indexOf(l);e>-1?p.value.splice(e,1):p.value.push(l)},oe=l=>{const e=l.map(s=>s.id);if(e.every(s=>p.value.includes(s)))p.value=p.value.filter(s=>!e.includes(s));else{const s=e.filter(u=>!p.value.includes(u));p.value=[...p.value,...s]}},U=(l,e=null)=>{e&&(p.value=[e]),g.value=l,x.permission_ids=[...p.value],x.role_ids=[],x.permission_group_id="",V.value=!0},re=()=>{const e={assign:"permissions.bulk-assign",remove:"permissions.bulk-remove",move:"permissions.bulk-move"}[g.value];x.post(route(e),{onSuccess:()=>{V.value=!1,p.value=[]}})},B=_(null),C=_(!1),A=_(null),v=P({name:"",description:"",icon:"shield-check"}),j=_(!1),i=P({name:"",permission_group_id:"",description:"",status:!0,is_sidebar_item:!1,sidebar_label:"",route_name:"",icon:"cube",sort_order:0}),K=(l=null)=>{A.value=l,l?(v.name=l.name,v.description=l.description,v.icon=l.icon):v.reset(),C.value=!0},O=(l=null)=>{i.reset(),l&&(i.permission_group_id=l),j.value=!0},le=()=>{A.value?v.put(route("permission-groups.update",A.value.id),{onSuccess:()=>{C.value=!1,A.value=null}}):v.post(route("permission-groups.store"),{onSuccess:()=>{C.value=!1}})},ie=()=>{i.post(route("permissions.store"),{onSuccess:()=>{j.value=!1}})},ne=l=>l.toString().toLowerCase().replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-").replace(/^-+/,"").replace(/-+$/,""),ae=()=>{i.name&&(i.name=ne(i.name))},de=l=>{confirm(`Purge "${l.name}" module? Permissions will be preserved but ungrouped.`)&&Y.delete(route("permission-groups.destroy",l.id))},E=X(()=>{const l=L.value.trim().toLowerCase();return Z.groups.map(e=>{const c=e.permissions.filter(s=>s.name.toLowerCase().includes(l)||s.description&&s.description.toLowerCase().includes(l));return{...e,matchedPerms:c}}).filter(e=>e.matchedPerms.length>0||e.name.toLowerCase().includes(l))}),Q=l=>{B.value=l},ue=l=>{l.preventDefault()},ce=l=>{if(!B.value||B.value.permission_group_id===l.id)return;const e=B.value.id,c=l.id;Y.patch(route("permissions.move",e),{permission_group_id:c},{preserveScroll:!0,onSuccess:()=>{B.value=null}})},pe=l=>{confirm("Permanently revoke this security gate?")&&ee.delete(route("permissions.destroy",l))},W=l=>l.split("-").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" "),me=l=>l.length>0&&l.every(e=>p.value.includes(e.id));return(l,e)=>{const c=ge("AppButton");return n(),d(w,null,[o(r(ve),{title:"System Permissions"}),o(xe,null,{header:a(()=>[t("div",ye,[e[32]||(e[32]=t("div",null,[t("h2",{class:"text-2xl font-semibold tracking-tight text-gray-900"}," Security Access Matrix "),t("p",{class:"mt-1 text-sm text-gray-500"}," Configure organizational functional boundaries and security modules. ")],-1)),t("div",be,[F("permission-create")?(n(),G(c,{key:0,variant:"secondary",onClick:e[0]||(e[0]=s=>K())},{icon:a(()=>[...e[28]||(e[28]=[t("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1)])]),default:a(()=>[e[29]||(e[29]=f(" New Module ",-1))]),_:1})):y("",!0),F("permission-create")?(n(),G(c,{key:1,variant:"primary",onClick:e[1]||(e[1]=s=>O())},{icon:a(()=>[...e[30]||(e[30]=[t("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})],-1)])]),default:a(()=>[e[31]||(e[31]=f(" New Permission ",-1))]),_:1})):y("",!0)])])]),default:a(()=>[t("div",he,[t("div",ke,[t("div",we,[t("div",_e,[e[33]||(e[33]=t("div",{class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-4 text-gray-400"},[t("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1)),o($,{modelValue:L.value,"onUpdate:modelValue":e[2]||(e[2]=s=>L.value=s),type:"text",class:"block w-full border-gray-100 bg-white pl-12 h-[52px] rounded-2xl shadow-soft transition-all focus:ring-[#1FA6A0]/10",placeholder:"Search security keys, modules, or functional descriptions..."},null,8,["modelValue"])]),t("div",Ce,[t("div",Me,[e[34]||(e[34]=t("div",{class:"h-3 w-3 rounded-full bg-[#1FA6A0] animate-pulse"},null,-1)),t("span",Ae,m(k.groups.length)+" Modules",1)])])]),E.value.length===0&&k.ungrouped.length===0?(n(),d("div",je,[...e[35]||(e[35]=[t("div",{class:"flex h-20 w-20 items-center justify-center rounded-3xl bg-gray-50 text-gray-300"},[t("svg",{class:"h-10 w-10",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})])],-1),t("h3",{class:"mt-6 text-xl font-semibold text-gray-900 uppercase"},"Matrix Reset",-1),t("p",{class:"mt-2 text-sm text-gray-500 max-w-xs mx-auto"},"The security definitions are currently empty or filtered out of scope.",-1)])])):y("",!0),o(J,{"enter-active-class":"transition ease-out duration-300 transform","enter-from-class":"translate-y-full opacity-0","enter-to-class":"translate-y-0 opacity-100","leave-active-class":"transition ease-in duration-200 transform","leave-from-class":"translate-y-0 opacity-100","leave-to-class":"translate-y-full opacity-0"},{default:a(()=>[p.value.length>0?(n(),d("div",ze,[t("div",Se,[t("div",Ve,[t("span",Be,m(p.value.length),1),e[36]||(e[36]=t("span",{class:"text-xs font-semibold text-white tracking-wide"},"Gates selected for action",-1))]),t("div",$e,[o(c,{variant:"ghost",size:"sm",class:"text-gray-400 hover:text-white",onClick:e[3]||(e[3]=s=>p.value=[])},{default:a(()=>[...e[37]||(e[37]=[f(" Clear ",-1)])]),_:1}),e[44]||(e[44]=t("div",{class:"h-4 w-px bg-white/10 mx-2"},null,-1)),o(c,{variant:"primary",size:"sm",onClick:e[4]||(e[4]=s=>U("assign"))},{icon:a(()=>[...e[38]||(e[38]=[t("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"})],-1)])]),default:a(()=>[e[39]||(e[39]=f(" Map To Identity ",-1))]),_:1}),o(c,{variant:"danger",size:"sm",onClick:e[5]||(e[5]=s=>U("remove"))},{icon:a(()=>[...e[40]||(e[40]=[t("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 7a4 4 0 11-8 0 4 4 0 018 0zM9 14a6 6 0 00-6 6v1h12v-1a6 6 0 00-6-6zM21 12h-6"})],-1)])]),default:a(()=>[e[41]||(e[41]=f(" Strip Authorization ",-1))]),_:1}),o(c,{variant:"secondary",size:"sm",onClick:e[6]||(e[6]=s=>U("move"))},{icon:a(()=>[...e[42]||(e[42]=[t("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})],-1)])]),default:a(()=>[e[43]||(e[43]=f(" Relocate Gates ",-1))]),_:1})])])])):y("",!0)]),_:1}),t("div",Fe,[(n(!0),d(w,null,M(E.value,s=>(n(),d("div",{key:s.id,class:"group relative flex flex-col overflow-hidden rounded-2xl border border-gray-100 bg-white shadow-soft transition-all duration-300 hover:shadow-premium hover:border-[#1FA6A0]/20",onDragover:ue,onDrop:u=>ce(s)},[t("div",Pe,[t("div",Ge,[o(S,{id:"group-"+s.id,checked:me(s.matchedPerms),"onUpdate:checked":u=>oe(s.matchedPerms)},null,8,["id","checked","onUpdate:checked"]),e[45]||(e[45]=t("div",{class:"flex h-10 w-10 items-center justify-center rounded-2xl bg-white shadow-sm ring-1 ring-gray-100 text-primary"},[t("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})])],-1))]),t("div",null,[e[46]||(e[46]=t("h3",{class:"text-[10px] font-semibold uppercase tracking-widest text-slate-400 leading-none mb-1"},"Functional Module",-1)),t("h4",Le,m(s.name),1)]),t("div",De,[F("permission-create")?(n(),G(c,{key:0,variant:"secondary",size:"xs",onClick:u=>O(s.id),class:"!bg-white !px-2 shadow-sm border border-slate-50",title:"Add Gate to Module"},{icon:a(()=>[...e[47]||(e[47]=[t("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1)])]),_:1},8,["onClick"])):y("",!0),t("span",He,m(s.permissions.length)+" Gates ",1)])]),t("div",Te,[t("ul",Ie,[(n(!0),d(w,null,M(s.matchedPerms,u=>(n(),d("li",{key:u.id,draggable:"true",onDragstart:D=>Q(u),class:H(["group/item relative flex items-center justify-between rounded-xl border border-transparent bg-[#fcfdfe] px-4 py-4 transition-all cursor-grab active:cursor-grabbing hover:bg-white hover:border-gray-100 hover:shadow-md",{"ring-2 ring-[#1FA6A0] bg-[#1FA6A0]/[0.02] border-[#1FA6A0]/10 shadow-lg":p.value.includes(u.id)}])},[t("div",Re,[o(S,{id:"perm-"+u.id,checked:p.value.includes(u.id),"onUpdate:checked":D=>q(u.id)},null,8,["id","checked","onUpdate:checked"]),e[48]||(e[48]=t("div",{class:"flex h-10 w-10 items-center justify-center rounded-xl bg-white text-gray-400 shadow-sm border border-gray-50 group-hover/item:text-[#1FA6A0] transition-all duration-300"},[t("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})])],-1)),t("div",null,[t("div",qe,[t("p",Ke,m(W(u.name)),1),u.status?y("",!0):(n(),d("span",Oe,"Inactive"))]),t("p",Ee,m(u.name),1)])]),t("div",Qe,[o(c,{variant:"ghost",size:"xs",class:"!p-1.5 hover:!bg-[#1FA6A0]/10 hover:!text-[#1FA6A0]",onClick:D=>U("assign",u.id),title:"Quick Map to Identity"},{icon:a(()=>[...e[49]||(e[49]=[t("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"})],-1)])]),_:1},8,["onClick"]),F("permission-delete")&&u.name!=="feature-toggle"?(n(),G(c,{key:0,variant:"ghost",size:"xs",class:"!p-1.5 hover:!bg-rose-50 hover:!text-rose-500",onClick:D=>pe(u.id)},{icon:a(()=>[...e[50]||(e[50]=[t("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])]),_:1},8,["onClick"])):y("",!0)])],42,Ne))),128))])]),t("div",We,[t("div",Je,[t("div",{onClick:u=>K(s),class:"p-2 cursor-pointer text-gray-300 hover:text-primary transition-colors bg-gray-50 rounded-xl hover:bg-white hover:shadow-sm ring-1 ring-inset ring-transparent hover:ring-gray-100"},[...e[51]||(e[51]=[t("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})],-1)])],8,Xe),t("div",{onClick:u=>de(s),class:"p-2 cursor-pointer text-gray-300 hover:text-rose-500 transition-colors bg-gray-50 rounded-xl hover:bg-white hover:shadow-sm ring-1 ring-inset ring-transparent hover:ring-gray-100"},[...e[52]||(e[52]=[t("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,Ye)]),t("div",Ze,[(n(!0),d(w,null,M(Math.min(s.permissions.length,5),u=>(n(),d("div",{key:u,class:"h-1.5 w-1.5 rounded-full bg-[#1FA6A0]/20"}))),128)),s.permissions.length>5?(n(),d("div",et,"+"+m(s.permissions.length-5),1)):y("",!0)])])],40,Ue))),128))]),k.ungrouped.length>0?(n(),d("div",tt,[t("div",st,[e[53]||(e[53]=t("div",null,[t("h3",{class:"text-xs font-semibold uppercase tracking-widest text-gray-400 mb-1"},"Legacy Repository"),t("p",{class:"text-sm font-medium text-gray-500"},"Uncategorized gates awaiting module mapping.")],-1)),t("span",ot,m(k.ungrouped.length)+" Keys",1)]),t("div",rt,[(n(!0),d(w,null,M(k.ungrouped,s=>(n(),d("div",{key:s.id,draggable:"true",onDragstart:u=>Q(s),class:"group/legacy flex items-center justify-between p-5 rounded-2xl bg-white border border-gray-100 shadow-soft cursor-grab active:cursor-grabbing hover:border-[#1FA6A0]/40 hover:shadow-premium transition-all duration-300"},[t("div",it,[o(S,{id:"perm-un-"+s.id,checked:p.value.includes(s.id),"onUpdate:checked":u=>q(s.id)},null,8,["id","checked","onUpdate:checked"]),t("span",nt,m(W(s.name)),1)]),e[54]||(e[54]=t("div",{class:"h-8 w-8 rounded-xl bg-gray-50 flex items-center justify-center text-gray-300 group-hover/legacy:bg-primary/10 group-hover/legacy:text-primary transition-all"},[t("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h8m-8 6h16"})])],-1))],40,lt))),128))])])):y("",!0)])]),o(R,{show:V.value,onClose:e[10]||(e[10]=s=>V.value=!1),"max-width":"lg"},{default:a(()=>[t("div",at,[t("div",dt,[t("div",ut,[t("div",{class:H(["flex h-12 w-12 items-center justify-center rounded-2xl",g.value==="assign"||g.value==="move"?"bg-primary/10 text-primary":"bg-rose-50 text-rose-600"])},[g.value==="assign"?(n(),d("svg",ct,[...e[55]||(e[55]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"},null,-1)])])):g.value==="remove"?(n(),d("svg",pt,[...e[56]||(e[56]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 7a4 4 0 11-8 0 4 4 0 018 0zM9 14a6 6 0 00-6 6v1h12v-1a6 6 0 00-6-6zM21 12h-6"},null,-1)])])):(n(),d("svg",mt,[...e[57]||(e[57]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"},null,-1)])]))],2),t("div",null,[t("h3",gt,m(g.value==="assign"?"Map Authorizations":g.value==="move"?"Relocate Gates":"Strip Authorizations"),1),t("p",vt,"Targeting "+m(p.value.length)+" selected security gates.",1)])])]),t("form",{onSubmit:T(re,["prevent"]),class:"space-y-8"},[["assign","remove"].includes(g.value)?(n(),d("div",ft,[o(b,{value:"Select Target Identities (Roles)",class:"text-xs font-black uppercase tracking-widest text-primary"}),t("div",xt,[(n(!0),d(w,null,M(k.roles,s=>(n(),d("label",{key:s.id,class:H(["flex cursor-pointer items-center justify-between gap-3 rounded-[1.25rem] border border-gray-100 bg-gray-50/50 p-4 transition-all hover:border-primary/30",{"ring-2 ring-primary bg-primary/[0.02] border-primary/20":r(x).role_ids.includes(s.id)}])},[t("div",yt,[o(S,{id:"bulk-role-"+s.id,checked:r(x).role_ids,"onUpdate:checked":e[7]||(e[7]=u=>r(x).role_ids=u),value:s.id},null,8,["id","checked","value"]),t("span",bt,m(s.name),1)]),t("span",ht,m(s.permissions_count)+" Gates ",1)],2))),128))]),o(h,{message:r(x).errors.role_ids},null,8,["message"])])):y("",!0),g.value==="move"?(n(),d("div",kt,[o(b,{for:"bulk_target_group",value:"Target Security Module",class:"text-xs font-black uppercase tracking-widest text-primary"}),z(t("select",{id:"bulk_target_group","onUpdate:modelValue":e[8]||(e[8]=s=>r(x).permission_group_id=s),class:"block w-full border-gray-100 bg-gray-50 px-4 py-4 rounded-3xl text-sm font-bold transition-all focus:border-primary focus:bg-white focus:ring-primary",required:""},[e[58]||(e[58]=t("option",{value:"",disabled:""},"Select Target Module...",-1)),(n(!0),d(w,null,M(k.groups,s=>(n(),d("option",{key:s.id,value:s.id},m(s.name),9,wt))),128))],512),[[I,r(x).permission_group_id]]),o(h,{message:r(x).errors.permission_group_id},null,8,["message"])])):y("",!0),t("div",_t,[o(c,{variant:"secondary",type:"button",onClick:e[9]||(e[9]=s=>V.value=!1)},{default:a(()=>[...e[59]||(e[59]=[f(" Cancel ",-1)])]),_:1}),o(c,{variant:g.value==="assign"||g.value==="move"?"primary":"danger",type:"submit",processing:r(x).processing,class:"min-w-[140px]"},{default:a(()=>[f(m(g.value==="assign"?"Confirm Logic":g.value==="move"?"Relocate Gates":"Revoke Access"),1)]),_:1},8,["variant","processing"])])],32)])]),_:1},8,["show"]),o(R,{show:C.value,onClose:e[15]||(e[15]=s=>C.value=!1),"max-width":"lg"},{default:a(()=>[t("div",Ct,[t("div",Mt,[t("div",null,[t("h3",At,m(A.value?"Refine Module":"Initialize Module"),1),e[60]||(e[60]=t("p",{class:"mt-1 text-sm text-gray-500"},"Define a logical container for related security keys.",-1))]),o(c,{variant:"ghost",size:"xs",pill:"",onClick:e[11]||(e[11]=s=>C.value=!1),class:"!px-1.5 h-8 w-8 hover:!bg-slate-100"},{icon:a(()=>[...e[61]||(e[61]=[t("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])]),_:1})]),t("form",{onSubmit:T(le,["prevent"]),class:"space-y-6"},[t("div",jt,[o(b,{for:"group_name",value:"Module Title"}),o($,{id:"group_name",modelValue:r(v).name,"onUpdate:modelValue":e[12]||(e[12]=s=>r(v).name=s),type:"text",class:"block w-full",placeholder:"e.g. Asset Intelligence",required:""},null,8,["modelValue"]),o(h,{message:r(v).errors.name},null,8,["message"])]),t("div",zt,[o(b,{for:"group_desc",value:"Purpose / Description"}),z(t("textarea",{id:"group_desc","onUpdate:modelValue":e[13]||(e[13]=s=>r(v).description=s),class:"block w-full rounded-2xl border-gray-100 bg-gray-50 px-4 py-3 text-sm transition-all focus:border-primary focus:bg-white focus:ring-primary h-32",placeholder:"Briefly describe what this module controls..."},null,512),[[N,r(v).description]]),o(h,{message:r(v).errors.description},null,8,["message"])]),t("div",St,[o(c,{variant:"secondary",type:"button",onClick:e[14]||(e[14]=s=>C.value=!1)},{default:a(()=>[...e[62]||(e[62]=[f(" Cancel ",-1)])]),_:1}),o(c,{variant:"primary",type:"submit",processing:r(v).processing},{default:a(()=>[f(m(A.value?"Synchronize":"Initialize"),1)]),_:1},8,["processing"])])],32)])]),_:1},8,["show"]),o(R,{show:j.value,onClose:e[27]||(e[27]=s=>j.value=!1),"max-width":"lg"},{default:a(()=>[t("div",Vt,[t("div",Bt,[e[64]||(e[64]=t("div",null,[t("h3",{class:"text-2xl font-black text-gray-900 uppercase tracking-tight"}," Define Security Gate "),t("p",{class:"mt-1 text-sm text-gray-500"},"Establish a new logical access key for the ERP matrix.")],-1)),t("button",{onClick:e[16]||(e[16]=s=>j.value=!1),class:"rounded-full bg-gray-50 p-2 text-gray-400 hover:text-gray-600 transition-colors"},[...e[63]||(e[63]=[t("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),t("form",{onSubmit:T(ie,["prevent"]),class:"space-y-6"},[t("div",$t,[o(b,{for:"perm_name_input",value:"Security Gate Label"}),o($,{id:"perm_name_input",modelValue:r(i).name,"onUpdate:modelValue":e[17]||(e[17]=s=>r(i).name=s),onInput:ae,type:"text",class:"block w-full",placeholder:"e.g. Bulk Asset Upload",required:"",autofocus:""},null,8,["modelValue"]),t("p",Ft,[e[65]||(e[65]=f("Key: ",-1)),t("span",Ut,m(r(i).name||"..."),1)]),o(h,{message:r(i).errors.name},null,8,["message"])]),t("div",Pt,[o(b,{for:"perm_group",value:"Module Assignment"}),z(t("select",{id:"perm_group","onUpdate:modelValue":e[18]||(e[18]=s=>r(i).permission_group_id=s),class:"block w-full border-gray-100 bg-gray-50 px-4 py-3 rounded-2xl text-sm transition-all focus:border-primary focus:bg-white focus:ring-primary",required:""},[e[66]||(e[66]=t("option",{value:"",disabled:""},"Select Module...",-1)),(n(!0),d(w,null,M(k.groups,s=>(n(),d("option",{key:s.id,value:s.id},m(s.name),9,Gt))),128))],512),[[I,r(i).permission_group_id]]),o(h,{message:r(i).errors.permission_group_id},null,8,["message"])]),t("div",Lt,[o(b,{for:"perm_desc",value:"Documentation / Scope"}),z(t("textarea",{id:"perm_desc","onUpdate:modelValue":e[19]||(e[19]=s=>r(i).description=s),class:"block w-full rounded-2xl border-gray-100 bg-gray-50 px-4 py-3 text-sm transition-all focus:border-primary focus:bg-white focus:ring-primary h-24",placeholder:"What actions does this gate permit?"},null,512),[[N,r(i).description]]),o(h,{message:r(i).errors.description},null,8,["message"])]),t("div",Dt,[o(S,{id:"perm_status",checked:r(i).status,"onUpdate:checked":e[20]||(e[20]=s=>r(i).status=s)},null,8,["checked"]),e[67]||(e[67]=t("label",{for:"perm_status",class:"text-sm font-bold text-gray-700"},"Active Status",-1))]),t("div",Ht,[t("div",Tt,[e[68]||(e[68]=t("div",null,[t("h4",{class:"text-sm font-bold text-gray-800"},"Sidebar Presentation"),t("p",{class:"text-[10px] text-gray-400 font-medium"},"Configure how this gate appears in the main navigation.")],-1)),t("div",It,[o(S,{id:"is_sidebar_item",checked:r(i).is_sidebar_item,"onUpdate:checked":e[21]||(e[21]=s=>r(i).is_sidebar_item=s)},null,8,["checked"])])]),o(J,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0 -translate-y-2","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition ease-in duration-150","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 -translate-y-2"},{default:a(()=>[r(i).is_sidebar_item?(n(),d("div",Nt,[t("div",null,[o(b,{for:"sidebar_label",value:"Navigation Label"}),o($,{id:"sidebar_label",modelValue:r(i).sidebar_label,"onUpdate:modelValue":e[22]||(e[22]=s=>r(i).sidebar_label=s),type:"text",class:"block w-full text-xs mt-1",placeholder:"e.g. Asset Registry"},null,8,["modelValue"]),o(h,{message:r(i).errors.sidebar_label},null,8,["message"])]),t("div",Rt,[t("div",null,[o(b,{for:"route_name",value:"Target Route"}),o($,{id:"route_name",modelValue:r(i).route_name,"onUpdate:modelValue":e[23]||(e[23]=s=>r(i).route_name=s),type:"text",class:"block w-full text-xs mt-1",placeholder:"e.g. assets.index"},null,8,["modelValue"]),o(h,{message:r(i).errors.route_name},null,8,["message"])]),t("div",null,[o(b,{for:"perm_icon",value:"Visual Icon Key"}),z(t("select",{id:"perm_icon","onUpdate:modelValue":e[24]||(e[24]=s=>r(i).icon=s),class:"block w-full border-gray-100 bg-white px-3 py-2 rounded-xl text-xs transition-all focus:border-primary focus:ring-primary mt-1"},[...e[69]||(e[69]=[t("option",{value:"cube"},"Cube (Assets)",-1),t("option",{value:"map-pin"},"Map Pin (Locations)",-1),t("option",{value:"office-building"},"Building",-1),t("option",{value:"users"},"Users",-1),t("option",{value:"shield-check"},"Shield",-1),t("option",{value:"lock-closed"},"Lock",-1),t("option",{value:"newspaper"},"News",-1),t("option",{value:"cog"},"Cog",-1),t("option",{value:"collection"},"Collection",-1),t("option",{value:"adjustments"},"Adjustments",-1)])],512),[[I,r(i).icon]]),o(h,{message:r(i).errors.icon},null,8,["message"])])]),t("div",null,[o(b,{for:"sort_order",value:"Sort Priority"}),z(t("input",{id:"sort_order",type:"number","onUpdate:modelValue":e[25]||(e[25]=s=>r(i).sort_order=s),class:"block w-full border-gray-100 bg-white px-3 py-2 rounded-xl text-xs transition-all focus:border-primary focus:ring-primary mt-1"},null,512),[[N,r(i).sort_order]]),o(h,{message:r(i).errors.sort_order},null,8,["message"])])])):y("",!0)]),_:1})]),t("div",qt,[o(c,{variant:"secondary",type:"button",onClick:e[26]||(e[26]=s=>j.value=!1)},{default:a(()=>[...e[70]||(e[70]=[f(" Cancel ",-1)])]),_:1}),o(c,{variant:"primary",type:"submit",processing:r(i).processing},{default:a(()=>[...e[71]||(e[71]=[f(" Establish Gate ",-1)])]),_:1},8,["processing"])])],32)])]),_:1},8,["show"])]),_:1})],64)}}};export{ts as default};
