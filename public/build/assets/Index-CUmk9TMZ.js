import{u as q,A as Q,o,c as n,a as l,b as a,h as X,w as u,d as t,f as D,v as Y,i as g,F as v,m as y,j as U,t as p,n as Z,k as b,e as ee,g as E,r as w,p as F,q as te}from"./app-CehYguHu.js";import{_ as se}from"./AuthenticatedLayout-CfY1nA_Q.js";import{_ as L}from"./TextInput-CVQfVas4.js";import{_ as h}from"./InputLabel-BdAlJ2D5.js";import{_}from"./InputError-51rjNbxD.js";import{_ as N}from"./DangerButton-DmNu9a4c.js";import{G as re}from"./GlobalCheckbox-CqgO5sP7.js";import{_ as le}from"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css                                                              */import"./SecondaryButton-C9gXAhlZ.js";const oe={class:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between"},ae={class:"py-8"},ne={class:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8"},ie={class:"mb-8 flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between bg-white p-4 rounded-2xl shadow-sm border border-gray-100"},de={class:"relative flex-1 max-w-md"},ue={class:"flex items-center gap-3"},me={class:"flex gap-2"},pe={class:"overflow-hidden rounded-2xl border border-gray-100 bg-white shadow-xl shadow-gray-200/50"},ce={key:0,class:"flex flex-col items-center justify-center p-20 text-center"},ge={class:"mt-8"},ve={key:1,class:"overflow-x-auto"},xe={class:"w-full text-left"},fe={class:"divide-y divide-gray-50"},ye={class:"px-6 py-4"},be={class:"flex items-center gap-4"},we={class:"relative"},he={class:"h-12 w-12 flex-shrink-0 overflow-hidden rounded-full border-2 border-white shadow-sm transition-transform group-hover:scale-105"},_e=["src","alt"],ke={key:1,class:"flex h-full w-full items-center justify-center bg-gradient-to-br from-primary to-primary-light text-xl font-black text-white uppercase leading-none"},Ce={class:"text-base font-bold text-gray-900 group-hover:text-primary transition-colors"},Me={class:"text-xs font-medium text-gray-400"},je={class:"px-6 py-4"},Ue={class:"flex flex-wrap gap-2"},$e={key:0,class:"text-xs italic text-gray-300"},Ae={class:"px-6 py-4"},Ve={class:"flex flex-wrap gap-1.5 max-w-xs"},Be={key:0,class:"text-xs italic text-gray-300"},ze={class:"px-6 py-4 text-right"},De={class:"flex items-center justify-end opacity-0 group-hover:opacity-100 transition-opacity gap-1"},Le={class:"p-8"},Se={class:"flex items-center justify-between mb-8 pb-4 border-b border-gray-100"},qe={class:"text-2xl font-black text-gray-900"},Ee={class:"grid gap-6 sm:grid-cols-2"},Fe={class:"space-y-1.5"},Ne={class:"space-y-1.5"},He={class:"space-y-1.5"},Pe={class:"border-t border-gray-50 pt-6"},Re={class:"space-y-4"},Te={class:"space-y-1.5"},Oe=["value"],Ge={class:"space-y-1.5"},Ie={class:"grid gap-3 sm:grid-cols-2 lg:grid-cols-3 bg-gray-50 p-4 rounded-xl border border-gray-100"},Je={class:"text-sm font-medium text-gray-600 group-hover:text-primary transition-colors"},Ke={key:0,class:"space-y-1.5"},We=["value"],Qe={class:"flex justify-end gap-3 mt-10"},Xe={class:"p-8 text-center"},Ye={class:"mt-3 text-sm text-gray-500 leading-relaxed"},Ze={class:"font-bold text-gray-900"},et={class:"mt-8 flex flex-col gap-3"},tt={__name:"Index",props:{users:{type:Array,required:!0},roles:{type:Array,required:!0},departments:{type:Array,required:!0}},setup(k){const H=k,P=te(),R=F(()=>P.props.auth?.permissions??[]),$=i=>R.value.includes(i),C=w(""),x=w("all"),c=w(!1),A=w(!1),V=w(!1),f=w(null),r=q({name:"",email:"",password:"",role_id:"",department_ids:[],default_department_id:null}),B=q({}),S=F(()=>{let i=H.users;const e=C.value.trim().toLowerCase();return e&&(i=i.filter(d=>d.name.toLowerCase().includes(e)||d.email.toLowerCase().includes(e))),x.value!=="all"&&(i=i.filter(d=>d.roles.includes(x.value))),i}),T=()=>{r.clearErrors(),r.reset(),c.value=!0},M=()=>{c.value=!1,r.reset()},O=()=>{r.post(route("users.store"),{onSuccess:()=>M()})},G=i=>{f.value=i,r.clearErrors(),r.name=i.name,r.email=i.email,r.password="",r.role_id=i.role_id,r.department_ids=i.department_ids,r.default_department_id=i.default_department_id,A.value=!0},j=()=>{A.value=!1,f.value=null,r.reset()},I=()=>{r.put(route("users.update",f.value.id),{onSuccess:()=>j()})},J=i=>{f.value=i,V.value=!0},z=()=>{V.value=!1,f.value=null},K=()=>{B.delete(route("users.destroy",f.value.id),{onSuccess:()=>z()})},W=i=>{const e="inline-flex items-center rounded-full px-2 py-1 text-xs font-semibold ring-1 ring-inset";switch(i.toLowerCase()){case"admin":case"super admin":return`${e} bg-red-50 text-red-700 ring-red-600/20`;case"media":return`${e} bg-purple-50 text-purple-700 ring-purple-600/20`;case"manager":return`${e} bg-blue-50 text-blue-700 ring-blue-600/20`;default:return`${e} bg-gray-50 text-gray-700 ring-gray-600/20`}};return(i,e)=>{const d=Q("AppButton");return o(),n(v,null,[l(a(X),{title:"Users Management"}),l(se,null,{header:u(()=>[t("div",oe,[e[15]||(e[15]=t("div",null,[t("h2",{class:"text-3xl font-extrabold tracking-tight text-gray-900"}," Users Console "),t("p",{class:"mt-1 text-sm text-gray-500"}," Manage organizational access, roles, and department permissions. ")],-1)),$("user-create")?(o(),U(d,{key:0,variant:"primary",onClick:T},{icon:u(()=>[...e[13]||(e[13]=[t("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1)])]),default:u(()=>[e[14]||(e[14]=g(" New User ",-1))]),_:1})):b("",!0)])]),default:u(()=>[t("div",ae,[t("div",ne,[t("div",ie,[t("div",de,[e[16]||(e[16]=t("div",{class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3"},[t("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1)),D(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>C.value=s),type:"text",class:"block w-full rounded-xl border-gray-200 bg-gray-50/50 pl-10 text-sm transition-all focus:border-primary focus:bg-white focus:ring-primary shadow-sm",placeholder:"Search by name or email..."},null,512),[[Y,C.value]])]),t("div",ue,[e[18]||(e[18]=t("span",{class:"text-xs font-bold uppercase tracking-wider text-gray-400"},"Filter By Role:",-1)),t("div",me,[l(d,{onClick:e[1]||(e[1]=s=>x.value="all"),variant:x.value==="all"?"primary":"secondary",size:"xs",class:"!px-4"},{default:u(()=>[...e[17]||(e[17]=[g(" All ",-1)])]),_:1},8,["variant"]),(o(!0),n(v,null,y(k.roles,s=>(o(),U(d,{key:s.id,onClick:m=>x.value=s.name,variant:x.value===s.name?"primary":"secondary",size:"xs",class:"!px-4"},{default:u(()=>[g(p(s.name),1)]),_:2},1032,["onClick","variant"]))),128))])])]),t("div",pe,[S.value.length===0?(o(),n("div",ce,[e[20]||(e[20]=t("div",{class:"mb-4 rounded-full bg-gray-50 p-6"},[t("svg",{class:"h-12 w-12 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})])],-1)),e[21]||(e[21]=t("h3",{class:"text-lg font-bold text-gray-900"},"No users match your criteria",-1)),e[22]||(e[22]=t("p",{class:"mx-auto mt-2 max-w-sm text-sm text-500"}," We couldn't find any users matching your current search or filter. Try a different term or create a new user. ",-1)),t("div",ge,[l(d,{variant:"secondary",onClick:e[2]||(e[2]=s=>{C.value="",x.value="all"})},{default:u(()=>[...e[19]||(e[19]=[g(" Clear Filters ",-1)])]),_:1})])])):(o(),n("div",ve,[t("table",xe,[e[26]||(e[26]=t("thead",null,[t("tr",{class:"border-b border-gray-100 bg-gray-50/50"},[t("th",{class:"px-6 py-4 text-xs font-bold uppercase tracking-wider text-gray-400"},"Profile"),t("th",{class:"px-6 py-4 text-xs font-bold uppercase tracking-wider text-gray-400"},"Role"),t("th",{class:"px-6 py-4 text-xs font-bold uppercase tracking-wider text-gray-400"},"Departments"),t("th",{class:"px-6 py-4 text-right text-xs font-bold uppercase tracking-wider text-gray-400"},"Command")])],-1)),t("tbody",fe,[(o(!0),n(v,null,y(S.value,s=>(o(),n("tr",{key:s.id,class:"group transition-all hover:bg-gray-50/50"},[t("td",ye,[t("div",be,[t("div",we,[t("div",he,[s.image_url?(o(),n("img",{key:0,src:s.image_url,alt:s.name,class:"h-full w-full object-cover"},null,8,_e)):(o(),n("div",ke,p(s.name.charAt(0)),1))]),e[23]||(e[23]=t("div",{class:"absolute -bottom-1 -right-1 h-4 w-4 rounded-full border-2 border-white bg-green-500 shadow-sm"},null,-1))]),t("div",null,[t("div",Ce,p(s.name),1),t("div",Me,p(s.email),1)])])]),t("td",je,[t("div",Ue,[(o(!0),n(v,null,y(s.roles,m=>(o(),n("span",{key:m,class:Z(W(m))},p(m),3))),128)),s.roles.length===0?(o(),n("span",$e,"Unassigned")):b("",!0)])]),t("td",Ae,[t("div",Ve,[(o(!0),n(v,null,y(s.departments,m=>(o(),n("span",{key:m,class:"inline-flex items-center rounded-md bg-gray-100 px-2 py-0.5 text-[10px] font-bold uppercase tracking-tight text-gray-600 border border-gray-200"},p(m),1))),128)),s.departments.length===0?(o(),n("span",Be,"Universal Access")):b("",!0)])]),t("td",ze,[t("div",De,[$("user-edit")?(o(),U(d,{key:0,variant:"ghost",size:"xs",class:"!p-2 hover:!bg-white",onClick:m=>G(s),title:"Edit User"},{icon:u(()=>[...e[24]||(e[24]=[t("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])]),_:1},8,["onClick"])):b("",!0),$("user-delete")?(o(),U(d,{key:1,variant:"ghost",size:"xs",class:"!p-2 hover:!bg-white hover:!text-rose-500",onClick:m=>J(s),title:"Delete User"},{icon:u(()=>[...e[25]||(e[25]=[t("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])]),_:1},8,["onClick"])):b("",!0)])])]))),128))])])]))])])]),l(N,{show:c.value||A.value,onClose:e[12]||(e[12]=s=>c.value?M():j()),"max-width":"2xl"},{default:u(()=>[t("div",Le,[t("div",Se,[t("div",null,[t("h3",qe,p(c.value?"Create New User":"Edit User Profile"),1),e[27]||(e[27]=t("p",{class:"text-sm text-gray-500 mt-1"},"Fill in the details below to manage organization access.",-1))]),l(d,{variant:"ghost",size:"xs",pill:"",onClick:e[3]||(e[3]=s=>c.value?M():j()),class:"!px-1.5 h-8 w-8 hover:!bg-slate-100"},{icon:u(()=>[...e[28]||(e[28]=[t("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])]),_:1})]),t("form",{onSubmit:e[11]||(e[11]=ee(s=>c.value?O():I(),["prevent"])),class:"space-y-6"},[t("div",Ee,[t("div",Fe,[l(h,{for:"name",value:"Full Name"}),l(L,{id:"name",type:"text",modelValue:a(r).name,"onUpdate:modelValue":e[4]||(e[4]=s=>a(r).name=s),class:"w-full",placeholder:"John Doe",required:""},null,8,["modelValue"]),l(_,{message:a(r).errors.name},null,8,["message"])]),t("div",Ne,[l(h,{for:"email",value:"Email Address"}),l(L,{id:"email",type:"email",modelValue:a(r).email,"onUpdate:modelValue":e[5]||(e[5]=s=>a(r).email=s),class:"w-full",placeholder:"john@university.edu",required:""},null,8,["modelValue"]),l(_,{message:a(r).errors.email},null,8,["message"])])]),t("div",He,[l(h,{for:"password",value:c.value?"Password":"New Password (Leave blank to keep current)"},null,8,["value"]),l(L,{id:"password",type:"password",modelValue:a(r).password,"onUpdate:modelValue":e[6]||(e[6]=s=>a(r).password=s),class:"w-full",required:c.value},null,8,["modelValue","required"]),l(_,{message:a(r).errors.password},null,8,["message"])]),t("div",Pe,[e[32]||(e[32]=t("h4",{class:"text-sm font-bold uppercase tracking-widest text-gray-400 mb-4"},"Access Control",-1)),t("div",Re,[t("div",Te,[l(h,{for:"role_id",value:"System Role"}),D(t("select",{id:"role_id","onUpdate:modelValue":e[7]||(e[7]=s=>a(r).role_id=s),class:"w-full rounded-xl border-gray-200 bg-gray-50 text-sm focus:border-primary focus:ring-primary shadow-sm",required:""},[e[29]||(e[29]=t("option",{value:"",disabled:""},"Select a role",-1)),(o(!0),n(v,null,y(k.roles,s=>(o(),n("option",{key:s.id,value:s.id},p(s.name),9,Oe))),128))],512),[[E,a(r).role_id]]),l(_,{message:a(r).errors.role_id},null,8,["message"])]),t("div",Ge,[l(h,{value:"Assigned Departments"}),t("div",Ie,[(o(!0),n(v,null,y(k.departments,s=>(o(),n("label",{key:s.id,class:"flex items-center gap-3 cursor-pointer group"},[l(re,{id:"dept-"+s.id,value:s.id,checked:a(r).department_ids,"onUpdate:checked":e[8]||(e[8]=m=>a(r).department_ids=m)},null,8,["id","value","checked"]),t("span",Je,p(s.name),1)]))),128))]),l(_,{message:a(r).errors.department_ids},null,8,["message"])]),a(r).department_ids.length>1?(o(),n("div",Ke,[l(h,{for:"default_department_id",value:"Default Department"}),D(t("select",{id:"default_department_id","onUpdate:modelValue":e[9]||(e[9]=s=>a(r).default_department_id=s),class:"w-full rounded-xl border-gray-200 bg-gray-50 text-sm focus:border-primary focus:ring-primary shadow-sm"},[e[30]||(e[30]=t("option",{value:null},"Select default department",-1)),(o(!0),n(v,null,y(a(r).department_ids,s=>(o(),n("option",{key:s,value:s},p(k.departments.find(m=>m.id===s)?.name),9,We))),128))],512),[[E,a(r).default_department_id]]),l(_,{message:a(r).errors.default_department_id},null,8,["message"]),e[31]||(e[31]=t("p",{class:"text-[10px] text-gray-400"},"The department context loaded by default upon login.",-1))])):b("",!0)])]),t("div",Qe,[l(d,{variant:"secondary",onClick:e[10]||(e[10]=s=>c.value?M():j()),disabled:a(r).processing},{default:u(()=>[...e[33]||(e[33]=[g(" Cancel ",-1)])]),_:1},8,["disabled"]),l(d,{type:"submit",variant:"primary",processing:a(r).processing},{default:u(()=>[g(p(c.value?"Create Account":"Save Changes"),1)]),_:1},8,["processing"])])],32)])]),_:1},8,["show"]),l(N,{show:V.value,onClose:z,"max-width":"md"},{default:u(()=>[t("div",Xe,[e[38]||(e[38]=t("div",{class:"mx-auto flex h-16 w-16 items-center justify-center rounded-full bg-red-100 mb-6"},[t("svg",{class:"h-10 w-10 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])],-1)),e[39]||(e[39]=t("h3",{class:"text-2xl font-black text-gray-900"},"Remove Account?",-1)),t("p",Ye,[e[34]||(e[34]=g(" Are you sure you want to delete ",-1)),t("span",Ze,p(f.value?.name),1),e[35]||(e[35]=g("? This action cannot be undone and will revoke all access immediately. ",-1))]),t("div",et,[l(d,{variant:"danger",class:"w-full justify-center py-3",onClick:K,processing:a(B).processing},{default:u(()=>[...e[36]||(e[36]=[g(" Confirm Deletion ",-1)])]),_:1},8,["processing"]),l(d,{variant:"secondary",class:"w-full justify-center py-3",onClick:z,disabled:a(B).processing},{default:u(()=>[...e[37]||(e[37]=[g(" Keep Account ",-1)])]),_:1},8,["disabled"])])])]),_:1},8,["show"])]),_:1})],64)}}},pt=le(tt,[["__scopeId","data-v-eb3d3e80"]]);export{pt as default};
