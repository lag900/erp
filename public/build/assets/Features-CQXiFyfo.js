import{r as _,u as q,y as L,o as n,c as d,a as u,b as m,h as N,w as g,d as s,F as f,m as b,n as y,t as c,j as P,i as S,k as h,p as v,q as $}from"./app-BX5kK8gL.js";import{_ as A}from"./AuthenticatedLayout-WTG0r7J_.js";import{P as U}from"./PrimaryButton-C8C6_QA7.js";import{_ as G}from"./TextInput-D8M23_PG.js";import{G as z}from"./GlobalCheckbox-Bkg5O3-I.js";/* empty css                                                              */import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./DangerButton-Doqh3QbT.js";import"./SecondaryButton-CW323Hov.js";const E={class:"py-6"},I={class:"mx-auto max-w-7xl sm:px-6 lg:px-8"},M={class:"grid gap-6 lg:grid-cols-[320px,1fr]"},O={class:"rounded bg-white p-4 shadow"},T={class:"mt-4 space-y-2"},H=["onClick"],J={class:"rounded bg-white p-6 shadow"},K={class:"flex items-center justify-between"},Q={class:"mt-6 grid gap-4 sm:grid-cols-2"},R={class:"text-sm font-semibold text-gray-800"},W={class:"text-[9px] font-black uppercase text-gray-400 tracking-widest leading-none"},X={class:"flex items-center gap-3"},Y={key:0,class:"mt-4 text-sm text-gray-500"},de={__name:"Features",props:{departments:{type:Array,required:!0},features:{type:Array,required:!0},departmentFeatures:{type:Object,required:!0}},setup(k){const r=k,p=_(""),w=$(),F=v(()=>w.props.auth?.permissions??[]),C=a=>F.value.includes(a),o=_(r.departments[0]?.id||null),D=v(()=>{const a=p.value.trim().toLowerCase();return a?r.departments.filter(e=>e.name.toLowerCase().includes(a)):r.departments}),x=a=>{const e=r.departmentFeatures?.[a]||{};return r.features.map(t=>({id:t.id,is_enabled:!!e[t.id]}))},i=q({features:x(o.value)}),V=a=>{o.value=a};L(o,a=>{i.features=x(a)});const B=a=>{i.features=i.features.map(e=>e.id===a?{...e,is_enabled:!e.is_enabled}:e)},j=()=>{o.value&&i.put(route("departments.features.update",o.value))};return(a,e)=>(n(),d(f,null,[u(m(N),{title:"Department Features"}),u(A,null,{header:g(()=>[...e[1]||(e[1]=[s("h2",{class:"text-xl font-semibold leading-tight text-gray-800"}," Department Features ",-1)])]),default:g(()=>[s("div",E,[s("div",I,[s("div",M,[s("div",O,[e[2]||(e[2]=s("p",{class:"text-sm font-semibold text-gray-700"},"Departments",-1)),u(G,{modelValue:p.value,"onUpdate:modelValue":e[0]||(e[0]=t=>p.value=t),type:"text",class:"mt-3 block w-full",placeholder:"Search departments..."},null,8,["modelValue"]),s("div",T,[(n(!0),d(f,null,b(D.value,t=>(n(),d("button",{key:t.id,type:"button",class:y(["w-full rounded border px-3 py-2 text-left text-sm transition",[t.id===o.value?"border-indigo-500 bg-indigo-50 text-indigo-700":"border-gray-200 bg-white text-gray-700 hover:bg-gray-50"]]),onClick:l=>V(t.id)},c(t.name),11,H))),128))])]),s("div",J,[s("div",K,[e[4]||(e[4]=s("h3",{class:"text-lg font-semibold text-gray-800"}," Features ",-1)),C("feature-toggle")?(n(),P(U,{key:0,disabled:m(i).processing,onClick:j},{default:g(()=>[...e[3]||(e[3]=[S(" Save Changes ",-1)])]),_:1},8,["disabled"])):h("",!0)]),s("div",Q,[(n(!0),d(f,null,b(m(i).features,t=>(n(),d("div",{key:t.id,class:"flex items-center justify-between rounded border border-gray-200 p-4"},[s("div",null,[s("p",R,c(r.features.find(l=>l.id===t.id)?.name),1),s("p",W,c(r.features.find(l=>l.id===t.id)?.key),1)]),s("div",X,[s("span",{class:y(["text-[10px] font-bold uppercase tracking-tight",t.is_enabled?"text-primary":"text-gray-400"])},c(t.is_enabled?"Active":"Locked"),3),u(z,{id:"feature-"+t.id,checked:t.is_enabled,"onUpdate:checked":l=>B(t.id)},null,8,["id","checked","onUpdate:checked"])])]))),128))]),o.value?h("",!0):(n(),d("p",Y," Select a department first. "))])])])])]),_:1})],64))}};export{de as default};
