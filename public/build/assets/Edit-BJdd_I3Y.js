import{u as C,o as d,c as u,a as i,b as o,h as B,w as l,d as e,e as L,i as m,k as p,f as M,v as _,t as y,l as h,j,F as V,p as $,q as D}from"./app-BX5kK8gL.js";import{_ as P}from"./AuthenticatedLayout-WTG0r7J_.js";import{P as F}from"./PrimaryButton-C8C6_QA7.js";import{_ as N}from"./TextInput-D8M23_PG.js";import{_ as f}from"./InputLabel-BWg1fGz9.js";import{_ as g}from"./InputError-C8hi-McE.js";import{_ as S}from"./EntityImage-CygV1fDR.js";import{i as T}from"./browser-image-compression-DILJcqf6.js";/* empty css                                                              */import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./DangerButton-Doqh3QbT.js";import"./SecondaryButton-CW323Hov.js";const U={class:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between"},E={class:"flex items-center gap-3"},I={class:"py-8"},z={class:"mx-auto max-w-3xl sm:px-6 lg:px-8"},G={class:"border-b border-slate-100 bg-slate-50/50 px-8 py-6 flex items-center justify-between"},W={class:"p-6 grid gap-6"},q={class:"mt-2 flex gap-6"},A={class:"shrink-0 relative"},H={class:"grow rounded-lg border border-dashed border-gray-900/25 px-6 py-10"},O={class:"text-center"},J={class:"mt-4 flex text-sm leading-6 text-gray-600 justify-center"},Q={for:"image",class:"relative cursor-pointer rounded-md bg-white font-semibold text-primary focus-within:outline-none focus-within:ring-2 focus-within:ring-primary focus-within:ring-offset-2 hover:text-indigo-500"},R={key:0,class:"mt-2 text-sm font-semibold text-green-600"},K={class:"bg-gray-50 px-6 py-4 flex items-center justify-end gap-3 border-t border-gray-100"},de={__name:"Edit",props:{location:{type:Object,required:!0}},setup(a){const x=a,w=D(),b=$(()=>w.props.auth?.permissions??[]),v=r=>b.value.includes(r),s=C({_method:"PUT",name:x.location.name,description:x.location.description??"",image:null}),k=async r=>{const t=r.target.files[0];if(!t)return;const n={maxSizeMB:1,maxWidthOrHeight:1920,useWebWorker:!0,initialQuality:.8};try{const c=await T(t,n);s.image=c}catch(c){console.error("Image compression failed:",c),s.image=t}};return(r,t)=>(d(),u(V,null,[i(o(B),{title:"Edit Location"}),i(P,null,{header:l(()=>[e("div",U,[t[5]||(t[5]=e("div",null,[e("h2",{class:"text-2xl font-bold leading-tight text-gray-800"}," Edit Location "),e("p",{class:"mt-1 text-sm text-gray-500"}," Update location information and spatial visuals. ")],-1)),e("div",E,[i(o(h),{href:r.route("locations.index"),class:"inline-flex items-center rounded-lg border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 shadow-sm transition-colors hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2"},{default:l(()=>[...t[4]||(t[4]=[e("svg",{class:"mr-2 -ml-1 h-4 w-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),m(" Back to Locations ",-1)])]),_:1},8,["href"])])])]),default:l(()=>[e("div",I,[e("div",z,[e("form",{class:"overflow-hidden rounded-[32px] border border-slate-200 bg-white shadow-premium",onSubmit:t[3]||(t[3]=L(n=>o(s).post(r.route("locations.update",a.location.id),{forceFormData:!0,onSuccess:()=>r.window.showToast("success","Location updated successfully.")}),["prevent"]))},[e("div",G,[t[7]||(t[7]=e("div",null,[e("h3",{class:"text-xl font-bold text-slate-800 tracking-tight"},"Location Profile"),e("p",{class:"text-[13px] font-medium text-slate-400"},"Manage spatial details and identifiers.")],-1)),v("location-delete")?(d(),u("button",{key:0,type:"button",class:"inline-flex items-center rounded-xl bg-rose-50 px-4 py-2 text-xs font-bold text-rose-600 border border-rose-100 transition-all hover:bg-rose-100 hover:scale-105 active:scale-95",onClick:t[0]||(t[0]=n=>r.window.showConfirm({title:"Decommission Location?",message:`Are you sure you want to decommission ${a.location.name}? This will affect all mapping associated with this premise.`,confirmText:"Decommission",onConfirm:()=>r.$inertia.delete(r.route("locations.destroy",a.location.id))}))},[...t[6]||(t[6]=[e("svg",{class:"-ml-1 mr-2 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2.5",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),m(" Decommission ",-1)])])):p("",!0)]),e("div",W,[e("div",null,[i(f,{for:"name",value:"Location Name"}),i(N,{id:"name",modelValue:o(s).name,"onUpdate:modelValue":t[1]||(t[1]=n=>o(s).name=n),class:"mt-1 block w-full"},null,8,["modelValue"]),i(g,{class:"mt-2",message:o(s).errors.name},null,8,["message"])]),e("div",null,[i(f,{for:"description",value:"Description"}),M(e("textarea",{id:"description","onUpdate:modelValue":t[2]||(t[2]=n=>o(s).description=n),rows:"3",class:"mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:border-primary focus:ring-primary sm:text-sm"},null,512),[[_,o(s).description]]),i(g,{class:"mt-2",message:o(s).errors.description},null,8,["message"])]),e("div",null,[i(f,{for:"image",value:"Location Image"}),e("div",q,[e("div",A,[i(S,{src:a.location.image_url,alt:a.location.name,type:"location",class:"h-24 w-24 rounded-lg border border-gray-200"},null,8,["src","alt"]),t[8]||(t[8]=e("p",{class:"mt-1 text-center text-xs text-gray-500"},"Current",-1))]),e("div",H,[e("div",O,[t[10]||(t[10]=e("svg",{class:"mx-auto h-12 w-12 text-gray-300",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0zM15 11a3 3 0 11-6 0 3 3 0 016 0z"})],-1)),e("div",J,[e("label",Q,[e("span",null,y(a.location.image_url?"Replace image":"Upload a file"),1),e("input",{id:"image",type:"file",accept:"image/*",capture:"environment",class:"sr-only",onChange:k},null,32)]),t[9]||(t[9]=e("p",{class:"pl-1"},"or drag and drop",-1))]),t[11]||(t[11]=e("p",{class:"text-xs leading-5 text-gray-600"},"PNG, JPG, GIF up to 2MB",-1)),o(s).image?(d(),u("p",R," Selected: "+y(o(s).image.name),1)):p("",!0)])])]),i(g,{class:"mt-2",message:o(s).errors.image},null,8,["message"])])]),e("div",K,[i(o(h),{href:r.route("locations.index"),class:"text-sm font-medium text-gray-600 hover:text-gray-900"},{default:l(()=>[...t[12]||(t[12]=[m(" Cancel ",-1)])]),_:1},8,["href"]),v("location-edit")?(d(),j(F,{key:0,disabled:o(s).processing},{default:l(()=>[...t[13]||(t[13]=[e("svg",{class:"mr-2 -ml-1 h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1),m(" Save Changes ",-1)])]),_:1},8,["disabled"])):p("",!0)])],32)])])]),_:1})],64))}};export{de as default};
