import{u as e,o as a,a as s,k as r,m as t,p as o,w as i,b as l,q as n,s as d,F as m,z as u,t as c,x as g,d as p,l as f,e as h,c as x,g as v,A as y}from"./vendor-DGI0tb4d.js";import{_ as b}from"./AuthenticatedLayout-DmLSy_bE.js";import{P as _}from"./PrimaryButton-CXxvsKbC.js";import{_ as w}from"./TextInput-7Tb4wL4u.js";import{_ as k}from"./InputLabel-ttg1gjZN.js";import{_ as j}from"./InputError-CSjO0CYp.js";import{G as B}from"./GlobalCheckbox-BSagvGQB.js";import{i as C}from"./browser-image-compression-Dr3HYh3O.js";import"./utils-B98O4e5m.js";/* empty css                                                              */import"./_plugin-vue_export-helper-BCo6x5W8.js";import"./DangerButton-Bzsvvehx.js";import"./SecondaryButton-DsdD6xme.js";const V={class:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between"},M={class:"py-8"},A={class:"mx-auto max-w-3xl sm:px-6 lg:px-8"},S={class:"p-6 grid gap-6 sm:grid-cols-2"},G={class:"sm:col-span-2"},I={class:"relative mt-1"},P=["value"],U={class:"sm:col-span-2 flex items-center gap-2"},q={class:"sm:col-span-2"},L={class:"mt-2 flex justify-center rounded-lg border border-dashed border-gray-900/25 px-6 py-10"},D={class:"text-center"},E={class:"mt-4 flex text-sm leading-6 text-gray-600 justify-center"},F={for:"image",class:"relative cursor-pointer rounded-md bg-white font-semibold text-primary focus-within:outline-none focus-within:ring-2 focus-within:ring-primary focus-within:ring-offset-2 hover:text-indigo-500"},H={key:0,class:"mt-2 text-sm font-semibold text-green-600"},N={class:"bg-gray-50 px-6 py-4 flex items-center justify-end gap-3 border-t border-gray-100"},O={__name:"Create",props:{locations:{type:Array,required:!0}},setup(O){const T=y(),W=v(()=>T.props.auth?.permissions??[]),z=e({location_id:"",name_en:"",name_ar:"",is_shared:!1,image:null}),R=async e=>{const a=e.target.files[0];if(!a)return;const s={maxSizeMB:1,maxWidthOrHeight:1920,useWebWorker:!0,initialQuality:.8};try{const e=await C(a,s);z.image=e}catch(r){z.image=a}};return(e,v)=>(a(),s(m,null,[r(t(o),{title:"Add Building"}),r(b,null,{header:i(()=>[l("div",V,[v[6]||(v[6]=l("div",null,[l("h2",{class:"text-2xl font-bold leading-tight text-gray-800"}," Create Building "),l("p",{class:"mt-1 text-sm text-gray-500"}," Register a new building under a specific university location. ")],-1)),r(t(f),{href:e.route("buildings.index"),class:"inline-flex items-center rounded-lg border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 shadow-sm transition-colors hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2"},{default:i(()=>[...v[5]||(v[5]=[l("svg",{class:"mr-2 -ml-1 h-4 w-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),h(" Back to Buildings ",-1)])]),_:1},8,["href"])])]),default:i(()=>{return[l("div",M,[l("div",A,[l("form",{class:"overflow-hidden rounded-xl border border-gray-200 bg-white shadow-soft",onSubmit:v[4]||(v[4]=n(a=>t(z).post(e.route("buildings.store"),{forceFormData:!0}),["prevent"]))},[v[15]||(v[15]=l("div",{class:"border-b border-gray-100 bg-gray-50 px-6 py-4"},[l("h3",{class:"text-lg font-semibold text-gray-900"},"Building Details"),l("p",{class:"text-sm text-gray-500"},"Provide the necessary information to identify the building.")],-1)),l("div",S,[l("div",G,[r(k,{for:"location_id",value:"Location"}),l("div",I,[d(l("select",{id:"location_id","onUpdate:modelValue":v[0]||(v[0]=e=>t(z).location_id=e),class:"block w-full appearance-none rounded-lg border-gray-300 bg-white py-2 pl-3 pr-10 text-sm shadow-sm focus:border-primary focus:outline-none focus:ring-primary"},[v[7]||(v[7]=l("option",{value:"",disabled:""},"Select a location...",-1)),(a(!0),s(m,null,u(O.locations,e=>(a(),s("option",{key:e.id,value:e.id},c(e.name),9,P))),128))],512),[[g,t(z).location_id]]),v[8]||(v[8]=l("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[l("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])],-1))]),r(j,{class:"mt-2",message:t(z).errors.location_id},null,8,["message"])]),l("div",null,[r(k,{for:"name_en",value:"English Name (Required)"}),r(w,{id:"name_en",modelValue:t(z).name_en,"onUpdate:modelValue":v[1]||(v[1]=e=>t(z).name_en=e),class:"mt-1 block w-full",placeholder:"e.g. Engineering Block A",required:""},null,8,["modelValue"]),r(j,{class:"mt-2",message:t(z).errors.name_en},null,8,["message"])]),l("div",null,[r(k,{for:"name_ar",value:"Arabic Name (Optional)"}),r(w,{id:"name_ar",modelValue:t(z).name_ar,"onUpdate:modelValue":v[2]||(v[2]=e=>t(z).name_ar=e),class:"mt-1 block w-full text-right",dir:"rtl",placeholder:"مثال: مبنى الهندسة (أ)"},null,8,["modelValue"]),r(j,{class:"mt-2",message:t(z).errors.name_ar},null,8,["message"])]),l("div",U,[r(B,{id:"is_shared",checked:t(z).is_shared,"onUpdate:checked":v[3]||(v[3]=e=>t(z).is_shared=e)},null,8,["checked"]),r(k,{for:"is_shared",value:"This is a shared building (available across all departments)"})]),l("div",q,[r(k,{for:"image",value:"Building Image (Optional)"}),l("div",L,[l("div",D,[v[11]||(v[11]=l("svg",{class:"mx-auto h-12 w-12 text-gray-300",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})],-1)),l("div",E,[l("label",F,[v[9]||(v[9]=l("span",null,"Upload a file",-1)),l("input",{id:"image",type:"file",accept:"image/*",capture:"environment",class:"sr-only",onChange:R},null,32)]),v[10]||(v[10]=l("p",{class:"pl-1"},"or drag and drop",-1))]),v[12]||(v[12]=l("p",{class:"text-xs leading-5 text-gray-600"},"PNG, JPG, GIF up to 2MB",-1)),t(z).image?(a(),s("p",H," Selected: "+c(t(z).image.name),1)):p("",!0)])]),r(j,{class:"mt-2",message:t(z).errors.image},null,8,["message"])])]),l("div",N,[r(t(f),{href:e.route("buildings.index"),class:"text-sm font-medium text-gray-600 hover:text-gray-900"},{default:i(()=>[...v[13]||(v[13]=[h(" Cancel ",-1)])]),_:1},8,["href"]),(o="building-create",W.value.includes(o)?(a(),x(_,{key:0,disabled:t(z).processing},{default:i(()=>[...v[14]||(v[14]=[l("svg",{class:"mr-2 -ml-1 h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1),h(" Save Building ",-1)])]),_:1},8,["disabled"])):p("",!0))])],32)])])];var o}),_:1})],64))}};export{O as default};
