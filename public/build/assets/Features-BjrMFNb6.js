import{y as e,u as t,C as a,o as s,a as r,k as d,m as l,p as i,w as n,b as o,F as u,z as p,n as c,t as m,c as g,e as f,d as x,g as y,A as b}from"./vendor-DGI0tb4d.js";import{_ as v}from"./AuthenticatedLayout-DmLSy_bE.js";import{P as h}from"./PrimaryButton-CXxvsKbC.js";import{_}from"./TextInput-7Tb4wL4u.js";import{G as k}from"./GlobalCheckbox-BSagvGQB.js";import"./utils-B98O4e5m.js";/* empty css                                                              */import"./_plugin-vue_export-helper-BCo6x5W8.js";import"./DangerButton-Bzsvvehx.js";import"./SecondaryButton-DsdD6xme.js";const w={class:"py-6"},j={class:"mx-auto max-w-7xl sm:px-6 lg:px-8"},C={class:"grid gap-6 lg:grid-cols-[320px,1fr]"},F={class:"rounded bg-white p-4 shadow"},A={class:"mt-4 space-y-2"},B=["onClick"],D={class:"rounded bg-white p-6 shadow"},L={class:"flex items-center justify-between"},S={class:"mt-6 grid gap-4 sm:grid-cols-2"},q={class:"text-sm font-semibold text-gray-800"},U={class:"text-[9px] font-black uppercase text-gray-400 tracking-widest leading-none"},V={class:"flex items-center gap-3"},G={key:0,class:"mt-4 text-sm text-gray-500"},P={__name:"Features",props:{departments:{type:Array,required:!0},features:{type:Array,required:!0},departmentFeatures:{type:Object,required:!0}},setup(P){const T=P,z=e(""),I=b(),O=y(()=>I.props.auth?.permissions??[]),E=e(T.departments[0]?.id||null),H=y(()=>{const e=z.value.trim().toLowerCase();return e?T.departments.filter(t=>t.name.toLowerCase().includes(e)):T.departments}),J=e=>{const t=T.departmentFeatures?.[e]||{};return T.features.map(e=>({id:e.id,is_enabled:Boolean(t[e.id])}))},K=t({features:J(E.value)});a(E,e=>{K.features=J(e)});const M=()=>{E.value&&K.put(route("departments.features.update",E.value))};return(e,t)=>(s(),r(u,null,[d(l(i),{title:"Department Features"}),d(v,null,{header:n(()=>[...t[1]||(t[1]=[o("h2",{class:"text-xl font-semibold leading-tight text-gray-800"}," Department Features ",-1)])]),default:n(()=>{return[o("div",w,[o("div",j,[o("div",C,[o("div",F,[t[2]||(t[2]=o("p",{class:"text-sm font-semibold text-gray-700"},"Departments",-1)),d(_,{modelValue:z.value,"onUpdate:modelValue":t[0]||(t[0]=e=>z.value=e),type:"text",class:"mt-3 block w-full",placeholder:"Search departments..."},null,8,["modelValue"]),o("div",A,[(s(!0),r(u,null,p(H.value,e=>(s(),r("button",{key:e.id,type:"button",class:c(["w-full rounded border px-3 py-2 text-left text-sm transition",[e.id===E.value?"border-indigo-500 bg-indigo-50 text-indigo-700":"border-gray-200 bg-white text-gray-700 hover:bg-gray-50"]]),onClick:t=>{return a=e.id,void(E.value=a);var a}},m(e.name),11,B))),128))])]),o("div",D,[o("div",L,[t[4]||(t[4]=o("h3",{class:"text-lg font-semibold text-gray-800"}," Features ",-1)),(e="feature-toggle",O.value.includes(e)?(s(),g(h,{key:0,disabled:l(K).processing,onClick:M},{default:n(()=>[...t[3]||(t[3]=[f(" Save Changes ",-1)])]),_:1},8,["disabled"])):x("",!0))]),o("div",S,[(s(!0),r(u,null,p(l(K).features,e=>(s(),r("div",{key:e.id,class:"flex items-center justify-between rounded border border-gray-200 p-4"},[o("div",null,[o("p",q,m(T.features.find(t=>t.id===e.id)?.name),1),o("p",U,m(T.features.find(t=>t.id===e.id)?.key),1)]),o("div",V,[o("span",{class:c(["text-[10px] font-bold uppercase tracking-tight",e.is_enabled?"text-primary":"text-gray-400"])},m(e.is_enabled?"Active":"Locked"),3),d(k,{id:"feature-"+e.id,checked:e.is_enabled,"onUpdate:checked":t=>{return a=e.id,void(K.features=K.features.map(e=>e.id===a?{...e,is_enabled:!e.is_enabled}:e));var a}},null,8,["id","checked","onUpdate:checked"])])]))),128))]),E.value?x("",!0):(s(),r("p",G," Select a department first. "))])])])])];var e}),_:1})],64))}};export{P as default};
