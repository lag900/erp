import{u as e,E as a,o as s,a as t,k as r,m as l,p as o,w as n,b as i,s as d,v as u,e as c,F as p,z as m,c as g,t as v,n as x,d as y,q as f,x as h,y as b,g as w,A as k}from"./vendor-DGI0tb4d.js";import{_}from"./AuthenticatedLayout-DmLSy_bE.js";import{_ as C}from"./TextInput-7Tb4wL4u.js";import{_ as j}from"./InputLabel-ttg1gjZN.js";import{_ as A}from"./InputError-CSjO0CYp.js";import{_ as M}from"./DangerButton-Bzsvvehx.js";import{G as U}from"./GlobalCheckbox-BSagvGQB.js";import{_ as z}from"./_plugin-vue_export-helper-BCo6x5W8.js";import"./utils-B98O4e5m.js";/* empty css                                                              */import"./SecondaryButton-DsdD6xme.js";const V={class:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between"},L={class:"py-8"},B={class:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8"},S={class:"mb-8 flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between bg-white p-4 rounded-2xl shadow-sm border border-gray-100"},q={class:"relative flex-1 max-w-md"},D={class:"flex items-center gap-3"},E={class:"flex gap-2"},H={class:"overflow-hidden rounded-2xl border border-gray-100 bg-white shadow-xl shadow-gray-200/50"},F={key:0,class:"flex flex-col items-center justify-center p-20 text-center"},I={class:"mt-8"},N={key:1,class:"overflow-x-auto"},T={class:"w-full text-left"},P={class:"divide-y divide-gray-50"},R={class:"px-6 py-4"},$={class:"flex items-center gap-4"},G={class:"relative"},J={class:"h-12 w-12 flex-shrink-0 overflow-hidden rounded-full border-2 border-white shadow-sm transition-transform group-hover:scale-105"},K=["src","alt"],W={key:1,class:"flex h-full w-full items-center justify-center bg-gradient-to-br from-primary to-primary-light text-xl font-black text-white uppercase leading-none"},O={class:"text-base font-bold text-gray-900 group-hover:text-primary transition-colors"},Q={class:"text-xs font-medium text-gray-400"},X={class:"px-6 py-4"},Y={class:"flex flex-wrap gap-2"},Z={key:0,class:"text-xs italic text-gray-300"},ee={class:"px-6 py-4"},ae={class:"flex flex-wrap gap-1.5 max-w-xs"},se={key:0,class:"text-xs italic text-gray-300"},te={class:"px-6 py-4 text-right"},re={class:"flex items-center justify-end opacity-0 group-hover:opacity-100 transition-opacity gap-1"},le={class:"p-8"},oe={class:"flex items-center justify-between mb-8 pb-4 border-b border-gray-100"},ne={class:"text-2xl font-black text-gray-900"},ie={class:"grid gap-6 sm:grid-cols-2"},de={class:"space-y-1.5"},ue={class:"space-y-1.5"},ce={class:"space-y-1.5"},pe={class:"border-t border-gray-50 pt-6"},me={class:"space-y-4"},ge={class:"space-y-1.5"},ve=["value"],xe={class:"space-y-1.5"},ye={class:"grid gap-3 sm:grid-cols-2 lg:grid-cols-3 bg-gray-50 p-4 rounded-xl border border-gray-100"},fe={class:"text-sm font-medium text-gray-600 group-hover:text-primary transition-colors"},he={key:0,class:"space-y-1.5"},be=["value"],we={class:"flex justify-end gap-3 mt-10"},ke={class:"p-8 text-center"},_e={class:"mt-3 text-sm text-gray-500 leading-relaxed"},Ce={class:"font-bold text-gray-900"},je={class:"mt-8 flex flex-col gap-3"},Ae=z({__name:"Index",props:{users:{type:Array,required:!0},roles:{type:Array,required:!0},departments:{type:Array,required:!0}},setup(z){const Ae=z,Me=k(),Ue=w(()=>Me.props.auth?.permissions??[]),ze=e=>Ue.value.includes(e),Ve=b(""),Le=b("all"),Be=b(!1),Se=b(!1),qe=b(!1),De=b(null),Ee=e({name:"",email:"",password:"",role_id:"",department_ids:[],default_department_id:null}),He=e({}),Fe=w(()=>{let e=Ae.users;const a=Ve.value.trim().toLowerCase();return a&&(e=e.filter(e=>e.name.toLowerCase().includes(a)||e.email.toLowerCase().includes(a))),"all"!==Le.value&&(e=e.filter(e=>e.roles.includes(Le.value))),e}),Ie=()=>{Ee.clearErrors(),Ee.reset(),Be.value=!0},Ne=()=>{Be.value=!1,Ee.reset()},Te=()=>{Se.value=!1,De.value=null,Ee.reset()},Pe=()=>{qe.value=!1,De.value=null},Re=()=>{He.delete(route("users.destroy",De.value.id),{onSuccess:()=>Pe()})},$e=e=>{const a="inline-flex items-center rounded-full px-2 py-1 text-xs font-semibold ring-1 ring-inset";switch(e.toLowerCase()){case"admin":case"super admin":return`${a} bg-red-50 text-red-700 ring-red-600/20`;case"media":return`${a} bg-purple-50 text-purple-700 ring-purple-600/20`;case"manager":return`${a} bg-blue-50 text-blue-700 ring-blue-600/20`;default:return`${a} bg-gray-50 text-gray-700 ring-gray-600/20`}};return(e,b)=>{const w=a("AppButton");return s(),t(p,null,[r(l(o),{title:"Users Management"}),r(_,null,{header:n(()=>[i("div",V,[b[15]||(b[15]=i("div",null,[i("h2",{class:"text-3xl font-extrabold tracking-tight text-gray-900"}," Users Console "),i("p",{class:"mt-1 text-sm text-gray-500"}," Manage organizational access, roles, and department permissions. ")],-1)),ze("user-create")?(s(),g(w,{key:0,variant:"primary",onClick:Ie},{icon:n(()=>[...b[13]||(b[13]=[i("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1)])]),default:n(()=>[b[14]||(b[14]=c(" New User ",-1))]),_:1})):y("",!0)])]),default:n(()=>[i("div",L,[i("div",B,[i("div",S,[i("div",q,[b[16]||(b[16]=i("div",{class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3"},[i("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1)),d(i("input",{"onUpdate:modelValue":b[0]||(b[0]=e=>Ve.value=e),type:"text",class:"block w-full rounded-xl border-gray-200 bg-gray-50/50 pl-10 text-sm transition-all focus:border-primary focus:bg-white focus:ring-primary shadow-sm",placeholder:"Search by name or email..."},null,512),[[u,Ve.value]])]),i("div",D,[b[18]||(b[18]=i("span",{class:"text-xs font-bold uppercase tracking-wider text-gray-400"},"Filter By Role:",-1)),i("div",E,[r(w,{onClick:b[1]||(b[1]=e=>Le.value="all"),variant:"all"===Le.value?"primary":"secondary",size:"xs",class:"!px-4"},{default:n(()=>[...b[17]||(b[17]=[c(" All ",-1)])]),_:1},8,["variant"]),(s(!0),t(p,null,m(z.roles,e=>(s(),g(w,{key:e.id,onClick:a=>Le.value=e.name,variant:Le.value===e.name?"primary":"secondary",size:"xs",class:"!px-4"},{default:n(()=>[c(v(e.name),1)]),_:2},1032,["onClick","variant"]))),128))])])]),i("div",H,[0===Fe.value.length?(s(),t("div",F,[b[20]||(b[20]=i("div",{class:"mb-4 rounded-full bg-gray-50 p-6"},[i("svg",{class:"h-12 w-12 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})])],-1)),b[21]||(b[21]=i("h3",{class:"text-lg font-bold text-gray-900"},"No users match your criteria",-1)),b[22]||(b[22]=i("p",{class:"mx-auto mt-2 max-w-sm text-sm text-500"}," We couldn't find any users matching your current search or filter. Try a different term or create a new user. ",-1)),i("div",I,[r(w,{variant:"secondary",onClick:b[2]||(b[2]=e=>{Ve.value="",Le.value="all"})},{default:n(()=>[...b[19]||(b[19]=[c(" Clear Filters ",-1)])]),_:1})])])):(s(),t("div",N,[i("table",T,[b[26]||(b[26]=i("thead",null,[i("tr",{class:"border-b border-gray-100 bg-gray-50/50"},[i("th",{class:"px-6 py-4 text-xs font-bold uppercase tracking-wider text-gray-400"},"Profile"),i("th",{class:"px-6 py-4 text-xs font-bold uppercase tracking-wider text-gray-400"},"Role"),i("th",{class:"px-6 py-4 text-xs font-bold uppercase tracking-wider text-gray-400"},"Departments"),i("th",{class:"px-6 py-4 text-right text-xs font-bold uppercase tracking-wider text-gray-400"},"Command")])],-1)),i("tbody",P,[(s(!0),t(p,null,m(Fe.value,e=>(s(),t("tr",{key:e.id,class:"group transition-all hover:bg-gray-50/50"},[i("td",R,[i("div",$,[i("div",G,[i("div",J,[e.image_url?(s(),t("img",{key:0,src:e.image_url,alt:e.name,class:"h-full w-full object-cover"},null,8,K)):(s(),t("div",W,v(e.name.charAt(0)),1))]),b[23]||(b[23]=i("div",{class:"absolute -bottom-1 -right-1 h-4 w-4 rounded-full border-2 border-white bg-green-500 shadow-sm"},null,-1))]),i("div",null,[i("div",O,v(e.name),1),i("div",Q,v(e.email),1)])])]),i("td",X,[i("div",Y,[(s(!0),t(p,null,m(e.roles,e=>(s(),t("span",{key:e,class:x($e(e))},v(e),3))),128)),0===e.roles.length?(s(),t("span",Z,"Unassigned")):y("",!0)])]),i("td",ee,[i("div",ae,[(s(!0),t(p,null,m(e.departments,e=>(s(),t("span",{key:e,class:"inline-flex items-center rounded-md bg-gray-100 px-2 py-0.5 text-[10px] font-bold uppercase tracking-tight text-gray-600 border border-gray-200"},v(e),1))),128)),0===e.departments.length?(s(),t("span",se,"Universal Access")):y("",!0)])]),i("td",te,[i("div",re,[ze("user-edit")?(s(),g(w,{key:0,variant:"ghost",size:"xs",class:"!p-2 hover:!bg-white",onClick:a=>(e=>{De.value=e,Ee.clearErrors(),Ee.name=e.name,Ee.email=e.email,Ee.password="",Ee.role_id=e.role_id,Ee.department_ids=e.department_ids,Ee.default_department_id=e.default_department_id,Se.value=!0})(e),title:"Edit User"},{icon:n(()=>[...b[24]||(b[24]=[i("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])]),_:1},8,["onClick"])):y("",!0),ze("user-delete")?(s(),g(w,{key:1,variant:"ghost",size:"xs",class:"!p-2 hover:!bg-white hover:!text-rose-500",onClick:a=>(e=>{De.value=e,qe.value=!0})(e),title:"Delete User"},{icon:n(()=>[...b[25]||(b[25]=[i("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])]),_:1},8,["onClick"])):y("",!0)])])]))),128))])])]))])])]),r(M,{show:Be.value||Se.value,onClose:b[12]||(b[12]=e=>Be.value?Ne():Te()),"max-width":"2xl"},{default:n(()=>[i("div",le,[i("div",oe,[i("div",null,[i("h3",ne,v(Be.value?"Create New User":"Edit User Profile"),1),b[27]||(b[27]=i("p",{class:"text-sm text-gray-500 mt-1"},"Fill in the details below to manage organization access.",-1))]),r(w,{variant:"ghost",size:"xs",pill:"",onClick:b[3]||(b[3]=e=>Be.value?Ne():Te()),class:"!px-1.5 h-8 w-8 hover:!bg-slate-100"},{icon:n(()=>[...b[28]||(b[28]=[i("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])]),_:1})]),i("form",{onSubmit:b[11]||(b[11]=f(e=>Be.value?void Ee.post(route("users.store"),{onSuccess:()=>Ne()}):void Ee.put(route("users.update",De.value.id),{onSuccess:()=>Te()}),["prevent"])),class:"space-y-6"},[i("div",ie,[i("div",de,[r(j,{for:"name",value:"Full Name"}),r(C,{id:"name",type:"text",modelValue:l(Ee).name,"onUpdate:modelValue":b[4]||(b[4]=e=>l(Ee).name=e),class:"w-full",placeholder:"John Doe",required:""},null,8,["modelValue"]),r(A,{message:l(Ee).errors.name},null,8,["message"])]),i("div",ue,[r(j,{for:"email",value:"Email Address"}),r(C,{id:"email",type:"text",inputmode:"email",modelValue:l(Ee).email,"onUpdate:modelValue":b[5]||(b[5]=e=>l(Ee).email=e),class:"w-full",placeholder:"john@university.edu",required:""},null,8,["modelValue"]),r(A,{message:l(Ee).errors.email},null,8,["message"])])]),i("div",ce,[r(j,{for:"password",value:Be.value?"Password":"New Password (Leave blank to keep current)"},null,8,["value"]),r(C,{id:"password",type:"password",modelValue:l(Ee).password,"onUpdate:modelValue":b[6]||(b[6]=e=>l(Ee).password=e),class:"w-full",required:Be.value},null,8,["modelValue","required"]),r(A,{message:l(Ee).errors.password},null,8,["message"])]),i("div",pe,[b[32]||(b[32]=i("h4",{class:"text-sm font-bold uppercase tracking-widest text-gray-400 mb-4"},"Access Control",-1)),i("div",me,[i("div",ge,[r(j,{for:"role_id",value:"System Role"}),d(i("select",{id:"role_id","onUpdate:modelValue":b[7]||(b[7]=e=>l(Ee).role_id=e),class:"w-full rounded-xl border-gray-200 bg-gray-50 text-sm focus:border-primary focus:ring-primary shadow-sm",required:""},[b[29]||(b[29]=i("option",{value:"",disabled:""},"Select a role",-1)),(s(!0),t(p,null,m(z.roles,e=>(s(),t("option",{key:e.id,value:e.id},v(e.name),9,ve))),128))],512),[[h,l(Ee).role_id]]),r(A,{message:l(Ee).errors.role_id},null,8,["message"])]),i("div",xe,[r(j,{value:"Assigned Departments"}),i("div",ye,[(s(!0),t(p,null,m(z.departments,e=>(s(),t("label",{key:e.id,class:"flex items-center gap-3 cursor-pointer group"},[r(U,{id:"dept-"+e.id,value:e.id,checked:l(Ee).department_ids,"onUpdate:checked":b[8]||(b[8]=e=>l(Ee).department_ids=e)},null,8,["id","value","checked"]),i("span",fe,v(e.name),1)]))),128))]),r(A,{message:l(Ee).errors.department_ids},null,8,["message"])]),l(Ee).department_ids.length>1?(s(),t("div",he,[r(j,{for:"default_department_id",value:"Default Department"}),d(i("select",{id:"default_department_id","onUpdate:modelValue":b[9]||(b[9]=e=>l(Ee).default_department_id=e),class:"w-full rounded-xl border-gray-200 bg-gray-50 text-sm focus:border-primary focus:ring-primary shadow-sm"},[b[30]||(b[30]=i("option",{value:null},"Select default department",-1)),(s(!0),t(p,null,m(l(Ee).department_ids,e=>(s(),t("option",{key:e,value:e},v(z.departments.find(a=>a.id===e)?.name),9,be))),128))],512),[[h,l(Ee).default_department_id]]),r(A,{message:l(Ee).errors.default_department_id},null,8,["message"]),b[31]||(b[31]=i("p",{class:"text-[10px] text-gray-400"},"The department context loaded by default upon login.",-1))])):y("",!0)])]),i("div",we,[r(w,{variant:"secondary",onClick:b[10]||(b[10]=e=>Be.value?Ne():Te()),disabled:l(Ee).processing},{default:n(()=>[...b[33]||(b[33]=[c(" Cancel ",-1)])]),_:1},8,["disabled"]),r(w,{type:"submit",variant:"primary",processing:l(Ee).processing},{default:n(()=>[c(v(Be.value?"Create Account":"Save Changes"),1)]),_:1},8,["processing"])])],32)])]),_:1},8,["show"]),r(M,{show:qe.value,onClose:Pe,"max-width":"md"},{default:n(()=>[i("div",ke,[b[38]||(b[38]=i("div",{class:"mx-auto flex h-16 w-16 items-center justify-center rounded-full bg-red-100 mb-6"},[i("svg",{class:"h-10 w-10 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])],-1)),b[39]||(b[39]=i("h3",{class:"text-2xl font-black text-gray-900"},"Remove Account?",-1)),i("p",_e,[b[34]||(b[34]=c(" Are you sure you want to delete ",-1)),i("span",Ce,v(De.value?.name),1),b[35]||(b[35]=c("? This action cannot be undone and will revoke all access immediately. ",-1))]),i("div",je,[r(w,{variant:"danger",class:"w-full justify-center py-3",onClick:Re,processing:l(He).processing},{default:n(()=>[...b[36]||(b[36]=[c(" Confirm Deletion ",-1)])]),_:1},8,["processing"]),r(w,{variant:"secondary",class:"w-full justify-center py-3",onClick:Pe,disabled:l(He).processing},{default:n(()=>[...b[37]||(b[37]=[c(" Keep Account ",-1)])]),_:1},8,["disabled"])])])]),_:1},8,["show"])]),_:1})],64)}}},[["__scopeId","data-v-80f9d7e0"]]);export{Ae as default};
