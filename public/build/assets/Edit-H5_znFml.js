import{u as e,C as a,D as t,y as s,E as l,o,a as r,k as i,m as d,p as n,w as c,b as u,q as p,s as g,F as m,z as y,t as x,x as v,v as f,d as h,n as b,l as w,e as k,g as _}from"./vendor-DGI0tb4d.js";import{_ as V}from"./AuthenticatedLayout-odOuIOG-.js";import{P as j}from"./PrimaryButton-CXxvsKbC.js";import{_ as C}from"./SecondaryButton-DsdD6xme.js";import{_ as S}from"./TextInput-7Tb4wL4u.js";import{_ as M}from"./InputError-CSjO0CYp.js";import{S as U}from"./SearchableSelect-aRakfeG3.js";import{_ as A}from"./SmartSpecInput-C7EzbFRj.js";import{_ as T}from"./DangerButton-Bzsvvehx.js";import"./browser-image-compression-Dr3HYh3O.js";import{a as H}from"./utils-B98O4e5m.js";import{d as I}from"./debounce-DWKRusXY.js";/* empty css                                                              */import"./_plugin-vue_export-helper-BCo6x5W8.js";import"./debounce-D19TCx3D.js";const B={class:"flex items-center justify-between"},D={class:"flex items-center gap-4"},E={class:"flex flex-col"},L={class:"flex items-center gap-3 mt-0.5"},N={class:"text-[10px] text-gray-500 font-bold uppercase tracking-tight"},R={class:"text-primary font-mono tracking-normal"},O={key:0,class:"flex items-center gap-1.5 px-2 py-0.5 rounded-md bg-primary/10 border border-primary/20"},F={class:"text-[9px] font-black text-primary uppercase tracking-tighter"},P={class:"py-6"},z={class:"mx-auto max-w-5xl px-4"},q={class:"bg-white rounded-2xl border border-gray-100 shadow-sm overflow-hidden"},K={class:"p-8 grid grid-cols-1 md:grid-cols-2 gap-8"},G={class:"md:col-span-2 space-y-2"},J={class:"space-y-2"},Q=["value"],W={class:"space-y-2"},X={class:"md:col-span-2 space-y-2"},Y={class:"bg-white rounded-2xl border border-gray-100 shadow-sm overflow-hidden"},Z={class:"px-6 py-4 border-b border-gray-50 bg-gray-900 text-white flex items-center justify-between"},$={class:"p-8 space-y-8"},ee={class:"relative max-w-xl mx-auto"},ae={key:0,class:"absolute right-4 top-10"},te={key:1,class:"absolute top-full left-0 right-0 mt-2 bg-white rounded-2xl border border-gray-100 shadow-2xl z-50 p-2 overflow-hidden"},se=["onClick"],le={class:"text-xs font-bold text-gray-900 font-mono"},oe={class:"text-[10px] uppercase font-black text-gray-400 tracking-tight"},re={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ie={key:0,class:"md:col-span-2 py-12 text-center border-2 border-dashed border-gray-50 rounded-3xl"},de={class:"flex items-center gap-4"},ne={class:"text-sm font-bold text-gray-900 font-mono group-hover:text-primary transition-colors"},ce={class:"text-[10px] text-gray-400 font-black uppercase tracking-widest mt-0.5"},ue={key:0,class:"mt-1 flex flex-wrap gap-1"},pe={class:"flex items-center gap-4"},ge=["onClick"],me={class:"bg-white rounded-2xl border border-gray-100 shadow-sm overflow-hidden"},ye={class:"p-8 space-y-4"},xe=["onClick"],ve={class:"space-y-2"},fe={class:"space-y-2"},he={class:"flex items-center justify-between py-8 border-t border-gray-100"},be={class:"flex gap-4"},we={class:"p-8"},ke={class:"mb-8"},_e={class:"text-[10px] text-gray-400 font-bold uppercase tracking-widest mt-1"},Ve={class:"space-y-6"},je={class:"grid grid-cols-1 gap-6"},Ce={class:"space-y-2"},Se={class:"space-y-2"},Me={class:"space-y-1"},Ue={class:"space-y-1"},Ae={class:"space-y-2"},Te={class:"mt-10 pt-6 border-t border-gray-50 flex gap-4"},He={__name:"Edit",props:{asset:{type:Object,required:!0},rooms:{type:Array,default:()=>[]},classifications:{type:Array,default:()=>[]},categories:{type:Array,default:()=>[]},subCategories:{type:Array,default:()=>[]},departments:{type:Array,default:()=>[]}},setup(He){const Ie=He,Be=e({room_id:Ie.asset.room_id,category_id:Ie.asset.category_id,sub_category_id:Ie.asset.sub_category_id,count:Ie.asset.count??1,note:Ie.asset.note??"",status:Ie.asset.status??"active",is_shared:!!Ie.asset.is_shared,shared_department_ids:Ie.asset.shared_department_ids??[],infos:Ie.asset.infos?.length?Ie.asset.infos.map(e=>({id:e.id,key:e.key,value:e.value??"",image:null,image_url:e.image_url??null})):[{key:"",value:"",image:null,image_url:null}]}),De=s("");a(De,e=>{if(e){const[a,t]=e.split(":");Be.category_id=parseInt(a),Be.sub_category_id=t?parseInt(t):""}else Be.category_id="",Be.sub_category_id=""}),t(()=>{if(Be.category_id){const e=Ie.classifications.find(e=>e.category_id===Be.category_id&&e.sub_category_id===(Be.sub_category_id||null));e&&(De.value=e.id)}});const Ee=_(()=>Be.category_id),Le=()=>{Be.infos.push({key:"",value:"",image:null,image_url:null})},Ne=s([...Ie.asset.components||[]]),Re=s(!1),Oe=s(!1),Fe=s(""),Pe=s([]),ze=s(!1),qe=s({category_id:"",sub_category_id:"",status:"active",note:"",infos:[{key:"Serial No",value:""}]}),Ke=s("");a(Ke,e=>{if(e){const[a,t]=e.split(":");qe.value.category_id=parseInt(a),qe.value.sub_category_id=t?parseInt(t):""}else qe.value.category_id="",qe.value.sub_category_id=""});const Ge=I(async e=>{if(!e||e.length<2)Pe.value=[];else{ze.value=!0;try{const a=await H.get(route("api.assets.search"),{params:{search:e,exclude_id:Ie.asset.id}});Pe.value=a.data.filter(e=>!Ne.value.some(a=>a.id===e.id))}catch(a){}finally{ze.value=!1}}},300);a(Fe,Ge);const Je=async()=>{if(!qe.value.category_id)return void(window.showToast&&window.showToast("error","Select classification"));const e=qe.value.infos.filter(e=>e.key&&""!==e.key.trim()&&e.value&&""!==e.value.trim());Oe.value=!0;try{const a={...qe.value,infos:e},t=await H.post(route("assets.components.store",Ie.asset.id),a);Ne.value.push(t.data),Re.value=!1,Ke.value="",qe.value={category_id:"",sub_category_id:"",status:"active",note:"",infos:[{key:"Serial No",value:""}]},window.showToast&&window.showToast("success","New component registered")}catch(a){window.showToast&&window.showToast("error","Registration failed")}finally{Oe.value=!1}},Qe={active:"bg-green-50 text-green-700",maintenance:"bg-blue-50 text-blue-700",damaged:"bg-red-50 text-red-700",retired:"bg-gray-50 text-gray-500"};return(e,a)=>{const t=l("InputLabel");return o(),r(m,null,[i(d(n),{title:"Edit Hardware System"}),i(V,null,{header:c(()=>[u("div",B,[u("div",D,[i(d(w),{href:e.route("assets.show",He.asset.id),class:"flex h-10 w-10 items-center justify-center rounded-xl border border-gray-200 bg-white text-gray-400 transition-all hover:bg-gray-50 hover:text-primary shadow-soft"},{default:c(()=>[...a[12]||(a[12]=[u("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[u("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])]),_:1},8,["href"]),u("div",E,[a[14]||(a[14]=u("h2",{class:"text-xl font-bold text-gray-900"},"Modify Hardware System",-1)),u("div",L,[u("p",N,[a[13]||(a[13]=k("Enterprise Index: ",-1)),u("span",R,x(He.asset.asset_code),1)]),He.asset.bundle_serial?(o(),r("div",O,[u("span",F,"Serial: "+x(He.asset.bundle_serial),1)])):h("",!0)])])])])]),default:c(()=>[u("div",P,[u("div",z,[u("form",{onSubmit:a[6]||(a[6]=p(a=>d(Be).transform(e=>({...e,_method:"put"})).post(e.route("assets.update",He.asset.id),{forceFormData:!0}),["prevent"])),class:"space-y-6"},[u("div",q,[a[17]||(a[17]=u("div",{class:"px-6 py-4 border-b border-gray-50 bg-gray-50/20"},[u("h3",{class:"text-[10px] font-black uppercase tracking-widest text-gray-400"},"Environment & Custody")],-1)),u("div",K,[u("div",G,[i(U,{modelValue:De.value,"onUpdate:modelValue":a[0]||(a[0]=e=>De.value=e),options:He.classifications,label:"Asset Classification",placeholder:"Search classification (e.g. Computers - DELL)",class:"w-full"},null,8,["modelValue","options"]),i(M,{message:d(Be).errors.category_id},null,8,["message"]),i(M,{message:d(Be).errors.sub_category_id},null,8,["message"])]),u("div",J,[i(t,{for:"room_id",value:"Stationed Room",class:"!text-[9px] !font-black !uppercase !text-gray-400"}),g(u("select",{id:"room_id","onUpdate:modelValue":a[1]||(a[1]=e=>d(Be).room_id=e),class:"w-full h-12 rounded-xl border-gray-100 bg-gray-50 text-sm focus:bg-white transition-all"},[a[15]||(a[15]=u("option",{value:"",disabled:""},"Choose Placement",-1)),(o(!0),r(m,null,y(He.rooms,e=>(o(),r("option",{key:e.id,value:e.id},x(e.label),9,Q))),128))],512),[[v,d(Be).room_id]]),i(M,{message:d(Be).errors.room_id},null,8,["message"])]),u("div",W,[i(t,{for:"status",value:"Operational Health",class:"!text-[9px] !font-black !uppercase !text-gray-400"}),g(u("select",{id:"status","onUpdate:modelValue":a[2]||(a[2]=e=>d(Be).status=e),class:"w-full h-12 rounded-xl border-gray-100 bg-gray-50 text-sm focus:bg-white transition-all"},[...a[16]||(a[16]=[u("option",{value:"active"},"Operational (Active)",-1),u("option",{value:"maintenance"},"Under Service",-1),u("option",{value:"damaged"},"Faulty / Broken",-1),u("option",{value:"retired"},"Out of Service",-1)])],512),[[v,d(Be).status]])]),u("div",X,[i(t,{for:"note",value:"Administrative Remarks",class:"!text-[9px] !font-black !uppercase !text-gray-400"}),g(u("textarea",{id:"note","onUpdate:modelValue":a[3]||(a[3]=e=>d(Be).note=e),rows:"2",class:"w-full rounded-xl border-gray-100 bg-gray-50 text-sm focus:bg-white transition-all p-4",placeholder:"Provide context for registry changes..."},null,512),[[f,d(Be).note]])])])]),u("div",Y,[u("div",Z,[a[18]||(a[18]=u("div",null,[u("h3",{class:"text-xs font-black uppercase tracking-widest text-white/70"},"Hardware System Composition"),u("p",{class:"text-[9px] font-bold text-primary uppercase mt-0.5"},"Manage sub-items linked to this serial")],-1)),u("button",{type:"button",onClick:a[4]||(a[4]=e=>Re.value=!0),class:"text-[10px] font-black uppercase tracking-widest px-4 py-2 bg-primary rounded-xl text-white shadow-lg active:scale-95 transition-all"},"+ Register New Item")]),u("div",$,[u("div",ee,[i(t,{value:"Attach Existing Hardware",class:"text-center !text-[9px] !font-black !uppercase !text-gray-400 !mb-3"}),i(S,{modelValue:Fe.value,"onUpdate:modelValue":a[5]||(a[5]=e=>Fe.value=e),type:"text",placeholder:"Search Serial or Label to link...",class:"w-full !h-12 !bg-gray-50 !border-gray-100 !rounded-xl text-center !text-sm"},null,8,["modelValue"]),ze.value?(o(),r("div",ae,[...a[19]||(a[19]=[u("svg",{class:"h-4 w-4 animate-spin text-primary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[u("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1)])])):h("",!0),Pe.value.length>0?(o(),r("div",te,[(o(!0),r(m,null,y(Pe.value,e=>(o(),r("button",{key:e.id,type:"button",onClick:a=>(async e=>{try{await H.post(route("assets.attach",Ie.asset.id),{child_id:e.id}),Ne.value.push({id:e.id,asset_code:e.asset_code,name:e.name,status:"active"}),Fe.value="",Pe.value=[],window.showToast&&window.showToast("success","Hardware attached")}catch(a){window.showToast&&window.showToast("error","Failed to attach")}})(e),class:"flex w-full items-center justify-between p-4 rounded-xl hover:bg-gray-50 transition-colors text-left group"},[u("div",null,[u("p",le,x(e.asset_code),1),u("p",oe,x(e.name),1)]),a[20]||(a[20]=u("span",{class:"text-[10px] font-black text-primary uppercase opacity-0 group-hover:opacity-100"},"Attach +",-1))],8,se))),128))])):h("",!0)]),u("div",re,[0===Ne.value.length?(o(),r("div",ie,[...a[21]||(a[21]=[u("div",{class:"inline-flex h-12 w-12 items-center justify-center rounded-2xl bg-gray-50 text-gray-300 mb-4"},[u("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[u("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})])],-1),u("p",{class:"text-sm text-gray-400 font-medium italic"},"Standalone system. No peripheral hardware attached.",-1)])])):h("",!0),(o(!0),r(m,null,y(Ne.value,e=>(o(),r("div",{key:e.id,class:"p-5 rounded-2xl border border-gray-50 bg-gray-50/30 flex items-center justify-between group hover:bg-white hover:shadow-soft transition-all"},[u("div",de,[a[22]||(a[22]=u("div",{class:"h-12 w-12 rounded-xl bg-white shadow-sm flex items-center justify-center text-gray-300"},[u("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[u("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z"})])],-1)),u("div",null,[u("p",ne,x(e.asset_code||"NO-CODE"),1),u("p",ce,x(e.name||"Missing Name"),1),e.infos&&e.infos.length?(o(),r("div",ue,[(o(!0),r(m,null,y(e.infos,e=>(o(),r("span",{key:e.key,class:"inline-flex items-center px-1.5 py-0.5 rounded-full text-[8px] font-medium bg-gray-100 text-gray-500"},x(e.key||"Missing")+": "+x(e.value||"Data"),1))),128))])):h("",!0)])]),u("div",pe,[u("span",{class:b(["px-2.5 py-1 rounded-lg text-[9px] font-black uppercase",Qe[e.status]||"bg-gray-100"])},x(e.status),3),u("button",{type:"button",onClick:a=>(async e=>{try{await H.delete(route("assets.detach",Ie.asset.id),{data:{child_id:e}}),Ne.value=Ne.value.filter(a=>a.id!==e),window.showToast&&window.showToast("success","Hardware detached")}catch(a){window.showToast&&window.showToast("error","Failed to detach")}})(e.id),class:"p-2 rounded-xl text-gray-300 hover:text-red-500 hover:bg-red-50 transition-all opacity-0 group-hover:opacity-100"},[...a[23]||(a[23]=[u("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[u("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,ge)])]))),128))])])]),u("div",me,[u("div",{class:"px-6 py-4 border-b border-gray-50 bg-gray-50/20 flex items-center justify-between"},[a[24]||(a[24]=u("h3",{class:"text-[10px] font-black uppercase tracking-widest text-gray-400"},"Index Specifications",-1)),u("button",{type:"button",onClick:Le,class:"text-[9px] font-black text-primary uppercase tracking-widest"},"+ Append Data Point")]),u("div",ye,[(o(!0),r(m,null,y(d(Be).infos,(e,s)=>(o(),r("div",{key:s,class:"relative p-6 rounded-2xl border border-gray-50 bg-gray-50/10 group grid grid-cols-1 md:grid-cols-2 gap-6"},[u("button",{type:"button",onClick:e=>(e=>{1!==Be.infos.length?Be.infos.splice(e,1):Be.infos[0]={key:"",value:"",image:null,image_url:null}})(s),class:"absolute -top-3 -right-3 h-8 w-8 rounded-xl bg-red-50 text-red-500 border border-red-100 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-all shadow-sm"},[...a[25]||(a[25]=[u("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[u("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,xe),u("div",ve,[i(t,{value:"Key Identity",class:"!text-[8px] !font-black !uppercase !text-gray-400"}),i(A,{modelValue:e.key,"onUpdate:modelValue":a=>e.key=a,"category-id":Ee.value,class:"w-full !h-11 !text-sm !bg-white !rounded-xl",placeholder:"e.g. Serial, Model..."},null,8,["modelValue","onUpdate:modelValue","category-id"])]),u("div",fe,[i(t,{value:"Data Value",class:"!text-[8px] !font-black !uppercase !text-gray-400"}),i(S,{modelValue:e.value,"onUpdate:modelValue":a=>e.value=a,class:"w-full !h-11 !text-sm !bg-white !rounded-xl",placeholder:"Registry value..."},null,8,["modelValue","onUpdate:modelValue"])])]))),128))])]),u("div",he,[a[28]||(a[28]=u("p",{class:"text-[10px] text-gray-400 font-bold uppercase tracking-tight italic leading-relaxed"},"System update will be strictly logged under your administrator profile.",-1)),u("div",be,[i(d(w),{href:e.route("assets.show",He.asset.id),class:"px-8 py-3 text-xs font-black text-gray-400 uppercase tracking-[0.2em] hover:text-gray-900 transition-colors"},{default:c(()=>[...a[26]||(a[26]=[k("Discard Changes",-1)])]),_:1},8,["href"]),i(j,{disabled:d(Be).processing,class:"!h-12 !px-10 !rounded-xl !shadow-xl active:scale-95 transition-all"},{default:c(()=>[...a[27]||(a[27]=[k("Commit Full Profile Update",-1)])]),_:1},8,["disabled"])])])],32)])]),i(T,{show:Re.value,onClose:a[11]||(a[11]=e=>Re.value=!1),"max-width":"lg"},{default:c(()=>[u("div",we,[u("div",ke,[a[29]||(a[29]=u("h3",{class:"text-xl font-black text-gray-900"},"Register New Hardware",-1)),u("p",_e,"Add peripheral to system serial "+x(He.asset.asset_code),1)]),u("div",Ve,[u("div",je,[u("div",Ce,[i(U,{modelValue:Ke.value,"onUpdate:modelValue":a[7]||(a[7]=e=>Ke.value=e),options:He.classifications,label:"Component Classification",placeholder:"Search classification...",class:"w-full"},null,8,["modelValue","options"])]),u("div",Se,[i(t,{value:"Lifecycle Status",class:"!text-[9px] !font-black !uppercase !text-gray-400"}),g(u("select",{"onUpdate:modelValue":a[8]||(a[8]=e=>qe.value.status=e),class:"w-full h-12 rounded-xl border-gray-100 bg-gray-50 text-sm focus:bg-white transition-all"},[...a[30]||(a[30]=[u("option",{value:"active"},"Active",-1),u("option",{value:"maintenance"},"Maintenance",-1),u("option",{value:"damaged"},"Damaged",-1)])],512),[[v,qe.value.status]])])]),(o(!0),r(m,null,y(qe.value.infos,(e,a)=>(o(),r("div",{key:a,class:"grid grid-cols-2 gap-4"},[u("div",Me,[i(S,{modelValue:e.key,"onUpdate:modelValue":a=>e.key=a,class:"w-full !h-10 border-gray-50 !bg-gray-100/50 !text-xs font-bold",readonly:""},null,8,["modelValue","onUpdate:modelValue"])]),u("div",Ue,[i(S,{modelValue:e.value,"onUpdate:modelValue":a=>e.value=a,class:"w-full !h-10 !text-sm border-gray-100",placeholder:"Enter Serial / Label..."},null,8,["modelValue","onUpdate:modelValue"])])]))),128)),u("div",Ae,[i(t,{value:"Technician Notes",class:"!text-[9px] !font-black !uppercase !text-gray-400"}),g(u("textarea",{"onUpdate:modelValue":a[9]||(a[9]=e=>qe.value.note=e),rows:"2",class:"w-full rounded-xl border-gray-100 bg-gray-50 text-sm p-4 h-24",placeholder:"Optional notes for this specific part..."},null,512),[[f,qe.value.note]])])]),u("div",Te,[i(C,{onClick:a[10]||(a[10]=e=>Re.value=!1),class:"flex-1 !h-12 !rounded-xl !text-[10px] !font-black !uppercase"},{default:c(()=>[...a[31]||(a[31]=[k("Cancel Registry",-1)])]),_:1}),i(j,{onClick:Je,disabled:Oe.value||!qe.value.category_id,class:"flex-1 !h-12 !rounded-xl !text-[10px] !font-black !uppercase"},{default:c(()=>[k(x(Oe.value?"Registering...":"Add to System"),1)]),_:1},8,["disabled"])])])]),_:1},8,["show"])]),_:1})],64)}}};export{He as default};
